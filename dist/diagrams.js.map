{"version":3,"sources":["dist/diagrams.js"],"names":[],"mappings":"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","file":"dist/diagrams.js","sourcesContent":["(function(scope) {\n  var diagrams = {},\n    d = diagrams;\n  \n  (function() {})();(function(){var defaultDiagramConfiguration = {},\n  createName = function(name) {\n    return '$' + name;\n  };\n\nclass EventEmitter {\n  emit(name, data) {\n    var fnName = createName(name);\n    this._subjects[fnName] || (this._subjects[fnName] = new Rx.Subject());\n    this._subjects[fnName].onNext(data);\n  }\n\n  listen(name, handler) {\n    var fnName = createName(name);\n    this._subjects[fnName] || (this._subjects[fnName] = new Rx.Subject());\n    return this._subjects[fnName].subscribe(handler);\n  }\n\n  dispose() {\n    var subjects = this._subjects;\n    for (var prop in subjects) {\n      if ({}.hasOwnProperty.call(subjects, prop)) {\n        subjects[prop].dispose();\n      }\n    }\n\n    this._subjects = {};\n  }\n}\n\nd.Diagram = class Diagram extends EventEmitter {\n  constructor(opts) {\n    super();\n    var prototype = Object.getPrototypeOf(this);\n\n    this._subjects = {};\n    this.name = opts.name;\n    this._configuration = this.configuration || {};\n\n    _.merge(this._configuration, defaultDiagramConfiguration);\n    _.defaults(prototype, opts.helpers);\n\n    this.register();\n    this.setDiagramListeners();\n  }\n\n  handleItemClick(el, data) {\n    var diagram = this;\n    el.on('click', function() {\n      d3.event.stopPropagation();\n      diagram.emit('itemclick', data);\n    });\n  }\n\n  setDiagramListeners() {\n    this.listen('itemclick', function(itemData) {\n      if (itemData && itemData.text) {\n        d.tooltip('hide');\n        d.utils.fillBannerWithText(itemData.text);\n      }\n    });\n  }\n\n  config(opts, optValue) {\n    var argsLength = arguments.length,\n      optsType = typeof(opts),\n      optsKey;\n\n    if (argsLength === 1) {\n      if (_.isFunction(optsType)) optsKey = opts();\n      else if (_.isString(opts)) optsKey = opts;\n      else if (_.isObject(opts)) {\n        for (let key in opts) {\n          this.config(key, opts[key]);\n        }\n        return opts;\n      }\n      return this._configuration[optsKey];\n    } else if (argsLength === 2) {\n      this._configuration[opts] = optValue;\n      return optValue;\n    }\n  }\n\n  register() {\n    var diagram = this;\n    d[diagram.name] = function() {\n      var args = arguments;\n      d.utils.runIfReady(function() {\n        diagram.create.apply(diagram, args);\n      });\n    };\n\n    _.defaults(d[diagram.name], Object.getPrototypeOf(diagram));\n  }\n};\n})();(function(){d.shapes = {};\nd.shapes.hexagon = function(opts) {\n  var halfHeight = opts.height / 2,\n    halfWidth = opts.width / 2,\n    gap = opts.widthPercent ? (1 - (opts.widthPercent / 100)) * opts.width : (opts.width - opts.height) / 2,\n    result = '',\n    center, cx, cy;\n\n  center = opts.center || [halfWidth, halfHeight];\n  cx = center[0];\n  cy = center[1];\n\n  result += 'M' + (cx - halfWidth) + ',' + cy;\n  result += 'L' + (cx - halfWidth + gap) + ',' + (cy + halfHeight);\n  result += 'L' + (cx + halfWidth - gap) + ',' + (cy + halfHeight);\n  result += 'L' + (cx + halfWidth) + ',' + cy;\n  result += 'L' + (cx + halfWidth - gap) + ',' + (cy - halfHeight);\n  result += 'L' + (cx - halfWidth + gap) + ',' + (cy - halfHeight);\n  result += 'Z';\n\n  return result;\n};})();(function(){d.shared = {\n  get: function(key) {\n    if (key === 'set' || key === 'get') throw new Error('Reserved keyword: ' + key);\n    return d.shared[key];\n  },\n  set: function(data) {\n    var keys = Object.keys(data);\n    if (_.contains(keys, 'get') || _.contains(keys, 'set'))  throw new Error('Reserved keyword in data: ' + data);\n    d.shared = _.defaults(d.shared, data);\n  }\n};\n})();(function(){d.svg = {};\nd.svg.addVerticalGradientFilter = function(container, id, colors) {\n  var defs = container.append('defs'),\n    linearGradient = defs.append('linearGradient').attr({\n      id: id,\n      x1: '0%',\n      y1: '0%',\n      x2: '0%',\n      y2: '100%'\n    });\n\n  linearGradient.append('stop').attr('offset', '0%').style({\n    'stop-color': colors[0],\n    'stop-opacity': 1\n  });\n  linearGradient.append('stop').attr('offset', '100%').style({\n    'stop-color': colors[1],\n    'stop-opacity': 1\n  });\n};\n\nd.svg.addFilterColor = function(id, container, deviation, slope, extra) {\n  var defs = container.append('defs'),\n    filter = defs.append('filter').attr({\n      id: 'diagrams-drop-shadow-' + id\n    });\n\n  if (extra) filter.attr({\n    width: '500%',\n    height: '500%',\n    x: '-200%',\n    y: '-200%'\n  });\n  filter.append('feOffset').attr({\n    result: 'offOut',\n    'in': 'SourceGraphic',\n    dx: 0.5,\n    dy: 0.5\n  });\n  filter.append('feGaussianBlur').attr({\n    result: 'blurOut',\n    'in': 'offOut',\n    stdDeviation: deviation\n  });\n  filter.append('feBlend').attr({\n    'in': 'SourceGraphic',\n    in2: 'blurOut',\n    mode: 'normal'\n  });\n  filter.append('feComponentTransfer').append('feFuncA').attr({\n    type: 'linear',\n    slope: slope\n  });\n};\n\nd.svg.generateSvg = function(style) {\n  var bodyDims = document.body.getBoundingClientRect();\n\n  return d3.select('body').append('svg').attr({\n    width: bodyDims.width - 40,\n    height: 4000\n  }).style(style);\n};\n\nd.svg.updateHeigthOfElWithOtherEl = function(el, otherEl, offset) {\n  el.attr({\n    height: otherEl[0][0].getBoundingClientRect().height + (offset || 0)\n  });\n};\n\nd.svg.textEllipsis = function(width) {\n  return function() {\n    var self = d3.select(this),\n      textLength = self.node().getComputedTextLength(),\n      text = self.text();\n    while (textLength > (width) && text.length > 0) {\n      text = text.slice(0, -4);\n      self.text(text + '...');\n      textLength = self.node().getComputedTextLength();\n    }\n  };\n};})();(function(){d.tooltip = function(display, elementAbove, content) {\n  var tooltipId = 'diagrams-tooltip',\n    tooltip = d3.select('#' + tooltipId),\n    tooltipStyle = '',\n    bodyHeight = (function() {\n      var body = document.body,\n        html = document.documentElement;\n      return Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\n    })(),\n    highlightCodeIfAny = function() {\n      content = d.utils.formatTextFragment(content);\n    },\n    formatAndAddContent = function() {\n      highlightCodeIfAny();\n      tooltip.html(content);\n    },\n    tooltipHeight, tooltipTop, body, otherElementDims;\n\n  if (content !== false) {\n    if (tooltip[0][0] === null) {\n      body = d3.select('body');\n      tooltip = body.insert('div', 'svg').attr({\n        id: tooltipId\n      });\n    }\n\n    if (display === 'show') {\n      tooltipStyle += 'display: inline-block; ';\n      formatAndAddContent();\n\n      if (typeof(elementAbove) === 'string') elementAbove = document.getElementById(elementAbove);\n      else elementAbove = document.getElementById(elementAbove[0][0].id);\n      otherElementDims = elementAbove.getBoundingClientRect();\n\n      tooltip.attr('style', tooltipStyle + '; opacity: 0');\n      tooltipHeight = tooltip.node().getBoundingClientRect().height;\n\n      tooltipTop = otherElementDims.top + otherElementDims.height + document.body.scrollTop + 20;\n      if (tooltipTop + tooltipHeight > bodyHeight) {\n        tooltipTop = otherElementDims.top + document.body.scrollTop - 20 - tooltipHeight;\n        if (tooltipTop < 0) {\n          tooltipTop = otherElementDims.top + otherElementDims.height + document.body.scrollTop - tooltipHeight;\n        }\n      }\n      tooltipStyle += 'top: ' + tooltipTop + 'px; ';\n\n    } else if (display === 'hide') tooltipStyle += 'display: none; ';\n\n    tooltip.attr('style', tooltipStyle);\n  }\n};\n\nd.tooltip.onMouseEnterListenerFn = _.partial(d.tooltip, 'show');\nd.tooltip.onMouseLeaveListenerFn = _.partial(d.tooltip, 'hide');\n\nd.tooltip.setMouseListeners = function(el, elId, text) {\n  el.on('mouseenter', function() {\n    d.tooltip.onMouseEnterListenerFn(elId, text);\n  });\n  el.on('mouseleave', function() {\n    d.tooltip.onMouseLeaveListenerFn();\n  });\n};\nd.tooltip.generateATextDescriptionStr = function(text, description) {\n  return '<strong>' + text + '</strong>' + (description ? '<br>' + description : '');\n};\n})();(function(){d.utils = {};\nd.utils.d3DefaultReturnFn = function(props, preffix, suffix) {\n  props = props.split('.');\n  return function(d) {\n    var position = _.reduce(props, function(memo, property) {\n      return memo[property];\n    }, d);\n    return (preffix || suffix) ? preffix + position + suffix : position;\n  };\n};\nd.utils.applySimpleTransform = function(el) {\n  el.attr('transform', function(d) {\n    return \"translate(\" + d.x + \",\" + d.y + \")\";\n  });\n};\nd.utils.positionFn = function(props, offset) {\n  offset = offset || 0;\n  return d.utils.d3DefaultReturnFn(props, 0, offset);\n};\nd.utils.textFn = function(props, preffix, suffix) {\n  preffix = preffix || '';\n  suffix = suffix || '';\n  return d.utils.d3DefaultReturnFn(props, preffix, suffix);\n};\nd.utils.runIfReady = function(fn) {\n  if (document.readyState === 'complete') fn();\n  else window.onload = fn;\n};\nd.utils.fillBannerWithText = function(content) {\n  var bannerId = 'diagrams-banner',\n    previousBanner = d3.select('#' + bannerId),\n    body = d3.select('body'),\n    bannerEl, bannerHtml;\n\n  if (previousBanner) previousBanner.remove();\n  \n  bannerHtml = '<div class=\"diagrams-banner-cross\">&#x2715;</div>';\n  bannerHtml += d.utils.formatTextFragment(content);\n\n  bannerEl = body.insert('div', 'svg').attr({\n    id: bannerId\n  }).html(bannerHtml);\n  bannerEl.on('click', function() {\n    bannerEl.remove();\n  });\n};\nd.utils.replaceCodeFragmentOfText = function(text, predicate) {\n  var codeRegex = /``([\\s\\S]*?)``([\\s\\S]*?)``/g,\n    allMatches = text.match(codeRegex);\n\n  return text.replace(codeRegex, function(matchStr, language, codeBlock) {\n    return predicate(matchStr, language, codeBlock, allMatches);\n  });\n};\nd.utils.formatTextFragment = function(text) {\n  text = d.utils.replaceCodeFragmentOfText(text, function(matchStr, language, code, allMatches) {\n    var lastMatch = (matchStr === _.last(allMatches));\n    return '<pre' + (lastMatch ? ' class=\"last-code-block\" ' : '') + '><code>' + hljs.highlight(language, code).value + '</pre></code>';\n  });\n  return text;\n};\nd.utils.codeBlockOfLanguageFn = function(language, commentsSymbol) {\n  commentsSymbol = commentsSymbol || '';\n  return function(codeBlock, where, withInlineStrs) {\n    if (withInlineStrs === true) codeBlock = commentsSymbol + \" ...\\n\" + codeBlock + \"\\n\" + commentsSymbol + \" ...\";\n    if (_.isString(where)) codeBlock = commentsSymbol + ' @' + where + \"\\n\" + codeBlock;\n    return '``' + language + '``' + codeBlock + '``';\n  };\n};\n// This function is created to be able to reference it in the diagrams\nd.utils.wrapInParagraph = function(text) {\n  return '<p>' + text + '</p>';\n};\nd.utils.fillBannerOnClick = function(el, text, onMouseDown) {\n  var event = onMouseDown ? 'mousedown' : 'click';\n  el.on(event, function() {\n    d.tooltip('hide');\n    d3.event.stopPropagation();\n    d.utils.fillBannerWithText(text);\n  });\n};\n})();(function(){var helpers = {\n    generateDefinitionWithSharedGet: function() {\n      var text = arguments[0],\n        sharedKey, preffix;\n\n      preffix = (arguments.length > 1) ? arguments[1] : '';\n      sharedKey = preffix + text.split('(')[0];\n\n      return Box.generateDefinition(text, d.shared.get(sharedKey));\n    },\n\n    addConvertToLayersButton: function(origConf) {\n      var body = d3.select('body');\n\n      body.insert('div', 'svg').append('input').attr({\n        type: 'button',\n        'class': 'conversion-button',\n        value: 'Convert to layers diagram',\n        onclick: 'diagrams.box.convertToLayerWrapper()' // refactor this\n      });\n\n      diagrams.box.convertToLayerWrapper = function() {\n        helpers.convertToLayer(origConf);\n      };\n    },\n\n    convertToLayer: function(origConf) {\n      var convertDataToLayers = function(dependants) {\n          _.each(dependants, function(dependant, index) {\n            if (_.isString(dependant)) {\n              dependant = dependants[index] = {\n                text: dependant\n              };\n            }\n            if (dependant.description) dependant.text += ': ' + dependant.description;\n            if (dependant.dependants) convertDataToLayers(dependant.dependants);\n            else dependant.dependants = [];\n          });\n        },\n        createLayers = function() {\n          var svg = d3.select('svg'),\n            input = d3.select('input');\n\n          svg.remove();\n          input.remove();\n          d.layer(layersData);\n        },\n        layersData = [];\n\n      layersData.push({\n        text: origConf.name,\n        dependants: origConf.body\n      });\n      convertDataToLayers(layersData[0].dependants);\n      createLayers();\n    },\n\n    generateContainer: function(text, description, dependants) {\n      var container;\n\n      if (_.isArray(description)) {\n        dependants = description;\n        description = null;\n      }\n\n      container = {\n        type: 'container',\n        text: text,\n        dependants: dependants,\n        description: description\n      };\n\n\n      return container;\n    },\n\n    generateLink: function(text, url) {\n      return {\n        type: 'link',\n        text: text,\n        url: url\n      };\n    },\n\n    generateDefinition: function(text, description) {\n      return {\n        type: 'definition',\n        text: text,\n        description: description\n      };\n    }\n  },\n  textGId = 0,\n  Box;\n\nBox = class Box extends d.Diagram {\n  create(conf) {\n    var diagram = this,\n      origConf = _.cloneDeep(conf),\n      svg = d.svg.generateSvg(),\n      width = svg.attr('width') - 40,\n      nameHeight = 50,\n      boxG = svg.append('g').attr({\n        transform: 'translate(20, 20)',\n        'class': 'box-diagram'\n      }),\n      nameG = boxG.append('g'),\n      bodyG = boxG.append('g').attr({\n        transform: 'translate(0, ' + nameHeight + ')'\n      }),\n      bodyPosition = 1,\n      rowHeight = 30,\n      depthWidth = 35,\n      addBodyDependants = function(dependants, container, depth) {\n        var newContainer, text, textG, textWidth, descriptionWidth, containerText;\n\n        dependants = dependants || conf.body;\n        container = container || bodyG;\n        depth = depth || 1;\n\n        _.each(dependants, function(dependant) {\n          var currentTextGId, dependantText;\n\n          currentTextGId = 'diagrams-box-text-' + textGId++;\n          if (dependant.type === 'container') {\n            newContainer = container.append('g');\n            containerText = ' ' + dependant.text;\n            if (dependant.dependants && dependant.dependants.length > 0) containerText += ':';\n            if (dependant.description) {\n              dependantText = d.tooltip.generateATextDescriptionStr(containerText, dependant.description);\n              containerText += ' (...)';\n            } else {\n              dependantText = false;\n            }\n            textG = newContainer.append('text').text(containerText).attr({\n              x: depthWidth * depth,\n              y: rowHeight * ++bodyPosition,\n              id: currentTextGId\n            });\n            // dependant.dependants = _.sortBy(dependant.dependants, 'text');\n            addBodyDependants(dependant.dependants, newContainer, depth + 1);\n          } else if (dependant.type === 'link') {\n            textG = container.append('svg:a').attr(\"xlink:href\", dependant.url)\n              .append('text').text(dependant.text).attr({\n                id: currentTextGId,\n                x: depthWidth * depth,\n                y: rowHeight * ++bodyPosition,\n                fill: '#3962B8'\n              });\n\n            dependantText = dependant.text + ' (' + dependant.url + ')';\n          } else if (dependant.type === 'definition') {\n            textG = container.append('g').attr({\n              id: currentTextGId\n            });\n            text = textG.append('text').text(dependant.text).attr({\n              x: depthWidth * depth,\n              y: rowHeight * ++bodyPosition\n            }).style({\n              'font-weight': 'bold'\n            });\n            if (dependant.description) {\n              textWidth = text[0][0].getBoundingClientRect().width;\n              descriptionWidth = svg[0][0].getBoundingClientRect().width - textWidth - depthWidth * depth - 30;\n\n              textG.append('text').text('- ' + dependant.description).attr({\n                x: depthWidth * depth + textWidth + 5,\n                y: rowHeight * bodyPosition - 1\n              }).each(d.svg.textEllipsis(descriptionWidth));\n            }\n\n            dependantText = d.tooltip.generateATextDescriptionStr(dependant.text, dependant.description);\n          } else if (_.isString(dependant)) {\n            textG = container.append('text').text(dependant).attr({\n              id: currentTextGId,\n              x: depthWidth * depth,\n              y: rowHeight * ++bodyPosition\n            });\n\n            dependantText = dependant;\n          }\n\n          diagram.handleItemClick(textG, {\n            text: dependantText\n          });\n\n          d.tooltip.setMouseListeners(textG, currentTextGId, dependantText);\n        });\n      },\n      bodyRect;\n\n    d.svg.addFilterColor('box', svg, 3, 4);\n\n    nameG.append('rect').attr({\n      height: nameHeight,\n      width: width,\n      stroke: '#000',\n      fill: '#fff'\n    }).style({\n      filter: 'url(#diagrams-drop-shadow-box)'\n    });\n    nameG.append('text').attr({\n      x: width / 2,\n      y: 30\n    }).text(conf.name).style({\n      'font-weight': 'bold',\n      'text-anchor': 'middle'\n    });\n\n    bodyRect = bodyG.append('rect').attr({\n      width: width,\n      stroke: '#000',\n      fill: '#fff'\n    }).style({\n      filter: 'url(#diagrams-drop-shadow-box)'\n    });\n    addBodyDependants();\n    d.svg.updateHeigthOfElWithOtherEl(svg, boxG, 50);\n    d.svg.updateHeigthOfElWithOtherEl(bodyRect, boxG, 25 - nameHeight);\n    \n    helpers.addConvertToLayersButton(origConf);\n  }\n};\n\nnew Box({\n  name: 'box',\n  helpers: helpers\n});\n})();(function(){var dPositionFn = d.utils.positionFn,\n  dTextFn = d.utils.textFn,\n  helpers = {\n    generateNodeOptions: function(options) {\n      var obj = {},\n        shape;\n      if (_.isString(options)) return helpers.generateNodeOptions(options.split(' '));\n      else if (_.isArray(options)) {\n        _.each(options, function(opt) {\n          if (opt.substr(0, 2) === 's-') {\n            shape = opt.substr(2, opt.length - 2);\n            if (shape === 't') obj.shape = 'triangle';\n            else if (shape === 's') obj.shape = 'square';\n            else obj.shape = 'circle';\n          } else if (opt === 'b') obj.bold = true;\n        });\n        return obj;\n      }\n    },\n    generateNode: function() {\n      var node = {\n          name: arguments[0]\n        },\n        linksInfo;\n\n      linksInfo = _.isString(arguments[1]) ? arguments[1] : String(arguments[1]);\n      linksInfo = linksInfo.split(' ').map(Number);\n      if (linksInfo.length > 0) node.id = linksInfo[0];\n      if (linksInfo.length > 1) {\n        node.calledBy = [];\n        _.each(linksInfo, function(nodeId, index) {\n          if (index > 0) node.calledBy.push(nodeId);\n        });\n      }\n      if (arguments.length > 2) node.description = arguments[2];\n      if (arguments.length > 3) node.options = helpers.generateNodeOptions(arguments[3]);\n\n      return node;\n    },\n    generateNodeWithSharedGet: function() {\n      var text = arguments[0],\n        sharedKey, preffix, options;\n\n      preffix = (arguments.length > 2) ? arguments[2] : '';\n      sharedKey = preffix + text.split('(')[0];\n      options = (arguments.length > 3) ? arguments[3] : null;\n\n      return helpers.generateNode(text, arguments[1], d.shared.get(sharedKey), options);\n    },\n    generateFnNodeWithSharedGetAndBoldIfFile: function(file) {\n      return function() {\n        var opts = '',\n          preffix = '';\n        if (arguments[0].split('@')[0] === file) opts = 'b';\n        if (arguments.length > 2) preffix = arguments[2];\n        if (arguments.length > 3) opts = arguments[3] + ' ' + opts;\n        return helpers.generateNodeWithSharedGet(arguments[0], arguments[1], preffix, opts);\n      };\n    }\n  },\n  Graph, helpers;\n\nGraph = class Graph extends d.Diagram {\n  create(data, conf) {\n    var bodyHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0),\n      svg = d.svg.generateSvg(),\n      container = svg.append('g'),\n      height = bodyHeight - 250,\n      width = svg.attr('width'),\n      tick = function() {\n        link.select('path.link-path').attr(\"d\", function(d) {\n          var dx = d.target.x - d.source.x,\n            dy = d.target.y - d.source.y,\n            dr = Math.sqrt(dx * dx + dy * dy);\n          return \"M\" +\n            d.source.x + \",\" +\n            d.source.y + \"A\" +\n            dr + \",\" + dr + \" 0 0,1 \" +\n            d.target.x + \",\" +\n            d.target.y;\n        });\n\n        node.each(function(singleNode) {\n          if (singleNode.shape === 'circle') {\n            node.select('circle').attr(\"cx\", dPositionFn('x')).attr(\"cy\", dPositionFn('y'));\n          } else {\n            if (singleNode.shape === 'triangle') shapeEl = node.select('path.triangle');\n            else if (singleNode.shape === 'square') shapeEl = node.select('path.square');\n\n            d.utils.applySimpleTransform(shapeEl);\n          }\n        });\n        node.select('text').attr(\"x\", dPositionFn('x')).attr(\"y\", dPositionFn('y', -20));\n      },\n      parseData = function() {\n        var maxId = _.reduce(data, function(memo, node) {\n            var id = node.id || 0;\n            return (memo > id) ? memo : id;\n          }, 0),\n          idsMap = {},\n          nodesWithLinkMap = {},\n          colors = d3.scale.category10(),\n          nodeId, color, options, sourceNode;\n\n        parsedData = {\n          links: [],\n          nodes: []\n        };\n        markers = [];\n        _.each(data, function(node, nodeIndex) {\n          nodeId = _.isUndefined(node.id) ? maxId++ : node.id;\n          color = colors(nodeIndex);\n          options = node.options || {};\n\n          parsedData.nodes.push({\n            name: node.name,\n            id: nodeId,\n            calledBy: node.calledBy || [],\n            description: node.description || null,\n            color: color,\n            shape: options.shape || 'circle',\n            bold: options.bold || false\n          });\n          idsMap[nodeId] = {\n            index: nodeIndex\n          };\n          if (_.isArray(node.calledBy) && node.calledBy.length > 0) {\n            idsMap[nodeId].color = color;\n            markers.push({\n              id: nodeId,\n              color: color\n            });\n          }\n        });\n\n        _.each(parsedData.nodes, function(node, nodeIndex) {\n          if (node.calledBy.length > 0) {\n            _.each(node.calledBy, function(calledById) {\n              sourceNode = idsMap[calledById];\n              if (sourceNode) {\n                if (conf.hideNodesWithoutLinks) {\n                  nodesWithLinkMap[idsMap[calledById].index] = true;\n                  nodesWithLinkMap[nodeIndex] = true;\n                }\n                parsedData.links.push({\n                  source: idsMap[calledById].index,\n                  target: nodeIndex,\n                  color: idsMap[node.id].color,\n                  targetId: node.id\n                });\n              }\n            });\n          }\n        });\n\n        if (conf.hideNodesWithoutLinks === true) {\n          _.each(parsedData.nodes, function(node, nodeIndex) {\n            if (nodesWithLinkMap[nodeIndex] !== true) node.hidden = true;\n          });\n        }\n      },\n      zoomed = function() {\n        container.attr(\"transform\", \"translate(\" + d3.event.translate + \")scale(\" + d3.event.scale + \")\");\n      },\n      dragstarted = function() {\n        d3.event.sourceEvent.stopPropagation();\n        d3.select(this).classed(\"dragging\", true);\n        force.start();\n      },\n      dragged = function(d) {\n        d3.select(this).attr(\"cx\", d.x = d3.event.x).attr(\"cy\", d.y = d3.event.y);\n      },\n      dragended = function() {\n        d3.select(this).classed(\"dragging\", false);\n      },\n      setDependantsAndDependencies = function() {\n        _.each(parsedData.nodes, function(node) {\n          node.dependants = [];\n          node.dependencies = [];\n        });\n        _.each(parsedData.links, function(link) {\n          link.source.dependencies.push(link.target);\n          link.target.dependants.push(link.source);\n        });\n      },\n      force, drag, link, node, zoom, singleNodeEl, shape, shapeEl, markers, parsedData;\n\n    conf = conf || {};\n    parseData();\n\n    svg.attr({\n      height: height,\n      'class': 'graph-diagram'\n    });\n\n\n    zoom = d3.behavior.zoom().scaleExtent([0.1, 10]).on(\"zoom\", zoomed);\n    svg.call(zoom);\n\n    force = d3.layout.force().size([width, height]).charge(conf.charge || -10000).linkDistance(conf.linkDistance || 140).on(\"tick\", tick);\n\n    drag = d3.behavior.drag().origin(function(d) {\n      return d;\n    }).on(\"dragstart\", dragstarted).on(\"drag\", dragged).on(\"dragend\", dragended);\n\n    force.nodes(parsedData.nodes).links(parsedData.links).start();\n\n    container.append(\"svg:defs\").selectAll(\"marker\")\n      .data(markers)\n      .enter().append(\"svg:marker\")\n      .attr({\n        id: dTextFn('id', 'arrow-head-'),\n        'class': 'arrow-head',\n        fill: dTextFn('color'),\n        viewBox: '0 -5 10 10',\n        refX: 19,\n        refY: -1.5,\n        markerWidth: 8,\n        markerHeight: 8,\n        orient: 'auto'\n      })\n      .append(\"svg:path\")\n      .attr(\"d\", \"M0,-5L10,0L0,5\");\n\n    link = container.selectAll(\".link\").data(parsedData.links).enter().append('g').attr(\"class\", \"link\");\n    link.append(\"svg:path\").attr({\n      'class': 'link-path',\n      \"marker-end\": dTextFn('targetId', 'url(#arrow-head-', ')')\n    }).style('stroke', dTextFn('color'));\n    node = container.selectAll(\".node\").data(parsedData.nodes).enter().append('g').attr({\n      'class': function(d) {\n        var finalClass = 'node';\n        if (d.hidden === true) finalClass += ' node-hidden';\n        return finalClass;\n      },\n      id: dTextFn('id', 'node-')\n    });\n\n    node.each(function(singleNode) {\n      var itemText = d.tooltip.generateATextDescriptionStr(singleNode.name, singleNode.description),\n        singleNodeClasses = '';\n      singleNodeEl = d3.select(this);\n      if (singleNode.shape === 'circle') {\n        shapeEl = singleNodeEl.append(\"circle\").attr({\n          r: 12,\n          fill: dTextFn('color')\n        });\n      } else {\n        shape = d3.svg.symbol().size(750);\n        shapeEl = singleNodeEl.append(\"path\");\n        if (singleNode.shape === 'triangle') {\n          shape = shape.type('triangle-up');\n          singleNodeClasses += ' triangle';\n        } else if (singleNode.shape === 'square') {\n          shape = shape.type('square');\n          singleNodeClasses += ' square';\n        }\n        shapeEl = shapeEl.attr({\n          d: shape,\n          fill: dTextFn('color')\n        });\n        d.utils.applySimpleTransform(shapeEl);\n      }\n\n      shapeEl.call(drag);\n      if (singleNode.bold === true) singleNodeClasses += ' bold';\n      else singleNodeClasses += ' thin';\n      shapeEl.attr('class', singleNodeClasses);\n\n      // Add this when there is a checkbox to disable it as it may be annoying\n\n      d.tooltip.setMouseListeners(shapeEl, 'node-' + singleNode.id, itemText);\n    });\n    node.append(\"text\").text(dTextFn('name'));\n\n    setDependantsAndDependencies();\n  }\n};\n\nnew Graph({\n  name: 'graph',\n  helpers: helpers\n});\n})();(function(){var layerGId = 0,\n  dTextFn = d.utils.textFn,\n  helpers = {\n    ids: 0,\n    Grid: class Grid {\n      constructor(fixedWidth) {\n        this.position = {\n          x: 0,\n          y: 0\n        };\n        this.width = fixedWidth;\n        this.cells = [];\n      }\n      addDependantAtNewRow(dependant) {\n        var counter = 0;\n\n        this.position.x = 0;\n        while (counter < 1000) {\n          this.position.y += 1;\n          if (this.dependantFitsAtCurrentPos(dependant)) break;\n        }\n        this.addDependantAtCurrentPos(dependant);\n      }\n      addDependantAtCurrentPos(dependant) {\n        this.addDependantAtPos(dependant, this.position);\n      }\n      createRowIfNecessary(posY) {\n        if (_.isUndefined(this.cells[posY])) this.cells[posY] = [];\n      }\n      addDependantAtPos(dependant, pos) {\n        var row;\n        dependant.x = pos.x;\n        dependant.y = pos.y;\n        for (var i = 0; i < dependant.height; i++) {\n          this.createRowIfNecessary(i + pos.y);\n          row = this.cells[i + pos.y];\n          for (var j = 0; j < dependant.width; j++) {\n            row[j + pos.x] = true;\n          }\n        }\n        this.updatePosition();\n      }\n      updatePosition() {\n        var counter = 0;\n        while (counter < 1000) {\n          this.position.x += 1;\n          if (this.position.x === this.width) {\n            this.position.x = -1;\n            this.position.y += 1;\n            this.createRowIfNecessary(this.position.y);\n          } else if (this.cells[this.position.y][this.position.x] !== true) {\n            break;\n          }\n          counter++;\n        }\n      }\n      dependantFitsAtPos(dependant, pos) {\n        var row;\n        for (var i = 0; i < dependant.height; i++) {\n          row = this.cells[i + pos.y];\n          if (_.isUndefined(row)) return true;\n          for (var j = 0; j < dependant.width; j++) {\n            if (row[j + pos.x] === true) return false;\n            if ((j + pos.x + 1) > this.width) return false;\n          }\n        }\n        return true;\n      }\n      dependantFitsAtCurrentPos(dependant) {\n        return this.dependantFitsAtPos(dependant, this.position);\n      }\n      movePositionToNextRow() {\n        this.position.y++;\n        this.position.x = 0;\n        this.createRowIfNecessary(this.position.y);\n      }\n      lastRowIsEmpty() {\n        var rows = this.cells.length;\n        for (var i = 0; i < this.width; i++) {\n          if (this.cells[rows - 1][i] === true) return false;\n        }\n        return true;\n      }\n      getSize() {\n        var rows = this.cells.length;\n        return {\n          width: this.width,\n          height: (this.lastRowIsEmpty()) ? rows - 1 : rows\n        };\n      }\n    },\n\n    config: {\n      widthSize: 350,\n      heightSize: 60,\n      depthWidthFactor: 4,\n      depthHeightFactor: 2,\n      showNumbersAll: false\n    },\n\n    handleConnectedToNextCaseIfNecessary: function(layers, currentIndex) {\n      var layer = layers[currentIndex],\n        nextLayer = layers[currentIndex + 1],\n        connectedTo, newId;\n\n      if (layer.hasOwnProperty('connectedWithNext') === true && nextLayer) {\n        if (nextLayer.id) newId = nextLayer.id;\n        else {\n          newId = 'to-next-' + String(++helpers.ids);\n          nextLayer.id = newId;\n        }\n\n        if (_.isObject(layer.connectedWithNext) && layer.connectedWithNext.type) {\n          connectedTo = {\n            id: newId,\n            type: layer.connectedWithNext.type\n          };\n        } else connectedTo = newId;\n\n        if (layer.connectedTo) layer.connectedTo.push(connectedTo);\n        else layer.connectedTo = [connectedTo];\n      }\n    },\n\n    dependantsOfLayerShouldBeSorted: function(dependantsArray) {\n      var ret = true;\n      _.each(dependantsArray, function(dependant) {\n        if (dependant.hasOwnProperty('connectedTo')) ret = false;\n        if (dependant.hasOwnProperty('connectToNext')) ret = false;\n      });\n      return ret;\n    },\n\n    calculateLayerWithChildrenDimensions: function(layer) {\n      var totalWidth = 0,\n        totalHeight = 0,\n        maxWidth = 0,\n        maxHeight = 0,\n        dependantsArray = [],\n        whileCounter = 0,\n        dependantsOfLayer, grid, dependantsOfLayerIndex, width, gridSize, dependantsShouldBeSorted,\n        addedDependantToGrid = function(index) {\n          if (dependantsOfLayer[index].inNewRow === true) {\n            grid.addDependantAtNewRow(dependantsOfLayer[index]);\n            dependantsOfLayer.splice(index, 1);\n            return true;\n          } else if (grid.dependantFitsAtCurrentPos(dependantsOfLayer[index])) {\n            grid.addDependantAtCurrentPos(dependantsOfLayer[index]);\n            dependantsOfLayer.splice(index, 1);\n            return true;\n          } else return false;\n        };\n\n      _.each(layer.dependants, function(dependant) {\n        totalWidth += dependant.width;\n        totalHeight += dependant.height;\n        maxHeight = (dependant.height > maxHeight) ? dependant.height : maxHeight;\n        maxWidth = (dependant.width > maxWidth) ? dependant.width : maxWidth;\n        dependantsArray.push(dependant);\n      });\n\n      if ((totalWidth / 2) >= maxWidth) {\n        if (totalHeight > totalWidth) {\n          if (totalHeight / 2 < layer.dependants.length) width = Math.ceil(totalWidth / 2);\n          else width = totalWidth;\n        } else width = Math.ceil(totalWidth / 2);\n      } else width = maxWidth;\n\n      width = (helpers.maxUnityWidth < width) ? helpers.maxUnityWidth : width;\n\n      grid = new helpers.Grid(width);\n\n      dependantsShouldBeSorted = helpers.dependantsOfLayerShouldBeSorted(dependantsArray);\n      if (dependantsShouldBeSorted) {\n        dependantsOfLayer = dependantsArray.sort(function(dependantA, dependantB) {\n          if (dependantA.width === dependantB.width) {\n            return dependantA.height < dependantB.height;\n          } else return dependantA.width < dependantB.width;\n        });\n      } else dependantsOfLayer = dependantsArray;\n      addedDependantToGrid(0);\n      dependantsOfLayerIndex = 0;\n      while (dependantsOfLayer.length > 0 && whileCounter < 1000) {\n        if (addedDependantToGrid(dependantsOfLayerIndex)) {\n          dependantsOfLayerIndex = 0;\n        } else {\n          if (dependantsShouldBeSorted) {\n            dependantsOfLayerIndex++;\n            if (dependantsOfLayerIndex === dependantsOfLayer.length) {\n              dependantsOfLayerIndex = 0;\n              grid.movePositionToNextRow();\n            }\n          } else {\n            grid.movePositionToNextRow();\n          }\n        }\n        whileCounter++;\n      }\n\n      gridSize = grid.getSize();\n      // This two values only persist if the layer is a top one\n      layer.x = 0;\n      layer.y = 0;\n      layer.width = gridSize.width;\n      layer.height = (layer.dependants.length > 0) ? gridSize.height + 1 : gridSize.height;\n    },\n\n    generateLayersData: function(layers, currentDepth) {\n      var config = helpers.config,\n        maxDepth, dependantsDepth;\n\n      currentDepth = currentDepth || 1;\n      maxDepth = currentDepth;\n      _.each(layers, function(layer, layerIndex) {\n        if (layer.showNumbersAll === true) config.showNumbersAll = true;\n        layer.depth = currentDepth;\n        helpers.handleConnectedToNextCaseIfNecessary(layers, layerIndex);\n        if (layer.dependants.length > 0) {\n          dependantsDepth = helpers.generateLayersData(layer.dependants, (currentDepth + 1));\n          layer.maxLayerDepthBelow = dependantsDepth - currentDepth;\n          helpers.calculateLayerWithChildrenDimensions(layer);\n          maxDepth = (maxDepth < dependantsDepth) ? dependantsDepth : maxDepth;\n        } else {\n          layer.maxLayerDepthBelow = 0;\n          layer.width = 1;\n          layer.height = 1;\n          maxDepth = (maxDepth < dependantsDepth) ? dependantsDepth : maxDepth;\n        }\n        layer.alreadyConnections = [];\n      });\n\n      return maxDepth;\n    },\n\n    getFinalLayerDimensions: function(layer) {\n      var config = helpers.config,\n        height = layer.height * config.heightSize - config.depthHeightFactor * layer.depth * 2,\n        width = layer.width * config.widthSize - config.depthWidthFactor * layer.depth * 2,\n        transform = 'translate(' + config.depthWidthFactor * layer.depth + ',' + config.depthHeightFactor * layer.depth + ')',\n        fill = 'url(#color-' + String(layer.depth - 1) + ')',\n        dimensions = {\n          height: height,\n          width: width,\n          transform: transform,\n          fill: fill\n        };\n      if (config.showNumbersAll === true || (layer.containerData && layer.containerData.showNumbers === true)) {\n        dimensions.numberTransform = 'translate(' + String(width - 15 + config.depthWidthFactor * layer.depth) + ',' + String(config.depthHeightFactor * layer.depth + height + 0) + ')';\n      }\n\n      return dimensions;\n    },\n\n    addConvertToBoxButton: function(origConf) {\n      var body = d3.select('body');\n\n      body.insert('div', 'svg').append('input').attr({\n        type: 'button',\n        'class': 'conversion-button',\n        value: 'Convert to box diagram',\n        onclick: 'diagrams.layer.convertToBoxWrapper()'\n      });\n\n      // Refactor this\n      diagrams.layer.convertToBoxWrapper = function() {\n        helpers.convertToBox(origConf);\n      };\n    },\n\n    convertToBox: function(origConf) {\n      var convertDataToBox = function(items) {\n          var texts;\n          _.each(items, function(item, index) {\n            texts = item.text.split(': ');\n            item.text = texts[0];\n            if (texts.length > 1) item.description = texts[1];\n\n            if (item.dependants && item.dependants.length > 0) {\n              item.type = 'container';\n              convertDataToBox(item.dependants);\n            } else {\n              if (_.isString(item.description) === false) items[index] = item.text;\n              else {\n                item.type = 'definition';\n                item.dependants = null;\n              }\n            }\n          });\n        },\n        createBox = function() {\n          var svg = d3.select('svg'),\n            input = d3.select('input');\n\n          svg.remove();\n          input.remove();\n          d.box(boxData);\n        },\n        boxData;\n\n      if (_.isArray(origConf)) origConf = origConf[0];\n      boxData = {\n        name: origConf.text,\n        body: origConf.dependants\n      };\n\n      convertDataToBox(boxData.body);\n      createBox();\n    },\n\n    newLayer: function(text, opts, items) {\n      var layer = {\n        text: text\n      };\n\n      if (_.isArray(opts)) items = opts;\n      else {\n        if (_.isString(opts)) opts = helpers.extendOpts(opts);\n        if (_.isObject(opts)) layer = _.extend(layer, opts);\n      }\n\n      if (items) layer.dependants = items;\n      if (_.isUndefined(layer.id)) layer.id = 'layer-' + (++helpers.ids) + '-auto'; // Have to limit the id by the two sides to enable .indexOf to work\n\n      return layer;\n    },\n\n    newLayerConnectedToNext: function() {\n      var args = arguments.length;\n\n      if (args === 1) return helpers.newLayer(arguments[0], 'cn');\n      else if (args === 2) {\n        if (typeof(arguments[1]) === 'object') return helpers.newLayer(arguments[0], 'cn', arguments[1]);\n        else if (typeof(arguments[1] === 'string')) return helpers.newLayer(arguments[0], arguments[1] + ' cn');\n      } else if (args === 3) return helpers.newLayer(arguments[0], arguments[1] + ' cn', arguments[2]);\n    },\n\n    staticOptsLetters: {\n      co: {\n        conditional: true\n      },\n      cn: {\n        connectedWithNext: true\n      },\n      sna: {\n        showNumbersAll: true\n      },\n      sn: {\n        showNumbers: true\n      },\n      cnd: {\n        connectedWithNext: {\n          type: 'dashed'\n        }\n      },\n      nr: {\n        inNewRow: true\n      }\n    },\n\n    idOpt: function(id) {\n      return {\n        id: 'layer-' + id + '-custom'\n      };\n    },\n\n    extendOpts: function() {\n      var result = {};\n\n      _.each(arguments, function(arg) {\n        if (typeof(arg) === 'string') {\n          _.each(arg.split(' '), function(opt) {\n            if (opt.substr(0, 3) === 'id-') result = _.extend(result, helpers.idOpt(opt.substr(3, opt.length)));\n            else if (opt.substr(0, 3) === 'ct-') helpers.connectWithOpt(Number(opt.substr(3, opt.length)), result);\n            else if (opt.substr(0, 4) === 'ctd-') helpers.connectWithOpt(Number(opt.substr(4, opt.length)), result, 'dashed');\n            else result = _.extend(result, helpers.staticOptsLetters[opt]);\n          });\n        } else if (_.isObject(arg)) {\n          result = _.extend(result, arg);\n        }\n      });\n\n      return result;\n    },\n\n    connectWithOpt: function(ids, result, type) {\n      var objs = [];\n      if (_.isNumber(ids)) ids = [ids];\n      type = type || 'standard';\n\n      _.each(ids, function(id) {\n        objs.push({\n          id: 'layer-' + id + '-custom',\n          type: type\n        });\n      });\n\n      if (_.isUndefined(result.connectedTo) === true) result.connectedTo = objs;\n      else result.connectedTo = result.connectedTo.concat(objs);\n    },\n\n    connectWithOptAndIdOpt: function(ids, id) {\n      var connectWithOpt = diagrams.layer.connectWithOpt(ids),\n        idOpt = diagrams.layer.idOpt(id);\n\n      return _.extend(connectWithOpt, idOpt);\n    }\n  },\n  Layer;\n\n_.each([\n  'newLayer',\n  'newLayerConnectedToNext'\n], function(helpersMethod) {\n  helpers[helpersMethod + 'WithCode'] = function(codeLanguage) {\n    var codeFn = diagrams.utils.codeBlockOfLanguageFn(codeLanguage);\n    return function() {\n      var args = arguments;\n      args[0] = codeFn(args[0]);\n      return helpers[helpersMethod].apply(this, args);\n    };\n  };\n\n  helpers[helpersMethod + 'WithParagraphAndCode'] = function(codeLanguage) {\n    var codeFn = diagrams.utils.codeBlockOfLanguageFn(codeLanguage);\n    return function() {\n      var args = [].splice.call(arguments, 0),\n        paragraphText = args[0],\n        code = args[1],\n        text = d.utils.wrapInParagraph(paragraphText) + codeFn(code);\n\n      args = args.splice(2);\n      args.unshift(text);\n      return helpers[helpersMethod].apply(this, args);\n    };\n  };\n});\n\nLayer = class Layer extends d.Diagram {\n  create(conf) {\n    var diagram = this,\n      origConf = _.cloneDeep(conf),\n      config = helpers.config,\n      colors = ['#ECD078', '#D95B43', '#C02942', '#78E4B7', '#53777A', '#00A8C6', '#AEE239', '#FAAE8A'],\n      addDependantsPropToBottomDependants = function(layers) {\n        _.each(layers, function(layer) {\n          if (layer.hasOwnProperty('dependants') === false) {\n            layer.dependants = [];\n          } else addDependantsPropToBottomDependants(layer.dependants);\n        });\n      },\n      calculateTheMostOptimalConnection = function(layerA, layerBObj) {\n        // There are 12 possible: 4 sides to 3 each\n        var getTopSidePos = function(layer) {\n            return {\n              x: (layer.x + layer.width / 2) * config.widthSize + config.depthWidthFactor * layer.depth,\n              y: layer.y * config.heightSize + config.depthHeightFactor * layer.depth\n            };\n          },\n          getBottomSidePos = function(layer) {\n            return {\n              x: (layer.x + layer.width / 2) * config.widthSize + config.depthWidthFactor * layer.depth,\n              y: (layer.y + layer.height) * config.heightSize - config.depthHeightFactor * layer.depth\n            };\n          },\n          getLeftSidePos = function(layer) {\n            return {\n              x: layer.x * config.widthSize + config.depthWidthFactor * layer.depth,\n              y: (layer.y + layer.height / 2) * config.heightSize + config.depthHeightFactor * layer.depth\n            };\n          },\n          getRightSidePos = function(layer) {\n            return {\n              x: (layer.x + layer.width) * config.widthSize - config.depthWidthFactor * layer.depth,\n              y: (layer.y + layer.height / 2) * config.heightSize + config.depthHeightFactor * layer.depth\n            };\n          },\n          getSidesPos = function(layer) {\n            return {\n              top: getTopSidePos(layer),\n              bottom: getBottomSidePos(layer),\n              left: getLeftSidePos(layer),\n              right: getRightSidePos(layer)\n            };\n          },\n          distance = {\n            val: Infinity\n          },\n          doesNotCrossAnyOfTwoLayers = function(posA, posB, sideA, sideB) {\n            if ((sideA === 'bottom' || sideA === 'left' || sideA === 'top') && sideB === 'right') {\n              if (posA.x < posB.x) return false;\n            } else if ((sideA === 'bottom' || sideA === 'right' || sideA === 'top') && sideB === 'left') {\n              if (posA.x > posB.x) return false;\n            } else if ((sideA === 'bottom' || sideA === 'right' || sideA === 'left') && sideB === 'top') {\n              if (posA.y > posB.y) return false;\n            } else if ((sideA === 'left' || sideA === 'right' || sideA === 'top') && sideB === 'bottom') {\n              if (posA.y < posB.y) return false;\n            }\n            return true;\n          },\n          calcDistanceAndUpdate = function(posA, posB) {\n            var e2 = function(num) {\n                return Math.pow(num, 2);\n              },\n              newDistance = Math.sqrt(e2(posA.x - posB.x) + e2(posA.y - posB.y));\n            if (newDistance < distance.val) {\n              distance.val = newDistance;\n              distance.from = posA;\n              distance.to = posB;\n              return true;\n            } else return false;\n          },\n          eachSide = function(cb) {\n            _.each(['top', 'bottom', 'left', 'right'], function(side) {\n              cb(side);\n            });\n          },\n          sameTypeOfSides = function(sideA, sideB) {\n            var result = false;\n            _.each([\n              [sideA, sideB],\n              [sideB, sideA]\n            ], function(sides) {\n              if (sides[0] === 'top' && sides[1] === 'bottom') result = true;\n              else if (sides[0] === 'left' && sides[1] === 'right') result = true;\n            });\n            return result;\n          },\n          loopSidesToGetConnection = function(sameTypeOfSidesCondition) {\n            eachSide(function(sideA) {\n              eachSide(function(sideB) {\n                if (_.isUndefined(layerB.alreadyConnections)) layerB.alreadyConnections = [];\n                if (sideA !== sideB && layerA.alreadyConnections.indexOf(sideA) < 0 && layerB.alreadyConnections.indexOf(sideB) < 0) {\n                  if ((sameTypeOfSidesCondition === false && sameTypeOfSides(sideA, sideB) === false) || sameTypeOfSides(sideA, sideB)) {\n                    if (doesNotCrossAnyOfTwoLayers(layerAPos[sideA], layerBPos[sideB], sideA, sideB)) {\n                      changed = calcDistanceAndUpdate(layerAPos[sideA], layerBPos[sideB]);\n                      if (changed === true) {\n                        distance.sideA = sideA;\n                        distance.sideB = sideB;\n                      }\n                    }\n                  }\n                }\n              });\n            });\n          },\n          layerB = layerBObj.layer,\n          layerAPos = getSidesPos(layerA),\n          layerBPos = getSidesPos(layerB),\n          changed;\n\n\n        loopSidesToGetConnection(true);\n        if (changed !== true) loopSidesToGetConnection(false);\n\n        layerA.alreadyConnections.push(distance.sideA);\n        layerB.alreadyConnections.push(distance.sideB);\n        return distance;\n\n      },\n      drawConnection = function(connection) {\n        var container = connection.layer.container,\n          containerData = connection.layer.containerData,\n          connectionG, connectionId, connectionCoords, linkLine, connectionPath;\n\n        _.each(connection.connectedTo, function(connectedToLayer) {\n          connectionCoords = calculateTheMostOptimalConnection(connection.layer, connectedToLayer);\n\n          linkLine = d3.svg.line().x(dTextFn('x')).y(dTextFn('y'));\n          connectionId = connection.layer.id + '-' + connectedToLayer.layer.id;\n          connectionG = container.append('g').attr('id', connectionId);\n          if (connectionCoords.from && connectionCoords.to) {\n            connectionPath = connectionG.append('path')\n              .attr('d', linkLine([connectionCoords.from, connectionCoords.to])).style({\n                stroke: '#000',\n                fill: 'none'\n              });\n\n            if (connectedToLayer.type === 'dashed') connectionPath.style('stroke-dasharray', '5, 5');\n\n            connectionG.append(\"circle\").attr({\n              cx: connectionCoords.to.x,\n              cy: connectionCoords.to.y,\n              r: 5,\n              fill: colors[connection.layer.depth - 1]\n            }).style({\n              stroke: '#000'\n            });\n\n            containerData.connections = containerData.connections || [];\n            containerData.connections.push({\n              el: connectionG,\n              id: connectionId\n            });\n          }\n        });\n      },\n      drawConnectionsIfAny = function(layers) {\n        layers = layers || conf;\n\n        _.chain(layers).filter(function(layer) {\n          return layer.hasOwnProperty('connectedTo');\n        }).map(function(layer) {\n          var layersConnectedTo = [],\n            layerConnectedObj, layerConnectedId, layerConnectedType;\n          _.each(layer.connectedTo, function(layerConnected) {\n            layerConnectedId = _.isObject(layerConnected) ? layerConnected.id : layerConnected;\n            layerConnectedType = _.isObject(layerConnected) && layerConnected.type ? layerConnected.type : 'standard';\n\n            layerConnectedObj = _.where(layers, {\n              id: layerConnectedId\n            })[0];\n\n            layersConnectedTo.push({\n              layer: layerConnectedObj,\n              type: layerConnectedType\n            });\n          });\n          return {\n            layer: layer,\n            connectedTo: layersConnectedTo\n          };\n        }).each(function(connection) {\n          drawConnection(connection);\n        }).value();\n\n        _.chain(layers).filter(function(layer) {\n          return layer.dependants.length > 0;\n        }).each(function(layer) {\n          drawConnectionsIfAny(layer.dependants);\n        }).value();\n      },\n      updateSvgHeight = function() {\n        var getBottomPointOfLayer = function(layer) {\n            return layer.y + layer.height;\n          },\n          bottomLayer = _.max(conf, getBottomPointOfLayer),\n          bottomPoint = getBottomPointOfLayer(bottomLayer),\n          bottomPointPxs = bottomPoint * config.heightSize + 20;\n\n        svg.attr('height', bottomPointPxs);\n      },\n      calcMaxUnityWidth = function() {\n        var bodyWidth = document.body.getBoundingClientRect().width;\n\n        helpers.maxUnityWidth = Math.floor(bodyWidth / config.widthSize);\n      },\n      showAllLayerContainerConnections = function(childLayer) {\n        if (childLayer.containerData) {\n          var connections = childLayer.containerData.connections;\n          if (connections) {\n            _.each(connections, function(connection) {\n              connection.el.style('opacity', 1);\n            });\n          }\n        }\n      },\n      hideAllLayerContainerConnectionsExceptOfLayer = function(childLayer) {\n        if (childLayer.containerData) {\n          var connections = childLayer.containerData.connections;\n          if (connections) {\n            _.each(connections, function(connection) {\n              if (connection.id.indexOf(childLayer.id) === -1) connection.el.style('opacity', 0.2);\n            });\n          }\n        }\n      },\n      formatLayerTextIfNecessary = function(text) {\n        text = text.replace(/<p>/g, '');\n        text = text.replace(/<\\/p>/g, '. ');\n        text = d.utils.replaceCodeFragmentOfText(text, function(matchStr, language, codeBlock) {\n          if (matchStr === text && /\\n/.test(matchStr) === false) return codeBlock;\n          else return '<CODE...>';\n        });\n        return text;\n      },\n      drawLayersInContainer = function(layers, container, containerData) {\n        var widthSize = config.widthSize,\n          heightSize = config.heightSize,\n          layerG, layerNode, layerDims, layerText,\n          setLayerMouseListeners;\n\n        layers = layers || conf;\n        container = container || svg;\n\n        _.each(layers, function(layer, layerIndex) {\n          setLayerMouseListeners = function(el) {\n            el.on('mouseenter', function() {\n              d.tooltip.onMouseEnterListenerFn(currentLayerId, layer.text);\n              hideAllLayerContainerConnectionsExceptOfLayer(layer);\n            });\n            el.on('mouseleave', function() {\n              d.tooltip.onMouseLeaveListenerFn();\n              showAllLayerContainerConnections(layer);\n            });\n          };\n\n          var currentLayerId = 'diagrams-layer-g-' + layerGId++,\n            numberG;\n\n          layerG = container.append('g').attr({\n            transform: 'translate(' + String(layer.x * widthSize) + ', ' + layer.y * heightSize + ')',\n            'class': 'layer-node',\n            id: currentLayerId\n          });\n\n          layer.layerG = layerG;\n          layer.container = container;\n          layer.containerData = containerData;\n\n          layerDims = helpers.getFinalLayerDimensions(layer);\n          layerNode = layerG.append('g');\n          if (layer.conditional === true) {\n            layerNode.append('path').attr({\n              d: d.shapes.hexagon({\n                height: layerDims.height,\n                width: layerDims.width,\n                widthPercent: 97 + Math.abs(3 - layer.depth)\n              }),\n              transform: layerDims.transform,\n              fill: layerDims.fill,\n              stroke: '#f00'\n            });\n          } else {\n            layerNode.append('rect').attr({\n              width: layerDims.width,\n              transform: layerDims.transform,\n              height: layerDims.height,\n              fill: layerDims.fill\n            }).style({\n              filter: 'url(#diagrams-drop-shadow-layer)'\n            });\n          }\n\n\n          layerText = layerNode.append('text').attr({\n            transform: layerDims.transform,\n            x: layer.depth,\n            y: layer.height * heightSize - 3 * layer.depth - 10\n          }).text(function() {\n            return formatLayerTextIfNecessary(layer.text);\n          });\n\n          setLayerMouseListeners(layerText);\n          setLayerMouseListeners(layerNode);\n\n          layerText.each(d.svg.textEllipsis(layer.width * widthSize - config.depthWidthFactor * layer.depth * 2));\n\n          diagram.handleItemClick(layerG, {\n            text: layer.text\n          });\n\n          if (layerDims.numberTransform) {\n            numberG = layerNode.append('g').attr({\n              'class': 'number',\n              transform: layerDims.numberTransform\n            });\n            numberG.append('circle').attr({\n              r: 10,\n              cx: 4,\n              cy: -4,\n              fill: colors[layer.depth - 1],\n              'stroke-width': 2,\n              stroke: '#000',\n              filert: 'none'\n            });\n            numberG.append('text').text(layerIndex + 1)\n              .attr('fill', '#000');\n          }\n\n          if (layer.dependants.length > 0) {\n            drawLayersInContainer(layer.dependants, layerG, layer);\n          }\n        });\n      },\n      svg = d.svg.generateSvg({\n        margin: '20px 0 0 20px'\n      });\n\n    _.each(colors, function(color, index) {\n      d.svg.addVerticalGradientFilter(svg, 'color-' + index, ['#fff', color]);\n    });\n    svg.attr('class', 'layers-diagram');\n\n    if (_.isArray(conf) === false) conf = [conf];\n    d.svg.addFilterColor('layer', svg, 3, 2);\n    addDependantsPropToBottomDependants(conf);\n    calcMaxUnityWidth();\n    helpers.generateLayersData(conf);\n    drawLayersInContainer();\n    drawConnectionsIfAny();\n    updateSvgHeight();\n    helpers.addConvertToBoxButton(origConf);\n  }\n};\n\nnew Layer({\n  name: 'layer',\n  helpers: helpers\n});\n})();(function(){  })();\n\n  scope.diagrams = diagrams;\n})(window);"]}