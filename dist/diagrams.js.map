{"version":3,"sources":["dist/diagrams.js"],"names":[],"mappings":";;;;;;;;;;AAAA,CAAC,UAAS,KAAK,EAAE;AACf,MAAI,QAAQ,GAAG,EAAE;MACf,CAAC,GAAG,QAAQ,CAAC;;AAEf,GAAC,YAAW,EAAE,CAAA,EAAG,CAAC,CAAC,YAAU;;;;AAG/B,KAAC,CAAC,KAAK,GAAG,EAAE,CAAC;AACb,KAAC,CAAC,KAAK,CAAC,iBAAiB,GAAG,UAAS,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE;AAC3D,WAAK,GAAG,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACzB,aAAO,UAAS,CAAC,EAAE;AACjB,YAAI,QAAQ,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,UAAS,IAAI,EAAE,QAAQ,EAAE;AACtD,iBAAO,IAAI,CAAC,QAAQ,CAAC,CAAC;SACvB,EAAE,CAAC,CAAC,CAAC;AACN,eAAO,AAAC,OAAO,IAAI,MAAM,GAAI,OAAO,GAAG,QAAQ,GAAG,MAAM,GAAG,QAAQ,CAAC;OACrE,CAAC;KACH,CAAC;AACF,KAAC,CAAC,KAAK,CAAC,oBAAoB,GAAG,UAAS,EAAE,EAAE;AAC1C,QAAE,CAAC,IAAI,CAAC,WAAW,EAAE,UAAS,CAAC,EAAE;AAC/B,eAAO,YAAY,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;OAC7C,CAAC,CAAC;KACJ,CAAC;AACF,KAAC,CAAC,KAAK,CAAC,UAAU,GAAG,UAAS,KAAK,EAAE,MAAM,EAAE;AAC3C,YAAM,GAAG,MAAM,IAAI,CAAC,CAAC;AACrB,aAAO,CAAC,CAAC,KAAK,CAAC,iBAAiB,CAAC,KAAK,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;KACpD,CAAC;AACF,KAAC,CAAC,KAAK,CAAC,MAAM,GAAG,UAAS,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE;AAChD,aAAO,GAAG,OAAO,IAAI,EAAE,CAAC;AACxB,YAAM,GAAG,MAAM,IAAI,EAAE,CAAC;AACtB,aAAO,CAAC,CAAC,KAAK,CAAC,iBAAiB,CAAC,KAAK,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;KAC1D,CAAC;AACF,KAAC,CAAC,KAAK,CAAC,UAAU,GAAG,UAAS,EAAE,EAAE;AAChC,UAAI,QAAQ,CAAC,UAAU,KAAK,UAAU,EAAE,EAAE,EAAE,CAAC,KACxC,MAAM,CAAC,MAAM,GAAG,EAAE,CAAC;KACzB,CAAC;AACF,KAAC,CAAC,KAAK,CAAC,yBAAyB,GAAG,UAAS,IAAI,EAAE,SAAS,EAAE;AAC5D,UAAI,SAAS,GAAG,6BAA6B;UAC3C,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;;AAErC,aAAO,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,UAAS,QAAQ,EAAE,QAAQ,EAAE,SAAS,EAAE;AACrE,eAAO,SAAS,CAAC,QAAQ,EAAE,QAAQ,EAAE,SAAS,EAAE,UAAU,CAAC,CAAC;OAC7D,CAAC,CAAC;KACJ,CAAC;AACF,KAAC,CAAC,KAAK,CAAC,kBAAkB,GAAG,UAAS,IAAI,EAAE;AAC1C,UAAI,YAAY,GAAG,CAAC,QAAQ,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,CAAC;UAC7D,kBAAkB,GAAG,SAArB,kBAAkB,CAAY,MAAM,EAAE,GAAG,EAAE;AACzC,YAAI,4BAA4B,GAAG,CAAC,CAAC,OAAO,CAAC,kBAAkB,EAAE,MAAM,CAAC;YACtE,eAAe,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,QAAQ,EAAE,GAAG,GAAG,GAAG,GAAG,KAAK,EAAE,GAAG,GAAG,mBAAmB,GAAG,GAAG,GAAG,QAAQ,EAAE,GAAG,GAAG,gBAAgB,GAAG,GAAG,GAAG,QAAQ,CAAC;YAChJ,aAAa,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG;YAChC,aAAa,GAAG,GAAG,GAAG,qBAAqB;YAC3C,YAAY,GAAG,CAAC,aAAa,EAAE,aAAa,EAAE,aAAa,EAAE,aAAa,CAAC;YAC3E,WAAW,GAAG,SAAd,WAAW,CAAY,IAAI,EAAE,EAAE,EAAE;AAC/B,cAAI,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC;SAChD,CAAC;;AAEJ,YAAI,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,4BAA4B,CAAC,CAAC,KACzD;AACH,WAAC,CAAC,IAAI,CAAC,CAAC,eAAe,EAAE,YAAY,CAAC,EAAE,UAAS,GAAG,EAAE;AACpD,gBAAI,MAAM,KAAK,QAAQ,EAAE,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,KAChD,IAAI,MAAM,KAAK,QAAQ,EAAE,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;WAC3D,CAAC,CAAC;SACJ;OACF,CAAC;AACJ,UAAI,GAAG,CAAC,CAAC,KAAK,CAAC,yBAAyB,CAAC,IAAI,EAAE,UAAS,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,UAAU,EAAE;AAC5F,YAAI,SAAS,GAAI,QAAQ,KAAK,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,AAAC,CAAC;AAClD,eAAO,MAAM,IAAI,SAAS,GAAG,2BAA2B,GAAG,EAAE,CAAA,AAAC,GAAG,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,eAAe,CAAC;OACrI,CAAC,CAAC;;AAEH,wBAAkB,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;AAC3C,UAAI,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;AACxD,wBAAkB,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;;AAE3C,aAAO,IAAI,CAAC;KACb,CAAC;AACF,KAAC,CAAC,KAAK,CAAC,qBAAqB,GAAG,UAAS,QAAQ,EAAE,cAAc,EAAE;AACjE,oBAAc,GAAG,cAAc,IAAI,EAAE,CAAC;AACtC,aAAO,UAAS,SAAS,EAAE,KAAK,EAAE,cAAc,EAAE;AAChD,YAAI,cAAc,KAAK,IAAI,EAAE,SAAS,GAAG,cAAc,GAAG,QAAQ,GAAG,SAAS,GAAG,IAAI,GAAG,cAAc,GAAG,MAAM,CAAC;AAChH,YAAI,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,SAAS,GAAG,cAAc,GAAG,IAAI,GAAG,KAAK,GAAG,IAAI,GAAG,SAAS,CAAC;AACpF,eAAO,IAAI,GAAG,QAAQ,GAAG,IAAI,GAAG,SAAS,GAAG,IAAI,CAAC;OAClD,CAAC;KACH,CAAC;;AAEF,KAAC,CAAC,KAAK,CAAC,eAAe,GAAG,UAAS,IAAI,EAAE;AACvC,aAAO,KAAK,GAAG,IAAI,GAAG,MAAM,CAAC;KAC9B,CAAC;;AAEF,KAAC,CAAC,KAAK,CAAC,uBAAuB,GAAG,UAAS,WAAW,EAAE;AACtD,UAAI,SAAS,GAAG,EAAE;UAChB,UAAU,GAAG,SAAb,UAAU,CAAY,IAAI,EAAE;AAC1B,eAAO,GAAG,GAAG,IAAI,CAAC;OACnB,CAAC;;AAEJ,iBAAW,CAAC,SAAS,CAAC,IAAI,GAAG,UAAS,IAAI,EAAE,IAAI,EAAE;AAChD,YAAI,MAAM,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC;AAC9B,iBAAS,CAAC,MAAM,CAAC,KAAK,SAAS,CAAC,MAAM,CAAC,GAAG,IAAI,EAAE,CAAC,OAAO,EAAE,CAAA,AAAC,CAAC;AAC5D,iBAAS,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;OAChC,CAAC;;AAEF,iBAAW,CAAC,SAAS,CAAC,MAAM,GAAG,UAAS,IAAI,EAAE,OAAO,EAAE;AACrD,YAAI,MAAM,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC;AAC9B,iBAAS,CAAC,MAAM,CAAC,KAAK,SAAS,CAAC,MAAM,CAAC,GAAG,IAAI,EAAE,CAAC,OAAO,EAAE,CAAA,AAAC,CAAC;AAC5D,eAAO,SAAS,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;OAC7C,CAAC;;AAEF,iBAAW,CAAC,SAAS,CAAC,OAAO,GAAG,YAAW;AACzC,YAAI,QAAQ,GAAG,SAAS,CAAC;AACzB,aAAK,IAAI,IAAI,IAAI,QAAQ,EAAE;AACzB,cAAI,CAAA,GAAE,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,EAAE;AAC1C,oBAAQ,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,CAAC;WAC1B;SACF;;AAED,iBAAS,GAAG,EAAE,CAAC;OAChB,CAAC;KACH,CAAC;;AAEF,KAAC,CAAC,KAAK,CAAC,oBAAoB,GAAG,YAAW;AACxC,UAAI,WAAW,GAAG,SAAS,YAAY,GAAG,EAAE,CAAC;;AAE7C,OAAC,CAAC,KAAK,CAAC,uBAAuB,CAAC,WAAW,CAAC,CAAC;;AAE7C,aAAO,IAAI,WAAW,EAAE,CAAC;KAC1B,CAAC;;AAEF,KAAC,CAAC,KAAK,CAAC,2BAA2B,GAAG,UAAS,IAAI,EAAE,WAAW,EAAE;AAChE,aAAO,UAAU,GAAG,IAAI,GAAG,WAAW,IAAI,WAAW,GAAG,MAAM,GAAG,WAAW,GAAG,EAAE,CAAA,AAAC,CAAC;KACpF,CAAC;;AAEF,KAAC,CAAC,KAAK,CAAC,sBAAsB,GAAG,UAAS,IAAI,EAAE;AAC9C,UAAI,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;AAChC,UAAI,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;AAClC,UAAI,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;AACpC,UAAI,GAAG,CAAC,CAAC,KAAK,CAAC,yBAAyB,CAAC,IAAI,EAAE,UAAS,QAAQ,EAAE,QAAQ,EAAE,SAAS,EAAE;AACrF,YAAI,QAAQ,KAAK,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,KAAK,EAAE,OAAO,SAAS,CAAC,KACpE,OAAO,YAAY,CAAC;OAC1B,CAAC,CAAC;AACH,aAAO,IAAI,CAAC;KACb,CAAC;;AAEF,KAAC,CAAC,KAAK,CAAC,8CAA8C,GAAG,UAAS,WAAW,EAAE;;AAE7E,UAAI,kBAAkB,GAAG,KAAK;UAC5B,iBAAiB,GAAG,EAAE;UACtB,SAAS,GAAG,EAAE;UACd,gBAAgB,GAAG,SAAnB,gBAAgB,GAAc;AAC5B,YAAI,YAAY;YACd,0BAA0B,GAAG,EAAE;YAC/B,cAAc,GAAG,SAAjB,cAAc,CAAY,IAAI,EAAE;AAC9B,cAAI,UAAU,EAAE,YAAY,EAAE,UAAU,CAAC;AACzC,cAAI,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE;AACnC,8BAAkB,GAAG,IAAI,CAAC;AAC1B,mBAAO;WACR,MAAM,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC/B,cAAI,CAAC,CAAC,WAAW,CAAC,0BAA0B,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,KAAK,EAAE;AAChE,sBAAU,GAAG,0BAA0B,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;WAClD,MAAM;AACL,sBAAU,GAAG,CAAC,CAAC,KAAK,CAAC,WAAW,CAAC,WAAW,EAAE;AAC5C,kBAAI,EAAE,IAAI,CAAC,EAAE;aACd,CAAC,CAAC;AACH,sCAA0B,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC;WAClD;;AAED,cAAI,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE;AAC3B,gBAAI,UAAU,EAAE;AACd,kBAAI,UAAU,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,EAAE,kBAAkB,GAAG,IAAI,CAAC;aAC1D,MAAM,UAAU,GAAG,IAAI,CAAC;WAC1B,MAAM,IAAI,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE;AAClC,wBAAY,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AAChC,gBAAI,CAAC,CAAC,WAAW,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC,KAAK,KAAK,EAAE;AAC5D,wBAAU,GAAG,iBAAiB,CAAC,YAAY,CAAC,CAAC;aAC9C,MAAM;AACL,wBAAU,GAAG,CAAC,CAAC,KAAK,CAAC,WAAW,CAAC,KAAK,EAAE;AACtC,kBAAE,EAAE,YAAY;eACjB,CAAC,CAAC,CAAC,CAAC,CAAC;AACN,+BAAiB,CAAC,YAAY,CAAC,GAAG,UAAU,CAAC;aAC9C;AACD,0BAAc,CAAC,UAAU,CAAC,CAAC;WAC5B,MAAM,kBAAkB,GAAG,IAAI,CAAC;SAClC,CAAC;;AAEJ,SAAC,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,UAAS,IAAI,EAAE;AACvC,cAAI,kBAAkB,KAAK,KAAK,EAAE;AAChC,wBAAY,GAAG,EAAE,CAAC;AAClB,6BAAiB,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;AAClC,0BAAc,CAAC,IAAI,CAAC,CAAC;WACtB;SACF,CAAC,CAAC;OACJ;UACD,yBAAyB,GAAG,SAA5B,yBAAyB,CAAY,eAAe,EAAE,IAAI,EAAE;AAC1D,YAAI,IAAI,EAAE,QAAQ,CAAC;;AAEnB,uBAAe,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;AAC7B,YAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AACjB,YAAI,IAAI,CAAC,WAAW,EAAE,IAAI,IAAI,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC;AACtD,uBAAe,CAAC,IAAI,GAAG,IAAI,CAAC;;AAE5B,gBAAQ,GAAG,CAAC,CAAC,KAAK,CAAC,WAAW,CAAC,WAAW,EAAE;AAC1C,YAAE,EAAE,IAAI,CAAC,EAAE;SACZ,CAAC,CAAC;AACH,YAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;AACvB,yBAAe,CAAC,KAAK,GAAG,EAAE,CAAC;AAC3B,WAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,UAAS,KAAK,EAAE;AAC/B,2BAAe,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;AAC/B,qCAAyB,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,EAAE,iBAAiB,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;WACzF,CAAC,CAAC;SACJ;OACF;UACD,UAAU,CAAC;;AAEb,sBAAgB,EAAE,CAAC;AACnB,UAAI,kBAAkB,EAAE;AACtB,aAAK,CAAC,qDAAqD,CAAC,CAAA;AAC5D,eAAO,EAAE,CAAC;OACX,MAAM;AACL,iCAAyB,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;AACjD,eAAO,SAAS,CAAC;OAClB;KACF,CAAC;GACD,CAAA,EAAG,CAAC,CAAC,YAAU;AAAC,QAAI,2BAA2B,GAAG,EAAE;QACnD,oBAAoB,GAAG,CAAC,CAAC;;AAE3B,KAAC,CAAC,gBAAgB,GAAG,EAAE,CAAC;;AAExB,KAAC,CAAC,OAAO;AA8CI,eA9CK,OAAO,CA8CX,IAAI,EAAE;8BA9CF,OAAO;;AA+CrB,YAAI,OAAO,GAAG,IAAI;YAChB,SAAS,GAAG,MAAM,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;;AAE7C,eAAO,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AACzB,eAAO,CAAC,cAAc,GAAG,OAAO,CAAC,aAAa,IAAI,EAAE,CAAC;;AAErD,SAAC,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,UAAS,UAAU,EAAE;AACrD,cAAI,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,EAAE;AAC1C,gBAAI,CAAC,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE,OAAO,CAAC,CAAC;WACtE;SACF,CAAC,CAAC;AACH,SAAC,CAAC,KAAK,CAAC,OAAO,CAAC,cAAc,EAAE,2BAA2B,CAAC,CAAC;AAC7D,SAAC,CAAC,QAAQ,CAAC,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;;AAEpC,eAAO,CAAC,QAAQ,EAAE,CAAC;OACpB;;mBA9De,OAAO;;eAgEF,+BAAC,EAAE,EAAE,IAAI,EAAE;AAC9B,cAAI,OAAO,GAAG,IAAI;cAChB,MAAM,GAAG,SAAT,MAAM,CAAY,OAAO,EAAE,WAAW,EAAE;AACtC,uBAAW,GAAG,WAAW,IAAI,OAAO,CAAC;AACrC,cAAE,CAAC,EAAE,CAAC,OAAO,EAAE,YAAW;AACxB,qBAAO,CAAC,IAAI,CAAC,WAAW,EAAE,WAAW,CAAC,CAAC;aACxC,CAAC,CAAC;WACJ;cACD,WAAW,GAAG;AACZ,cAAE,EAAE,EAAE;AACN,gBAAI,EAAE,IAAI;WACX,CAAC;;AAEJ,gBAAM,CAAC,YAAY,CAAC,CAAC;AACrB,gBAAM,CAAC,YAAY,CAAC,CAAC;AACrB,gBAAM,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;SAC9B;;;eAEK,gBAAC,IAAI,EAAE,QAAQ,EAAE;AACrB,cAAI,UAAU,GAAG,SAAS,CAAC,MAAM;cAC/B,QAAQ,GAAG,OAAO,IAAI,AAAC;cACvB,OAAO,CAAC;;AAEV,cAAI,UAAU,KAAK,CAAC,EAAE,OAAO,IAAI,CAAC,cAAc,CAAC,KAC5C,IAAI,UAAU,KAAK,CAAC,EAAE;AACzB,gBAAI,CAAC,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE,OAAO,GAAG,IAAI,EAAE,CAAC,KACxC,IAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,OAAO,GAAG,IAAI,CAAC,KACrC,IAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;AACzB,mBAAK,IAAI,GAAG,IAAI,IAAI,EAAE;AACpB,oBAAI,CAAC,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;eAC7B;AACD,qBAAO,IAAI,CAAC;aACb;AACD,mBAAO,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;WACrC,MAAM,IAAI,UAAU,KAAK,CAAC,EAAE;AAC3B,gBAAI,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,QAAQ,CAAC;AACrC,gBAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;AACvC,mBAAO,QAAQ,CAAC;WACjB;SACF;;;eAEyB,oCAAC,GAAG,EAAE,YAAY,EAAE;AAC5C,cAAI,OAAO,GAAG,IAAI;cAChB,UAAU,GAAG,OAAO,CAAC,mBAAmB,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC;;AAE9D,iBAAO,CAAC,MAAM,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;SACjC;;;eAE6B,wCAAC,WAAW,EAAE;AAC1C,iBAAO,aAAa,GAAG,WAAW,CAAC;SACpC;;;eAEkB,6BAAC,WAAW,EAAE,YAAY,EAAE;AAC7C,cAAI,OAAO,GAAG,IAAI;cAChB,UAAU,GAAG,YAAY,CAAC;;AAE5B,cAAI,YAAY,IAAI,YAAY,CAAC,OAAO,EAAE;AACxC,sBAAU,GAAG,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,8BAA8B,CAAC,WAAW,CAAC,CAAC,IAAI,YAAY,CAAC;AACvG,gBAAI,UAAU,KAAK,OAAO,EAAE,UAAU,GAAG,KAAK,CAAC,KAC1C,IAAI,UAAU,KAAK,MAAM,EAAE,UAAU,GAAG,IAAI,CAAC;WACnD;AACD,iBAAO,UAAU,CAAC;SACnB;;;eAEgB,2BAAC,WAAW,EAAE,KAAK,EAAE;AACpC,cAAI,OAAO,GAAG,IAAI,CAAC;AACnB,cAAI,YAAY,IAAI,YAAY,CAAC,OAAO,EAAE;AACxC,mBAAO,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,8BAA8B,CAAC,WAAW,CAAC,EAAE,KAAK,CAAC,CAAC;WACzF;SACF;;;eAEyB,oCAAC,IAAI,EAAE;AAC/B,cAAI,CAAC,aAAa,GAAG,EAAE,CAAC;AACxB,cAAI,CAAC,aAAa,CAAC,UAAU,GAAG,EAAE,CAAC;AACnC,cAAI,CAAC,aAAa,CAAC,YAAY,GAAG,EAAE,CAAC;SACtC;;;eAEuB,kCAAC,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE;AACvC,cAAI,CAAC,aAAa,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,CAAC;SACzE;;;eAEkB,6BAAC,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE;AAClC,cAAI,CAAC,aAAa,CAAC,IAAI,GAAG,IAAI,CAAC,oBAAoB,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;SAC/D;;;eAEwB,mCAAC,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE;AACxC,cAAI,CAAC,aAAa,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,CAAC;SAC3E;;;eAEmB,8BAAC,EAAE,EAAE,IAAI,EAAE;AAC7B,iBAAO;AACL,cAAE,EAAE,EAAE;AACN,gBAAI,EAAE,IAAI;WACX,CAAC;SACH;;;eAEuB,kCAAC,IAAI,EAAE,gBAAgB,EAAE;AAC/C,cAAI,OAAO,GAAG,IAAI;cAChB,YAAY,GAAG,EAAE;cACjB,WAAW,GAAG,SAAd,WAAW,CAAY,eAAe,EAAE,KAAK,EAAE;AAC7C,aAAC,CAAC,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,gBAAgB,CAAC,EAAE,UAAS,gBAAgB,EAAE;AACjF,kBAAI,KAAK,GAAG,GAAG,EAAE;AACf,oBAAI,YAAY,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,gBAAgB,CAAC,IAAI,KAAK,eAAe,EAAE;;AAC3F,8BAAY,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;AACpC,6BAAW,CAAC,gBAAgB,CAAC,IAAI,EAAE,KAAK,GAAG,CAAC,CAAC,CAAC;iBAC/C;eACF;aACF,CAAC,CAAC;WACJ;cACD,SAAS,CAAC;;AAEZ,cAAI,gBAAgB,EAAE;AACpB,uBAAW,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;AACrB,mBAAO,YAAY,CAAC;WACrB,MAAM;AACL,qBAAS,GAAG,EAAE,CAAC;AACf,aAAC,CAAC,IAAI,CAAC,CAAC,YAAY,EAAE,cAAc,CAAC,EAAE,UAAS,gBAAgB,EAAE;AAChE,uBAAS,CAAC,gBAAgB,CAAC,GAAG,OAAO,CAAC,wBAAwB,CAAC,IAAI,EAAE,gBAAgB,CAAC,CAAC;aACxF,CAAC,CAAC;AACH,mBAAO,SAAS,CAAC;WAClB;SACF;;;eAEe,0BAAC,IAAI,EAAE;AACrB,cAAI,OAAO,GAAG,IAAI;cAChB,cAAc;cACd,eAAe,CAAC;;AAElB,cAAI,OAAO,CAAC,aAAa,IAAI,IAAI,CAAC,aAAa,EAAE;AAC/C,0BAAc,GAAG,OAAO,CAAC,wBAAwB,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;AACtE,2BAAe,GAAG,OAAO,CAAC,wBAAwB,CAAC,IAAI,EAAE,cAAc,CAAC,CAAC;;AAEzE,aAAC,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,eAAe,CAAC,EAAE,UAAS,YAAY,EAAE;AAC/D,eAAC,CAAC,IAAI,CAAC,YAAY,EAAE,OAAO,CAAC,aAAa,CAAC,CAAC;aAC7C,CAAC,CAAC;;AAEH,mBAAO,CAAC,aAAa,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;WAChD;SACF;;;eAEO,oBAAG;AACT,cAAI,OAAO,GAAG,IAAI,CAAC;AACnB,WAAC,CAAC,YAAY,GAAG,CAAC,CAAC,YAAY,IAAI,EAAE,CAAC;AACtC,WAAC,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;AAClC,WAAC,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,YAAW;AAC3B,gBAAI,IAAI,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AACjD,aAAC,CAAC,KAAK,CAAC,UAAU,CAAC,YAAW;AAC5B,kCAAoB,EAAE,CAAC;AACvB,eAAC,CAAC,gBAAgB,CAAC,IAAI,CAAC;AACtB,uBAAO,EAAE,OAAO;AAChB,oBAAI,EAAE,IAAI;AACV,kBAAE,EAAE,oBAAoB;eACzB,CAAC,CAAC;AACH,qBAAO,CAAC,oBAAoB,CAAC,oBAAoB,CAAC,CAAC;AACnD,kBAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC;AACnC,qBAAO,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;AACpC,eAAC,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,EAAE,OAAO,CAAC,CAAC;aAC3C,CAAC,CAAC;WACJ,CAAC;;AAEF,WAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,MAAM,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC;SAC7D;;;eAEmB,8BAAC,EAAE,EAAE;AACvB,cAAI,OAAO,GAAG,IAAI;cAChB,GAAG,GAAG,CAAC,CAAC,OAAO,CAAC,eAAe,EAAE;cACjC,SAAS,CAAC;;AAEZ,WAAC,CAAC,IAAI,CAAC,CAAC,CAAC,YAAY,EAAE,UAAS,WAAW,EAAE;AAC3C,gBAAI,WAAW,KAAK,OAAO,CAAC,IAAI,EAAE;AAChC,uBAAS,GAAG,kCAAkC,GAAG,EAAE,GAAG,MAAM,GAAG,WAAW,GAAG,KAAK,CAAC;AACnF,iBAAG,CAAC,iBAAiB,CAAC,gCAAgC,EAAE,KAAK,GAAG,WAAW,GAAG,UAAU,EAAE,SAAS,CAAC,CAAC;aACtG;WACF,CAAC,CAAC;SACJ;;;eA7OoB,wBAAC,UAAU,EAAE,aAAa,EAAE;AAC/C,cAAI,IAAI,GAAG,CAAC,CAAC,OAAO,CAAC,6BAA6B,CAAC,UAAU,CAAC;cAC5D,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;cAC5B,WAAW;cAAE,YAAY,CAAC;;AAE5B,qBAAW,GAAG,IAAI,CAAC,OAAO,CAAC,yBAAyB,CAAC,KAAK,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;AACxE,sBAAY,GAAG,CAAC,CAAC,aAAa,CAAC,CAAC,yBAAyB,CAAC,KAAK,CAAC,EAAE,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC;;AAEnF,WAAC,CAAC,MAAM,CAAC,IAAI,CAAC,sBAAsB,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;;AAEpD,YAAE,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,MAAM,EAAE,CAAC;AAC1B,YAAE,CAAC,SAAS,CAAC,+BAA+B,CAAC,CAAC,MAAM,EAAE,CAAC;AACvD,WAAC,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,YAAY,CAAC,CAAC,CAAC;SACtD;;;eAEqB,2BAAG;AACvB,cAAI,IAAI,GAAG,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC;cAC1B,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;;AAElC,aAAG,CAAC,iBAAiB,GAAG,UAAS,GAAG,EAAE,KAAK,EAAE,SAAS,EAAE;AACtD,eAAG,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC;AACvB,kBAAI,EAAE,QAAQ;AACd,qBAAO,EAAE,GAAG,GAAG,0CAA0C;AACzD,mBAAK,EAAE,KAAK;AACZ,qBAAO,EAAE,SAAS;aACnB,CAAC,CAAC;WACJ,CAAC;;AAEF,iBAAO,GAAG,CAAC;SACZ;;;eAEmC,uCAAC,UAAU,EAAE;AAC/C,cAAI,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,gBAAgB,EAAE;AACtC,cAAE,EAAE,UAAU;WACf,CAAC,CAAC;;AAEH,iBAAO,AAAC,KAAK,CAAC,MAAM,KAAK,CAAC,GAAI,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;SAC/C;;;eAE2B,+BAAC,UAAU,EAAE;AACvC,cAAI,IAAI,GAAG,CAAC,CAAC,OAAO,CAAC,6BAA6B,CAAC,UAAU,CAAC,CAAC;;AAE/D,iBAAO,AAAC,IAAI,GAAI,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;SAClC;;;aA5Ce,OAAO;QA+OxB,CAAC;;AAEF,KAAC,CAAC,KAAK,CAAC,uBAAuB,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;GAC1C,CAAA,EAAG,CAAC,CAAC,YAAU;AAAC,KAAC,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,CAAC,oBAAoB,EAAE,CAAC;GAAC,CAAA,EAAG,CAAC,CAAC,YAAU;AAAC,KAAC,CAAC,MAAM,GAAG,EAAE,CAAC;AAC1F,KAAC,CAAC,MAAM,CAAC,OAAO,GAAG,UAAS,IAAI,EAAE;AAChC,UAAI,UAAU,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC;UAC9B,SAAS,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC;UAC1B,GAAG,GAAG,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,GAAI,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC,GAAI,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAA,GAAI,CAAC;UACvG,MAAM,GAAG,EAAE;UACX,MAAM;UAAE,EAAE;UAAE,EAAE,CAAC;;AAEjB,YAAM,GAAG,IAAI,CAAC,MAAM,IAAI,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;AAChD,QAAE,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;AACf,QAAE,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;;AAEf,YAAM,IAAI,GAAG,IAAI,EAAE,GAAG,SAAS,CAAA,AAAC,GAAG,GAAG,GAAG,EAAE,CAAC;AAC5C,YAAM,IAAI,GAAG,IAAI,EAAE,GAAG,SAAS,GAAG,GAAG,CAAA,AAAC,GAAG,GAAG,IAAI,EAAE,GAAG,UAAU,CAAA,AAAC,CAAC;AACjE,YAAM,IAAI,GAAG,IAAI,EAAE,GAAG,SAAS,GAAG,GAAG,CAAA,AAAC,GAAG,GAAG,IAAI,EAAE,GAAG,UAAU,CAAA,AAAC,CAAC;AACjE,YAAM,IAAI,GAAG,IAAI,EAAE,GAAG,SAAS,CAAA,AAAC,GAAG,GAAG,GAAG,EAAE,CAAC;AAC5C,YAAM,IAAI,GAAG,IAAI,EAAE,GAAG,SAAS,GAAG,GAAG,CAAA,AAAC,GAAG,GAAG,IAAI,EAAE,GAAG,UAAU,CAAA,AAAC,CAAC;AACjE,YAAM,IAAI,GAAG,IAAI,EAAE,GAAG,SAAS,GAAG,GAAG,CAAA,AAAC,GAAG,GAAG,IAAI,EAAE,GAAG,UAAU,CAAA,AAAC,CAAC;AACjE,YAAM,IAAI,GAAG,CAAC;;AAEd,aAAO,MAAM,CAAC;KACf,CAAC;GAAC,CAAA,EAAG,CAAC,CAAC,YAAU;AAAC,KAAC,CAAC,MAAM,GAAG;AAC5B,SAAG,EAAE,aAAS,GAAG,EAAE;AACjB,SAAC,CAAC,MAAM,CAAC,gCAAgC,CAAC,GAAG,CAAC,CAAC;AAC/C,eAAO,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;OACtB;AACD,SAAG,EAAE,aAAS,IAAI,EAAE;AAClB,SAAC,CAAC,MAAM,CAAC,gCAAgC,CAAC,IAAI,CAAC,CAAC;AAChD,SAAC,CAAC,MAAM,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;OACvC;AACD,8BAAwB,EAAE,oCAAW;AACnC,eAAO,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;OACzD;AACD,sCAAgC,EAAE,0CAAS,IAAI,EAAE;AAC/C,YAAI,IAAI,CAAC;AACT,YAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;AACpB,cAAI,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACzB,WAAC,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,gCAAgC,CAAC,CAAC;SACzD,MAAM,IAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;AAC3B,cAAI,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,MAAM,IAAI,KAAK,CAAC,oBAAoB,GAAG,IAAI,CAAC,CAAC;SAC9F;OACF;KACF,CAAC;;AAEF,QAAI,cAAc,GAAG,gBAAgB,CAAC;AACtC,KAAC,CAAC,MAAM,CAAC,cAAc,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;AACjD,KAAC,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;GAC7C,CAAA,EAAG,CAAC,CAAC,YAAU;AAAC,KAAC,CAAC,GAAG,GAAG,EAAE,CAAC;AAC5B,KAAC,CAAC,GAAG,CAAC,yBAAyB,GAAG,UAAS,SAAS,EAAE,EAAE,EAAE,MAAM,EAAE;AAChE,UAAI,IAAI,GAAG,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC;UACjC,cAAc,GAAG,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC;AAClD,UAAE,EAAE,EAAE;AACN,UAAE,EAAE,IAAI;AACR,UAAE,EAAE,IAAI;AACR,UAAE,EAAE,IAAI;AACR,UAAE,EAAE,MAAM;OACX,CAAC,CAAC;;AAEL,oBAAc,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC,KAAK,CAAC;AACvD,oBAAY,EAAE,MAAM,CAAC,CAAC,CAAC;AACvB,sBAAc,EAAE,CAAC;OAClB,CAAC,CAAC;AACH,oBAAc,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC,KAAK,CAAC;AACzD,oBAAY,EAAE,MAAM,CAAC,CAAC,CAAC;AACvB,sBAAc,EAAE,CAAC;OAClB,CAAC,CAAC;KACJ,CAAC;;AAEF,KAAC,CAAC,GAAG,CAAC,cAAc,GAAG,UAAS,EAAE,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE;AACtE,UAAI,IAAI,GAAG,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC;UACjC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC;AAClC,UAAE,EAAE,uBAAuB,GAAG,EAAE;OACjC,CAAC,CAAC;;AAEL,UAAI,KAAK,EAAE,MAAM,CAAC,IAAI,CAAC;AACrB,aAAK,EAAE,MAAM;AACb,cAAM,EAAE,MAAM;AACd,SAAC,EAAE,OAAO;AACV,SAAC,EAAE,OAAO;OACX,CAAC,CAAC;AACH,YAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;AAC7B,cAAM,EAAE,QAAQ;AAChB,YAAI,EAAE,eAAe;AACrB,UAAE,EAAE,GAAG;AACP,UAAE,EAAE,GAAG;OACR,CAAC,CAAC;AACH,YAAM,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC;AACnC,cAAM,EAAE,SAAS;AACjB,YAAI,EAAE,QAAQ;AACd,oBAAY,EAAE,SAAS;OACxB,CAAC,CAAC;AACH,YAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC;AAC5B,YAAI,EAAE,eAAe;AACrB,WAAG,EAAE,SAAS;AACd,YAAI,EAAE,QAAQ;OACf,CAAC,CAAC;AACH,YAAM,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC;AAC1D,YAAI,EAAE,QAAQ;AACd,aAAK,EAAE,KAAK;OACb,CAAC,CAAC;KACJ,CAAC;;AAEF,KAAC,CAAC,GAAG,CAAC,WAAW,GAAG,UAAS,KAAK,EAAE;AAClC,UAAI,QAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC;;AAErD,aAAO,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC;AAC1C,aAAK,EAAE,QAAQ,CAAC,KAAK,GAAG,EAAE;AAC1B,cAAM,EAAE,IAAI;OACb,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;KACjB,CAAC;;AAEF,KAAC,CAAC,GAAG,CAAC,2BAA2B,GAAG,UAAS,EAAE,EAAE,OAAO,EAAE,MAAM,EAAE;AAChE,QAAE,CAAC,IAAI,CAAC;AACN,cAAM,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,qBAAqB,EAAE,CAAC,MAAM,IAAI,MAAM,IAAI,CAAC,CAAA,AAAC;OACrE,CAAC,CAAC;KACJ,CAAC;;AAEF,KAAC,CAAC,GAAG,CAAC,YAAY,GAAG,UAAS,KAAK,EAAE;AACnC,aAAO,YAAW;AAChB,YAAI,IAAI,GAAG,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC;YACxB,UAAU,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,qBAAqB,EAAE;YAChD,IAAI,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC;AACrB,eAAO,UAAU,GAAI,KAAK,AAAC,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;AAC9C,cAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACzB,cAAI,CAAC,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,CAAC;AACxB,oBAAU,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,qBAAqB,EAAE,CAAC;SAClD;OACF,CAAC;KACH,CAAC;GAAC,CAAA,EAAG,CAAC,CAAC,YAAU;AAAC,QAAI,OAAO,GAAG;AAC7B,qCAA+B,EAAE,2CAAW;AAC1C,YAAI,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC;YACrB,SAAS;YAAE,OAAO,CAAC;;AAErB,eAAO,GAAG,AAAC,SAAS,CAAC,MAAM,GAAG,CAAC,GAAI,SAAS,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;AACrD,iBAAS,GAAG,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;;AAEzC,eAAO,GAAG,CAAC,kBAAkB,CAAC,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC;OAC9D;;AAED,gBAAU,EAAE,oBAAS,UAAU,EAAE;AAC/B,YAAI,GAAG,GAAG,CAAC,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;;AAEtC,WAAG,CAAC,iBAAiB,CAAC,kCAAkC,EAAE,cAAc,EAAE,2BAA2B,GAAG,UAAU,GAAG,GAAG,CAAC,CAAC;AAC1H,WAAG,CAAC,iBAAiB,CAAC,gCAAgC,EAAE,YAAY,EAAE,yBAAyB,GAAG,UAAU,GAAG,GAAG,CAAC,CAAC;OACrH;;AAED,yBAAmB,EAAE,6BAAS,UAAU,EAAE,gBAAgB,EAAE;AAC1D,YAAI,WAAW,GAAG,SAAd,WAAW,CAAY,KAAK,EAAE;AAChC,WAAC,CAAC,IAAI,CAAC,KAAK,EAAE,UAAS,IAAI,EAAE;AAC3B,gBAAI,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,EAAE,OAAO,CAAC,gBAAgB,GAAG,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC;AAC/E,gBAAI,IAAI,CAAC,KAAK,EAAE,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACxC,gBAAI,IAAI,CAAC,cAAc,EAAE,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;WAC3D,CAAC,CAAC;SACJ,CAAC;;AAEF,YAAI,IAAI,GAAG,CAAC,CAAC,OAAO,CAAC,qBAAqB,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;AAC1D,mBAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACvB,eAAO,CAAC,4BAA4B,EAAE,CAAC;OACxC;;AAED,iBAAW,EAAE,qBAAS,UAAU,EAAE;AAChC,eAAO,CAAC,mBAAmB,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;OACrD;;AAED,eAAS,EAAE,mBAAS,UAAU,EAAE;AAC9B,eAAO,CAAC,mBAAmB,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;OACnD;;AAED,oBAAc,EAAE,wBAAS,QAAQ,EAAE;AACjC,eAAO,CAAC,GAAG,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;OACnC;;AAED,oBAAc,EAAE,wBAAS,QAAQ,EAAE;AACjC,YAAI,mBAAmB,GAAG,SAAtB,mBAAmB,CAAY,KAAK,EAAE;AACtC,WAAC,CAAC,IAAI,CAAC,KAAK,EAAE,UAAS,IAAI,EAAE,KAAK,EAAE;AAClC,gBAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;AACpB,kBAAI,GAAG,KAAK,CAAC,KAAK,CAAC,GAAG;AACpB,oBAAI,EAAE,IAAI;eACX,CAAC;aACH;AACD,gBAAI,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,IAAI,IAAI,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC;AAC3D,gBAAI,IAAI,CAAC,KAAK,EAAE,mBAAmB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,KAC3C,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;WACtB,CAAC,CAAC;SACJ;YACD,YAAY,GAAG,SAAf,YAAY,GAAc;AACxB,cAAI,GAAG,GAAG,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;;AAE3B,YAAE,CAAC,SAAS,CAAC,+BAA+B,CAAC,CAAC,MAAM,EAAE,CAAC;;AAEvD,aAAG,CAAC,MAAM,EAAE,CAAC;AACb,WAAC,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;SACrB;YACD,UAAU,GAAG,EAAE,CAAC;;AAElB,kBAAU,CAAC,IAAI,CAAC;AACd,cAAI,EAAE,QAAQ,CAAC,IAAI;AACnB,eAAK,EAAE,QAAQ,CAAC,IAAI;SACrB,CAAC,CAAC;AACH,2BAAmB,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;AACzC,oBAAY,EAAE,CAAC;OAChB;;AAED,kBAAY,EAAE,sBAAS,IAAI,EAAE;AAC3B,YAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;AACzB,cAAI,CAAC,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC;AACjC,cAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AACtB,cAAI,CAAC,KAAK,GAAG,EAAE,CAAC;SACjB;OACF;;AAED,gBAAU,EAAE,oBAAS,IAAI,EAAE;AACzB,YAAI,IAAI,CAAC,cAAc,EAAE;AACvB,cAAI,CAAC,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC;AACjC,iBAAO,IAAI,CAAC,cAAc,CAAC;AAC3B,cAAI,CAAC,SAAS,GAAG,KAAK,CAAC;SACxB;OACF;;AAED,kBAAY,EAAE,sBAAS,IAAI,EAAE,WAAW,EAAE,OAAO,EAAE,KAAK,EAAE;AACxD,YAAI,cAAc,GAAG;AACnB,gBAAM,EAAE,KAAK;SACd,CAAC;AACF,eAAO,GAAG,OAAO,IAAI,EAAE,CAAC;AACxB,eAAO;AACL,cAAI,EAAE,IAAI;AACV,qBAAW,EAAE,WAAW,IAAI,IAAI;AAChC,iBAAO,EAAE,CAAC,CAAC,QAAQ,CAAC,OAAO,EAAE,cAAc,CAAC;AAC5C,eAAK,EAAE,KAAK,IAAI,EAAE;SACnB,CAAC;OACH;;AAED,uBAAiB,EAAE,2BAAS,IAAI,EAAE,WAAW,EAAE,KAAK,EAAE;AACpD,YAAI,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE;AAC1B,eAAK,GAAG,WAAW,CAAC;AACpB,qBAAW,GAAG,IAAI,CAAC;SACpB;;AAED,eAAO,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,WAAW,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;OAC7D;;AAED,kBAAY,EAAE,sBAAS,IAAI,EAAE,GAAG,EAAE;AAChC,eAAO,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,GAAG,EAAE;AACrC,gBAAM,EAAE,IAAI;SACb,CAAC,CAAC;OACJ;;AAED,wBAAkB,EAAE,4BAAS,IAAI,EAAE,WAAW,EAAE;AAC9C,eAAO,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;OAChD;;AAED,+BAAyB,EAAE,mCAAS,IAAI,EAAE;AACxC,YAAI,KAAK,GAAG,CAAC,CAAC;YACZ,UAAU,GAAG,EAAE;YACf,WAAW,GAAG,EAAE;YAChB,WAAW,GAAG,SAAd,WAAW,CAAY,KAAK,EAAE,iBAAiB,EAAE;AAC/C,WAAC,CAAC,IAAI,CAAC,KAAK,EAAE,UAAS,IAAI,EAAE;AAC3B,gBAAI,WAAW,GAAG;AAChB,kBAAI,EAAE,IAAI,CAAC,IAAI;AACf,yBAAW,EAAE,IAAI,CAAC,WAAW;AAC7B,wBAAU,EAAE;AACV,mBAAG,EAAE;AACH,yBAAO,EAAE,IAAI,CAAC,OAAO;iBACtB;eACF;AACD,gBAAE,EAAE,EAAE,KAAK;aACZ,CAAC;AACF,sBAAU,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AAC7B,gBAAI,iBAAiB,EAAE;AACrB,yBAAW,CAAC,IAAI,CAAC;AACf,oBAAI,EAAE,WAAW,CAAC,EAAE;AACpB,kBAAE,EAAE,iBAAiB,CAAC,EAAE;eACzB,CAAC,CAAC;aACJ,MAAM;AACL,yBAAW,CAAC,IAAI,CAAC;AACf,oBAAI,EAAE,WAAW,CAAC,EAAE;AACpB,kBAAE,EAAE,CAAC;eACN,CAAC,CAAC;aACJ;AACD,gBAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,WAAW,CAAC,IAAI,CAAC,KAAK,EAAE,WAAW,CAAC,CAAC;WAC/E,CAAC,CAAC;SACJ,CAAC;AACJ,kBAAU,CAAC,IAAI,CAAC;AACd,cAAI,EAAE,IAAI,CAAC,IAAI;AACf,YAAE,EAAE,EAAE,KAAK;SACZ,CAAC,CAAC;AACH,mBAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;AAEvB,eAAO;AACL,eAAK,EAAE,UAAU;AACjB,qBAAW,EAAE,WAAW;SACzB,CAAC;OACH;AACD,+BAAyB,EAAE,mCAAS,WAAW,EAAE;AAC/C,YAAI,SAAS,GAAG,CAAC,CAAC,KAAK,CAAC,8CAA8C,CAAC,WAAW,CAAC,CAAC;;AAEpF,iBAAS,CAAC,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC;AAChC,iBAAS,CAAC,IAAI,GAAG,SAAS,CAAC,KAAK,CAAC;;AAEjC,eAAO,SAAS,CAAC,KAAK,CAAC;AACvB,eAAO,SAAS,CAAC,IAAI,CAAC;;AAEtB,eAAO,SAAS,CAAC;OAClB;KACF;QACD,OAAO,GAAG,CAAC;QACX,GAAG,CAAC;;AAEN,OAAG;eAAS,GAAG;8BAAH,GAAG;;mCAAH,GAAG;;;gBAAH,GAAG;;mBAAH,GAAG;;eACP,gBAAC,UAAU,EAAE,IAAI,EAAE,IAAI,EAAE;AAC7B,cAAI,OAAO,GAAG,IAAI;cAChB,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,WAAW,EAAE;cACzB,KAAK,GAAG,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE;cAC9B,UAAU,GAAG,EAAE;cACf,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;AAC1B,qBAAS,EAAE,mBAAmB;AAC9B,mBAAO,EAAE,aAAa;WACvB,CAAC;cACF,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;cACxB,SAAS,GAAG,EAAE;cACd,UAAU,GAAG,EAAE;cACf,mBAAmB,GAAG,SAAtB,mBAAmB,CAAY,EAAE,EAAE,IAAI,EAAE;AACvC,gBAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,cAAc,EAAE;AAChD,kBAAI,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC;kBAC5B,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC;kBACvB,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC;kBACvB,SAAS,GAAG,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;AAC9B,uBAAO,EAAE,qBAAqB;eAC/B,CAAC;kBACF,gBAAgB,GAAG,SAAnB,gBAAgB,GAAc;AAC5B,uBAAO,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;AAC3B,uBAAO,CAAC,4BAA4B,EAAE,CAAC;eACxC;kBACD,cAAc,GAAG,SAAjB,cAAc,GAAc;AAC1B,uBAAO,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;AACzB,uBAAO,CAAC,4BAA4B,EAAE,CAAC;eACxC;kBACD,aAAa,GAAG,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC;AAC5C,iBAAC,EAAE,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC;AACnB,iBAAC,EAAE,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE;eACrB,CAAC;kBACF,0BAA0B,GAAG,SAA7B,0BAA0B,GAAc;AACtC,6BAAa,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;AAC/C,yBAAS,CAAC,EAAE,CAAC,OAAO,EAAE,gBAAgB,CAAC,CAAC;eACzC;kBACD,wBAAwB,GAAG,SAA3B,wBAAwB,GAAc;AACpC,6BAAa,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;AAC3B,yBAAO,EAAE,MAAM;AACf,mBAAC,EAAE,IAAI;iBACR,CAAC,CAAC;AACH,yBAAS,CAAC,EAAE,CAAC,OAAO,EAAE,cAAc,CAAC,CAAC;eACvC,CAAC;;AAEJ,kBAAI,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE;AACjC,oBAAI,CAAC,SAAS,GAAG,KAAK,CAAC;AACvB,0CAA0B,EAAE,CAAC;eAC9B,MAAM;AACL,oBAAI,IAAI,CAAC,SAAS,KAAK,IAAI,EAAE,wBAAwB,EAAE,CAAC,KACnD,IAAI,IAAI,CAAC,SAAS,KAAK,KAAK,EAAE,0BAA0B,EAAE,CAAC;eACjE;aACF;WACF;cACD,YAAY,GAAG,SAAf,YAAY,CAAY,KAAK,EAAE,SAAS,EAAE,KAAK,EAAE;AAC/C,gBAAI,YAAY,EAAE,KAAK,EAAE,SAAS,EAAE,gBAAgB,EAAE,aAAa,CAAC;;AAEpE,iBAAK,GAAG,KAAK,IAAI,IAAI,CAAC,IAAI,CAAC;AAC3B,qBAAS,GAAG,SAAS,IAAI,KAAK,CAAC;AAC/B,iBAAK,GAAG,KAAK,IAAI,CAAC,CAAC;;AAEnB,gBAAI,KAAK,KAAK,IAAI,CAAC,IAAI,EAAE,YAAY,GAAG,CAAC,CAAC;;AAE1C,aAAC,CAAC,IAAI,CAAC,KAAK,EAAE,UAAS,IAAI,EAAE,SAAS,EAAE;AACtC,kBAAI,cAAc,CAAC;;AAEnB,4BAAc,GAAG,oBAAoB,GAAG,OAAO,EAAE,CAAC;AAClD,kBAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;AACpB,oBAAI,GAAG,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;AAClC,qBAAK,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;eACzB;AACD,kBAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,IAAI,EAAE,CAAC;AAC9B,kBAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;AACzB,4BAAY,GAAG,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AACrC,6BAAa,GAAG,CAAC,CAAC,KAAK,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC1D,oBAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,aAAa,IAAI,GAAG,CAAC;AAC9D,oBAAI,IAAI,CAAC,WAAW,EAAE;AACpB,sBAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,KAAK,CAAC,2BAA2B,CAAC,aAAa,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;AACrF,+BAAa,IAAI,QAAQ,CAAC;iBAC3B,MAAM,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC;;AAEjC,qBAAK,GAAG,YAAY,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC;AAC3D,mBAAC,EAAE,UAAU,GAAG,KAAK;AACrB,mBAAC,EAAE,SAAS,GAAG,EAAE,YAAY;AAC7B,oBAAE,EAAE,cAAc;iBACnB,CAAC,CAAC;;AAEH,4BAAY,CAAC,IAAI,CAAC,KAAK,EAAE,YAAY,EAAE,KAAK,GAAG,CAAC,CAAC,CAAC;eACnD,MAAM;AACL,oBAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,KAAK,IAAI,EAAE;AAChD,8BAAY,GAAG,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,WAAW,CAAC,CAAA;AAC7E,uBAAK,GAAG,YAAY,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;AACvF,sBAAE,EAAE,cAAc;AAClB,qBAAC,EAAE,UAAU,GAAG,KAAK;AACrB,qBAAC,EAAE,SAAS,GAAG,EAAE,YAAY;AAC7B,wBAAI,EAAE,SAAS;mBAChB,CAAC,CAAC;;AAEH,sBAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC;iBAC3D,MAAM;AACL,8BAAY,GAAG,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;AACxC,sBAAE,EAAE,cAAc;mBACnB,CAAC,CAAC;AACH,uBAAK,GAAG,YAAY,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;AACvF,qBAAC,EAAE,UAAU,GAAG,KAAK;AACrB,qBAAC,EAAE,SAAS,GAAG,EAAE,YAAY;mBAC9B,CAAC,CAAC,KAAK,CAAC;AACP,iCAAa,EAAE,MAAM;mBACtB,CAAC,CAAC;AACH,sBAAI,IAAI,CAAC,WAAW,EAAE;AACpB,6BAAS,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,qBAAqB,EAAE,CAAC,KAAK,CAAC;AACtD,oCAAgB,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,qBAAqB,EAAE,CAAC,KAAK,GAAG,SAAS,GAAG,UAAU,GAAG,KAAK,GAAG,EAAE,CAAC;;AAEjG,gCAAY,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,sBAAsB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;AAC7F,uBAAC,EAAE,UAAU,GAAG,KAAK,GAAG,SAAS,GAAG,CAAC;AACrC,uBAAC,EAAE,SAAS,GAAG,YAAY,GAAG,CAAC;qBAChC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,YAAY,CAAC,gBAAgB,CAAC,CAAC,CAAC;mBAC/C;;AAED,sBAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,KAAK,CAAC,2BAA2B,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;iBAClF;eACF;AACD,iCAAmB,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;AACxC,kBAAI,CAAC,KAAK,GAAG,YAAY,CAAC;;AAE1B,qBAAO,CAAC,qBAAqB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;aAC5C,CAAC,CAAC;WACJ;cACD,KAAK;cAAE,YAAY;cAAE,QAAQ,CAAC;;AAEhC,cAAI,GAAG,IAAI,IAAI,EAAE,CAAC;;AAElB,iBAAO,CAAC,4BAA4B,GAAG,CAAC,CAAC,IAAI,CAAC,YAAW;AACvD,gBAAI,OAAO,GAAG,IAAI;gBAChB,aAAa,GAAG,CAAC,MAAM,CAAC,WAAW,IAAI,QAAQ,CAAC,eAAe,CAAC,SAAS,CAAA,IAAK,QAAQ,CAAC,eAAe,CAAC,SAAS,IAAI,CAAC,CAAA,AAAC,CAAC;AACzH,eAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;AACvB,gBAAI,KAAK,EAAE,KAAK,CAAC,MAAM,EAAE,CAAC;AAC1B,iBAAK,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;AAC5B,uBAAS,EAAE,eAAe,GAAG,UAAU,GAAG,GAAG;aAC9C,CAAC,CAAC;AACH,oBAAQ,GAAG,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC;AACnC,mBAAK,EAAE,KAAK;AACZ,oBAAM,EAAE,MAAM;AACd,kBAAI,EAAE,MAAM;aACb,CAAC,CAAC,KAAK,CAAC;AACP,oBAAM,EAAE,gCAAgC;aACzC,CAAC,CAAC;AACH,wBAAY,EAAE,CAAC;AACf,mBAAO,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACpC,aAAC,CAAC,GAAG,CAAC,2BAA2B,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;AACjD,aAAC,CAAC,GAAG,CAAC,2BAA2B,CAAC,QAAQ,EAAE,IAAI,EAAE,EAAE,GAAG,UAAU,CAAC,CAAC;;AAEnE,kBAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC;AAClC,mBAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;WAChC,EAAE,IAAI,CAAC,CAAC;;AAET,WAAC,CAAC,GAAG,CAAC,cAAc,CAAC,KAAK,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;;AAEvC,eAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC;AACxB,kBAAM,EAAE,UAAU;AAClB,iBAAK,EAAE,KAAK;AACZ,kBAAM,EAAE,MAAM;AACd,gBAAI,EAAE,MAAM;WACb,CAAC,CAAC,KAAK,CAAC;AACP,kBAAM,EAAE,gCAAgC;WACzC,CAAC,CAAC;AACH,eAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC;AACxB,aAAC,EAAE,KAAK,GAAG,CAAC;AACZ,aAAC,EAAE,EAAE;WACN,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC;AACvB,yBAAa,EAAE,MAAM;AACrB,yBAAa,EAAE,QAAQ;WACxB,CAAC,CAAC;;AAEH,YAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;AAC7C,iBAAO,CAAC,4BAA4B,EAAE,CAAC;AACvC,cAAI,IAAI,CAAC,YAAY,KAAK,IAAI,EAAE,OAAO,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;AAChE,iBAAO,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;AAC/B,YAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;SAC9C;;;eAEe,0BAAC,KAAK,EAAE,SAAS,EAAE;AACjC,cAAI,OAAO,GAAG,IAAI,CAAC;AACnB,WAAC,CAAC,IAAI,CAAC,KAAK,EAAE,UAAS,IAAI,EAAE;AAC3B,mBAAO,CAAC,0BAA0B,CAAC,IAAI,CAAC,CAAC;AACzC,gBAAI,SAAS,EAAE;AACb,qBAAO,CAAC,wBAAwB,CAAC,SAAS,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AAC9D,qBAAO,CAAC,yBAAyB,CAAC,IAAI,EAAE,SAAS,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;aACrE;AACD,gBAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,OAAO,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;WACrF,CAAC,CAAC;SACJ;;;aA/LS,GAAG;OAAS,CAAC,CAAC,OAAO,CAgMhC,CAAC;;AAEF,QAAI,GAAG,CAAC;AACN,UAAI,EAAE,KAAK;AACX,aAAO,EAAE,OAAO;KACjB,CAAC,CAAC;GACF,CAAA,EAAG,CAAC,CAAC,YAAU;;AAChB,QAAI,cAAc,GAAG,EAAE;QACrB,WAAW,GAAG,CAAC,CAAC,KAAK,CAAC,UAAU;QAChC,OAAO,GAAG,CAAC,CAAC,KAAK,CAAC,MAAM;QACxB,OAAO,GAAG;AACR,yBAAmB,EAAE,6BAAS,OAAO,EAAE;AACrC,YAAI,GAAG,GAAG,EAAE;YACV,KAAK,CAAC;AACR,YAAI,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE,OAAO,OAAO,CAAC,mBAAmB,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,KAC3E,IAAI,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;AAC3B,WAAC,CAAC,IAAI,CAAC,OAAO,EAAE,UAAS,GAAG,EAAE;AAC5B,gBAAI,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,IAAI,EAAE;AAC7B,mBAAK,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;AACtC,kBAAI,KAAK,KAAK,GAAG,EAAE,GAAG,CAAC,KAAK,GAAG,UAAU,CAAC,KACrC,IAAI,KAAK,KAAK,GAAG,EAAE,GAAG,CAAC,KAAK,GAAG,QAAQ,CAAC,KACxC,GAAG,CAAC,KAAK,GAAG,QAAQ,CAAC;aAC3B,MAAM,IAAI,GAAG,KAAK,GAAG,EAAE,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC;WACzC,CAAC,CAAC;AACH,iBAAO,GAAG,CAAC;SACZ;OACF;AACD,0BAAoB,EAAE,gCAAW;AAC/B,YAAI,iBAAiB,GAAG;AACtB,mBAAS,EAAE,KAAK;AAChB,gBAAM,EAAE,OAAO;AACf,cAAI,EAAE,OAAO;SACd,CAAC;;AAEF,eAAO,CAAC,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC;OACvC;AACD,gCAA0B,EAAE,oCAAS,UAAU,EAAE;AAC/C,eAAO,CAAC,CAAC,QAAQ,CAAC,UAAU,EAAE,OAAO,CAAC,oBAAoB,EAAE,CAAC,CAAC;OAC/D;AACD,kBAAY,EAAE,wBAAW;AACvB,YAAI,IAAI,GAAG;AACP,cAAI,EAAE,SAAS,CAAC,CAAC,CAAC;SACnB;YACD,8BAA8B,GAAG,SAAjC,8BAA8B,CAAY,MAAM,EAAE;AAChD,cAAI,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,0BAA0B,CAAC;AACvD,oBAAQ,EAAE,CAAC,MAAM,CAAC;WACnB,CAAC,CAAC,CAAC;SACL;YACD,WAAW,CAAC;;AAEd,YAAI,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;AACxB,qBAAW,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;AAC3B,cAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AACtB,cAAI,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE;AAC5B,uBAAW,GAAG,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;AACjD,gBAAI,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC;AACrD,gBAAI,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;AAC1B,eAAC,CAAC,IAAI,CAAC,WAAW,EAAE,UAAS,MAAM,EAAE,KAAK,EAAE;AAC1C,oBAAI,KAAK,GAAG,CAAC,EAAE,8BAA8B,CAAC,MAAM,CAAC,CAAC;eACvD,CAAC,CAAC;aACJ;WACF,MAAM,IAAI,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE;AACjC,gBAAI,CAAC,EAAE,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC;AACzB,uBAAW,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AACnC,aAAC,CAAC,IAAI,CAAC,WAAW,EAAE,UAAS,UAAU,EAAE;AACvC,kBAAI,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAE,8BAA8B,CAAC,UAAU,CAAC,CAAC,KAClE,IAAI,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAE;AAC/B,uBAAO,CAAC,0BAA0B,CAAC,UAAU,CAAC,CAAC;AAC/C,oBAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;eACnC;aACF,CAAC,CAAC;WACJ,MAAM,IAAI,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,WAAW,CAAC;;AAE1D,cAAI,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;AAC1D,cAAI,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,mBAAmB,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;SACpF;;AAED,eAAO,IAAI,CAAC;OACb;AACD,+BAAyB,EAAE,qCAAW;AACpC,YAAI,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC;YACrB,SAAS;YAAE,OAAO;YAAE,OAAO,CAAC;;AAE9B,eAAO,GAAG,AAAC,SAAS,CAAC,MAAM,GAAG,CAAC,GAAI,SAAS,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;AACrD,iBAAS,GAAG,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACzC,eAAO,GAAG,AAAC,SAAS,CAAC,MAAM,GAAG,CAAC,GAAI,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;;AAEvD,eAAO,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,OAAO,CAAC,CAAC;OACnF;AACD,8CAAwC,EAAE,kDAAS,IAAI,EAAE;AACvD,eAAO,YAAW;AAChB,cAAI,IAAI,GAAG,EAAE;cACX,OAAO,GAAG,EAAE,CAAC;AACf,cAAI,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE,IAAI,GAAG,GAAG,CAAC;AACpD,cAAI,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE,OAAO,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;AACjD,cAAI,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC;AAC3D,iBAAO,OAAO,CAAC,yBAAyB,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC;SACrF,CAAC;OACH;AACD,+BAAyB,EAAE,mCAAS,WAAW,EAAE;AAC/C,YAAI,UAAU,GAAG,EAAE;YACjB,YAAY,GAAG,EAAE;YACjB,UAAU,CAAC;;AAEb,SAAC,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,UAAS,IAAI,EAAE,KAAK,EAAE;AAC9C,oBAAU,CAAC,IAAI,CAAC;AACd,gBAAI,EAAE,IAAI,CAAC,IAAI;AACf,cAAE,EAAE,IAAI,CAAC,EAAE;AACX,uBAAW,EAAE,IAAI,CAAC,WAAW;WAC9B,CAAC,CAAC;AACH,sBAAY,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC;SAC/B,CAAC,CAAC;;AAEH,SAAC,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,UAAS,UAAU,EAAE;AACnD,oBAAU,GAAG,UAAU,CAAC,YAAY,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC;AACrD,oBAAU,CAAC,WAAW,GAAG,UAAU,CAAC,WAAW,IAAI,EAAE,CAAC;AACtD,oBAAU,CAAC,WAAW,CAAC,IAAI,CAAC;AAC1B,qBAAS,EAAE,IAAI;AACf,oBAAQ,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC;WAC5B,CAAC,CAAC;SACJ,CAAC,CAAC;;AAEH,eAAO,UAAU,CAAC;OACnB;AACD,+BAAyB,EAAE,mCAAS,IAAI,EAAE;AACxC,YAAI,UAAU,GAAG,EAAE;YACjB,WAAW,GAAG,EAAE,CAAC;;AAEnB,SAAC,CAAC,IAAI,CAAC,IAAI,EAAE,UAAS,IAAI,EAAE;AAC1B,oBAAU,CAAC,IAAI,CAAC;AACd,cAAE,EAAE,IAAI,CAAC,EAAE;AACX,gBAAI,EAAE,IAAI,CAAC,IAAI;AACf,uBAAW,EAAE,IAAI,CAAC,WAAW;WAC9B,CAAC,CAAC;AACH,WAAC,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,UAAS,UAAU,EAAE;AAC5C,aAAC,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,UAAS,WAAW,EAAE;AAChD,yBAAW,CAAC,IAAI,CAAC;AACf,oBAAI,EAAE,IAAI,CAAC,EAAE;AACb,kBAAE,EAAE,WAAW;eAChB,CAAC,CAAC;aACJ,CAAC,CAAC;WACJ,CAAC,CAAC;SACJ,CAAC,CAAC;;AAEH,eAAO;AACL,eAAK,EAAE,UAAU;AACjB,qBAAW,EAAE,WAAW;SACzB,CAAC;OACH;AACD,oCAA8B,EAAE,wCAAS,IAAI,EAAE,EAAE,EAAE;AACjD,YAAI,QAAQ,GAAG,SAAX,QAAQ,CAAY,IAAI,EAAE;AAC1B,iBAAO,AAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;SAC/C;YACD,GAAG,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACpD,QAAQ,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC;YACrB,QAAQ,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;;AAExB,eAAO,EAAE,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;OAC/B;AACD,kCAA4B,EAAE,sCAAS,IAAI,EAAE;AAC3C,eAAO,CAAC,8BAA8B,CAAC,IAAI,EAAE,UAAS,QAAQ,EAAE,QAAQ,EAAE;AACxE,cAAI,CAAC,CAAC,WAAW,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,EAAE,cAAc,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC;;AAE3E,cAAI,CAAC,CAAC,WAAW,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,cAAc,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,KACzF,cAAc,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;SAC9C,CAAC,CAAC;OACJ;AACD,mCAA6B,EAAE,uCAAS,IAAI,EAAE;AAC5C,eAAO,OAAO,CAAC,8BAA8B,CAAC,IAAI,EAAE,UAAS,QAAQ,EAAE,QAAQ,EAAE;AAC/E,iBAAO,cAAc,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;SAC3C,CAAC,CAAC;OACJ;KACF;QACD,KAAK;QAAE,OAAO,CAAC;;AAEjB,SAAK;eAAS,KAAK;8BAAL,KAAK;;mCAAL,KAAK;;;gBAAL,KAAK;;mBAAL,KAAK;;eACX,gBAAC,UAAU,EAAE,IAAI,EAAE,IAAI,EAAE;AAC7B,cAAI,OAAO,GAAG,IAAI;cAChB,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,eAAe,CAAC,YAAY,EAAE,MAAM,CAAC,WAAW,IAAI,CAAC,CAAC;cACrF,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,WAAW,EAAE;cACzB,SAAS,GAAG,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC;cAC3B,MAAM,GAAG,UAAU,GAAG,GAAG;cACzB,KAAK,GAAG,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC;cACzB,IAAI,GAAG,SAAP,IAAI,GAAc;AAChB,gBAAI,aAAa,GAAG,SAAhB,aAAa,CAAY,SAAS,EAAE;AACtC,kBAAI,CAAC,MAAM,CAAC,OAAO,GAAG,SAAS,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,UAAS,CAAC,EAAE;AACrD,oBAAI,WAAW,GAAG,OAAO,CAAC,6BAA6B,CAAC,CAAC,CAAC;oBACxD,SAAS,GAAG,CAAC,CAAC,IAAI,CAAC,SAAS;oBAC5B,EAAE,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC;oBAC5B,EAAE,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC;oBAC5B,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,GAAG,GAAG,IAAI,CAAC,SAAS,GAAG,CAAC,CAAA,IAAK,WAAW,GAAG,CAAC,CAAA,CAAC,AAAC,CAAC;AAClF,uBAAO,GAAG,GACR,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,GAAG,GAChB,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,GAAG,GAChB,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,SAAS,GACzB,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,GAAG,GAChB,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;eACd,CAAC,CAAC;aACJ,CAAC;;AAEF,aAAC,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,iBAAiB,CAAC,EAAE,aAAa,CAAC,CAAC;;AAExD,gBAAI,CAAC,IAAI,CAAC,UAAS,UAAU,EAAE;AAC7B,kBAAI,UAAU,CAAC,KAAK,KAAK,QAAQ,EAAE;AACjC,oBAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC;eACjF,MAAM;AACL,oBAAI,UAAU,CAAC,KAAK,KAAK,UAAU,EAAE,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,KACvE,IAAI,UAAU,CAAC,KAAK,KAAK,QAAQ,EAAE,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;;AAE7E,iBAAC,CAAC,KAAK,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC;eACvC;aACF,CAAC,CAAC;AACH,gBAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,WAAW,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;WAClF;cACD,SAAS,GAAG,SAAZ,SAAS,GAAc;AACrB,gBAAI,KAAK,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,EAAE,UAAS,IAAI,EAAE,IAAI,EAAE;AAC5C,kBAAI,EAAE,GAAG,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;AACtB,qBAAO,AAAC,IAAI,GAAG,EAAE,GAAI,IAAI,GAAG,EAAE,CAAC;aAChC,EAAE,CAAC,CAAC;gBACL,MAAM,GAAG,EAAE;gBACX,gBAAgB,GAAG,EAAE;gBACrB,MAAM,GAAG,EAAE,CAAC,KAAK,CAAC,UAAU,EAAE;gBAC9B,MAAM;gBAAE,KAAK;gBAAE,OAAO;gBAAE,SAAS;gBAAE,OAAO,CAAC;AAC7C,sBAAU,GAAG;AACX,mBAAK,EAAE,EAAE;AACT,mBAAK,EAAE,EAAE;aACV,CAAC;AACF,mBAAO,GAAG,EAAE,CAAC;AACb,aAAC,CAAC,IAAI,CAAC,IAAI,EAAE,UAAS,IAAI,EAAE,SAAS,EAAE;AACrC,oBAAM,GAAG,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,KAAK,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;AACpD,mBAAK,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC;AAC1B,qBAAO,GAAG,IAAI,CAAC,OAAO,IAAI,EAAE,CAAC;;AAE7B,wBAAU,CAAC,KAAK,CAAC,IAAI,CAAC;AACpB,oBAAI,EAAE,IAAI,CAAC,IAAI;AACf,kBAAE,EAAE,MAAM;AACV,2BAAW,EAAE,IAAI,CAAC,WAAW,IAAI,EAAE;AACnC,2BAAW,EAAE,IAAI,CAAC,WAAW,IAAI,IAAI;AACrC,qBAAK,EAAE,KAAK;AACZ,qBAAK,EAAE,OAAO,CAAC,KAAK,IAAI,QAAQ;AAChC,oBAAI,EAAE,OAAO,CAAC,IAAI,IAAI,KAAK;eAC5B,CAAC,CAAC;AACH,oBAAM,CAAC,MAAM,CAAC,GAAG;AACf,qBAAK,EAAE,SAAS;eACjB,CAAC;AACF,kBAAI,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;AAC9D,sBAAM,CAAC,MAAM,CAAC,CAAC,KAAK,GAAG,KAAK,CAAC;AAC7B,uBAAO,CAAC,IAAI,CAAC;AACX,oBAAE,EAAE,MAAM;AACV,uBAAK,EAAE,KAAK;iBACb,CAAC,CAAC;eACJ;aACF,CAAC,CAAC;;AAEH,aAAC,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,UAAS,IAAI,EAAE,SAAS,EAAE;AACjD,kBAAI,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;AAC/B,iBAAC,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,UAAS,UAAU,EAAE;AAC5C,mBAAC,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,UAAS,WAAW,EAAE;AAChD,6BAAS,GAAG,MAAM,CAAC,WAAW,CAAC,CAAC;;AAEhC,wBAAI,SAAS,EAAE;AACb,0BAAI,IAAI,CAAC,qBAAqB,EAAE;AAC9B,wCAAgB,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;AACzC,wCAAgB,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;uBACpC;;AAED,6BAAO,GAAG,EAAE,CAAC;AACb,0BAAI,UAAU,CAAC,SAAS,KAAK,KAAK,EAAE;AAClC,+BAAO,CAAC,MAAM,GAAG,SAAS,CAAC;AAC3B,+BAAO,CAAC,MAAM,GAAG,SAAS,CAAC,KAAK,CAAC;uBAClC,MAAM;AACL,+BAAO,CAAC,MAAM,GAAG,SAAS,CAAC,KAAK,CAAC;AACjC,+BAAO,CAAC,MAAM,GAAG,SAAS,CAAC;uBAC5B;AACD,6BAAO,CAAC,IAAI,GAAG,UAAU,CAAC;AAC1B,6BAAO,CAAC,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC;AACtC,6BAAO,CAAC,4BAA4B,CAAC,OAAO,CAAC,CAAC;AAC9C,6BAAO,CAAC,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,6BAA6B,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;AAC5E,0BAAI,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC;AACjE,gCAAU,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;qBAChC;mBACF,CAAC,CAAC;iBACJ,CAAC,CAAC;eACJ;aACF,CAAC,CAAC;;AAEH,gBAAI,IAAI,CAAC,qBAAqB,KAAK,IAAI,EAAE;AACvC,eAAC,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,UAAS,IAAI,EAAE,SAAS,EAAE;AACjD,oBAAI,gBAAgB,CAAC,SAAS,CAAC,KAAK,IAAI,EAAE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;eAC9D,CAAC,CAAC;aACJ;WACF;cACD,MAAM,GAAG,SAAT,MAAM,GAAc;AAClB,qBAAS,CAAC,IAAI,CAAC,WAAW,EAAE,YAAY,GAAG,EAAE,CAAC,KAAK,CAAC,SAAS,GAAG,SAAS,GAAG,EAAE,CAAC,KAAK,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC;WACnG;cACD,WAAW,GAAG,SAAd,WAAW,GAAc;AACvB,cAAE,CAAC,KAAK,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC;AACvC,cAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;AAC1C,iBAAK,CAAC,KAAK,EAAE,CAAC;WACf;cACD,OAAO,GAAG,SAAV,OAAO,CAAY,CAAC,EAAE;AACpB,cAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;WAC3E;cACD,SAAS,GAAG,SAAZ,SAAS,GAAc;AACrB,cAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;WAC5C;cACD,gBAAgB,GAAG,SAAnB,gBAAgB,GAAc;AAC5B,aAAC,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,OAAO,CAAC,0BAA0B,EAAE,OAAO,CAAC,CAAC;AACtE,aAAC,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,UAAS,IAAI,EAAE;AACtC,qBAAO,CAAC,mBAAmB,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;aACvD,CAAC,CAAC;AACH,aAAC,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,UAAS,IAAI,EAAE;AACtC,qBAAO,CAAC,yBAAyB,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;AACjF,qBAAO,CAAC,wBAAwB,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;aACjF,CAAC,CAAC;WACJ;cACD,KAAK;cAAE,IAAI;cAAE,IAAI;cAAE,SAAS;cAAE,IAAI;cAAE,IAAI;cAAE,YAAY;cAAE,KAAK;cAAE,OAAO;cAAE,OAAO;cAAE,UAAU,CAAC;;AAE9F,iBAAO,CAAC,aAAa,GAAG,UAAS,IAAI,EAAE;AACrC,gBAAI,CAAC,EAAE,CAAC,KAAK,CAAC,cAAc,EAAE,MAAM,CAAC,CAAC;WACvC,CAAC;AACF,iBAAO,CAAC,cAAc,GAAG,YAAW;AAClC,aAAC,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,UAAS,IAAI,EAAE;AACtC,kBAAI,CAAC,OAAO,CAAC,KAAK,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;aAC3C,CAAC,CAAC;WACJ,CAAC;;AAEF,cAAI,GAAG,IAAI,IAAI,EAAE,CAAC;AAClB,mBAAS,EAAE,CAAC;;AAEZ,aAAG,CAAC,IAAI,CAAC;AACP,kBAAM,EAAE,MAAM;AACd,mBAAO,EAAE,eAAe;WACzB,CAAC,CAAC;;AAGH,cAAI,GAAG,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,WAAW,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;AACpE,aAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;AAEf,eAAK,GAAG,EAAE,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,KAAK,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,YAAY,IAAI,GAAG,CAAC,CAAC,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;;AAEtI,cAAI,GAAG,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,MAAM,CAAC,UAAS,CAAC,EAAE;AAC3C,mBAAO,CAAC,CAAC;WACV,CAAC,CAAC,EAAE,CAAC,WAAW,EAAE,WAAW,CAAC,CAAC,EAAE,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC,EAAE,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;;AAE7E,eAAK,CAAC,KAAK,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,CAAC;;AAE9D,mBAAS,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAC,CAC7C,IAAI,CAAC,OAAO,CAAC,CACb,KAAK,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC,CAC5B,IAAI,CAAC;AACJ,cAAE,EAAE,OAAO,CAAC,IAAI,EAAE,aAAa,CAAC;AAChC,mBAAO,EAAE,YAAY;AACrB,gBAAI,EAAE,OAAO,CAAC,OAAO,CAAC;AACtB,mBAAO,EAAE,YAAY;AACrB,gBAAI,EAAE,EAAE;AACR,gBAAI,EAAE,CAAC,GAAG;AACV,uBAAW,EAAE,CAAC;AACd,wBAAY,EAAE,CAAC;AACf,kBAAM,EAAE,MAAM;WACf,CAAC,CACD,MAAM,CAAC,UAAU,CAAC,CAClB,IAAI,CAAC,GAAG,EAAE,gBAAgB,CAAC,CAAC;;AAE/B,cAAI,GAAG,SAAS,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;AACrG,cAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;AAC3B,mBAAO,EAAE,WAAW;AACpB,wBAAY,EAAE,mBAAS,CAAC,EAAE;AACxB,kBAAI,UAAU,GAAG,AAAC,CAAC,CAAC,IAAI,CAAC,SAAS,KAAK,KAAK,GAAI,QAAQ,GAAG,QAAQ,CAAC;AACpE,qBAAO,kBAAkB,GAAG,CAAC,CAAC,UAAU,CAAC,CAAC,EAAE,GAAG,GAAG,CAAC;aACpD;WACF,CAAC,CAAC,KAAK,CAAC;AACP,oBAAQ,EAAE,OAAO,CAAC,OAAO,CAAC;AAC1B,8BAAkB,EAAE,yBAAS,CAAC,EAAE;AAC9B,kBAAI,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,OAAO,EAAE,OAAO,IAAI,CAAC,KACpC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,QAAQ,EAAE,OAAO,KAAK,CAAC;aACjD;WACF,CAAC,CAAC;;AAEH,mBAAS,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAC7B,mBAAS,CAAC,MAAM,CAAC,UAAS,CAAC,EAAE;AAC3B,mBAAO,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,KAAK,CAAC;WAC7C,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,iBAAiB,CAAC,CAAC;AACvD,mBAAS,CAAC,IAAI,CAAC,UAAS,CAAC,EAAE;AACzB,mBAAO,CAAC,qBAAqB,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;WACxD,CAAC,CAAC;;AAEH,cAAI,GAAG,SAAS,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;AAClF,mBAAO,EAAE,gBAAS,CAAC,EAAE;AACnB,kBAAI,UAAU,GAAG,MAAM,CAAC;AACxB,kBAAI,CAAC,CAAC,MAAM,KAAK,IAAI,EAAE,UAAU,IAAI,cAAc,CAAC;AACpD,qBAAO,UAAU,CAAC;aACnB;AACD,cAAE,EAAE,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC;WAC3B,CAAC,CAAC;;AAEH,cAAI,CAAC,IAAI,CAAC,UAAS,UAAU,EAAE;AAC7B,gBAAI,iBAAiB,GAAG,EAAE,CAAC;AAC3B,wBAAY,GAAG,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAC/B,sBAAU,CAAC,QAAQ,GAAG,CAAC,CAAC,KAAK,CAAC,2BAA2B,CAAC,UAAU,CAAC,IAAI,EAAE,UAAU,CAAC,WAAW,CAAC,CAAC;;AAEnG,gBAAI,UAAU,CAAC,KAAK,KAAK,QAAQ,EAAE;AACjC,qBAAO,GAAG,YAAY,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC;AAC3C,iBAAC,EAAE,EAAE;AACL,oBAAI,EAAE,OAAO,CAAC,OAAO,CAAC;eACvB,CAAC,CAAC;aACJ,MAAM;AACL,mBAAK,GAAG,EAAE,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAClC,qBAAO,GAAG,YAAY,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;AACtC,kBAAI,UAAU,CAAC,KAAK,KAAK,UAAU,EAAE;AACnC,qBAAK,GAAG,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;AAClC,iCAAiB,IAAI,WAAW,CAAC;eAClC,MAAM,IAAI,UAAU,CAAC,KAAK,KAAK,QAAQ,EAAE;AACxC,qBAAK,GAAG,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAC7B,iCAAiB,IAAI,SAAS,CAAC;eAChC;AACD,qBAAO,GAAG,OAAO,CAAC,IAAI,CAAC;AACrB,iBAAC,EAAE,KAAK;AACR,oBAAI,EAAE,OAAO,CAAC,OAAO,CAAC;eACvB,CAAC,CAAC;AACH,eAAC,CAAC,KAAK,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC;aACvC;;AAED,mBAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACnB,gBAAI,UAAU,CAAC,IAAI,KAAK,IAAI,EAAE,iBAAiB,IAAI,OAAO,CAAC,KACtD,iBAAiB,IAAI,OAAO,CAAC;AAClC,mBAAO,CAAC,IAAI,CAAC,OAAO,EAAE,iBAAiB,CAAC,CAAC;;AAEzC,sBAAU,CAAC,OAAO,GAAG,OAAO,CAAC;AAC7B,mBAAO,CAAC,qBAAqB,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;WACpD,CAAC,CAAC;AACH,cAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;;AAE1C,0BAAgB,EAAE,CAAC;SACpB;;;aAnQW,KAAK;OAAS,CAAC,CAAC,OAAO,CAoQpC,CAAC;;AAEF,QAAI,KAAK,CAAC;AACR,UAAI,EAAE,OAAO;AACb,aAAO,EAAE,OAAO;KACjB,CAAC,CAAC;GACF,CAAA,EAAG,CAAC,CAAC,YAAU;AAAC,QAAI,QAAQ,GAAG,CAAC;QAC/B,OAAO,GAAG,CAAC,CAAC,KAAK,CAAC,MAAM;QACxB,OAAO,GAAG;AACR,SAAG,EAAE,CAAC;AACN,UAAI;AACS,iBADD,IAAI,CACF,UAAU,EAAE;gCADd,IAAI;;AAEZ,cAAI,CAAC,QAAQ,GAAG;AACd,aAAC,EAAE,CAAC;AACJ,aAAC,EAAE,CAAC;WACL,CAAC;AACF,cAAI,CAAC,KAAK,GAAG,UAAU,CAAC;AACxB,cAAI,CAAC,KAAK,GAAG,EAAE,CAAC;SACjB;;qBARS,IAAI;;iBASC,yBAAC,IAAI,EAAE;AACpB,gBAAI,OAAO,GAAG,CAAC,CAAC;;AAEhB,gBAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;AACpB,mBAAO,OAAO,GAAG,IAAI,EAAE;AACrB,kBAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC;AACrB,kBAAI,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,EAAE,MAAM;aAC5C;AACD,gBAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC;WAChC;;;iBACkB,6BAAC,IAAI,EAAE;AACxB,gBAAI,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;WACxC;;;iBACmB,8BAAC,IAAI,EAAE;AACzB,gBAAI,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;WAC5D;;;iBACW,sBAAC,IAAI,EAAE,GAAG,EAAE;AACtB,gBAAI,GAAG,CAAC;AACR,gBAAI,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;AACf,gBAAI,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;AACf,iBAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACpC,kBAAI,CAAC,oBAAoB,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AACrC,iBAAG,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AAC5B,mBAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC,EAAE,EAAE;AACnC,mBAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;eACvB;aACF;AACD,gBAAI,CAAC,cAAc,EAAE,CAAC;WACvB;;;iBACa,0BAAG;AACf,gBAAI,OAAO,GAAG,CAAC,CAAC;AAChB,mBAAO,OAAO,GAAG,IAAI,EAAE;AACrB,kBAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC;AACrB,kBAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,KAAK,IAAI,CAAC,KAAK,EAAE;AAClC,oBAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;AACrB,oBAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC;AACrB,oBAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;eAC5C,MAAM,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE;AAChE,sBAAM;eACP;AACD,qBAAO,EAAE,CAAC;aACX;WACF;;;iBACY,uBAAC,IAAI,EAAE,GAAG,EAAE;AACvB,gBAAI,GAAG,CAAC;AACR,iBAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACpC,iBAAG,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AAC5B,kBAAI,CAAC,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,OAAO,IAAI,CAAC;AACpC,mBAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC,EAAE,EAAE;AACnC,oBAAI,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE,OAAO,KAAK,CAAC;AAC1C,oBAAI,AAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,GAAI,IAAI,CAAC,KAAK,EAAE,OAAO,KAAK,CAAC;eAChD;aACF;AACD,mBAAO,IAAI,CAAC;WACb;;;iBACmB,8BAAC,IAAI,EAAE;AACzB,mBAAO,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;WAChD;;;iBACoB,iCAAG;AACtB,gBAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC;AAClB,gBAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;AACpB,gBAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;WAC5C;;;iBACa,0BAAG;AACf,gBAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;AAC7B,iBAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC,EAAE,EAAE;AACnC,kBAAI,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE,OAAO,KAAK,CAAC;aACpD;AACD,mBAAO,IAAI,CAAC;WACb;;;iBACM,mBAAG;AACR,gBAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;AAC7B,mBAAO;AACL,mBAAK,EAAE,IAAI,CAAC,KAAK;AACjB,oBAAM,EAAE,AAAC,IAAI,CAAC,cAAc,EAAE,GAAI,IAAI,GAAG,CAAC,GAAG,IAAI;aAClD,CAAC;WACH;;;eArFS,IAAI;UAsFf;;AAED,YAAM,EAAE;AACN,iBAAS,EAAE,GAAG;AACd,kBAAU,EAAE,EAAE;AACd,wBAAgB,EAAE,CAAC;AACnB,yBAAiB,EAAE,CAAC;AACpB,sBAAc,EAAE,KAAK;OACtB;;AAED,0CAAoC,EAAE,8CAAS,MAAM,EAAE,YAAY,EAAE;AACnE,YAAI,KAAK,GAAG,MAAM,CAAC,YAAY,CAAC;YAC9B,SAAS,GAAG,MAAM,CAAC,YAAY,GAAG,CAAC,CAAC;YACpC,WAAW;YAAE,KAAK,CAAC;;AAErB,YAAI,KAAK,CAAC,cAAc,CAAC,mBAAmB,CAAC,KAAK,IAAI,IAAI,SAAS,EAAE;AACnE,cAAI,SAAS,CAAC,EAAE,EAAE,KAAK,GAAG,SAAS,CAAC,EAAE,CAAC,KAClC;AACH,iBAAK,GAAG,UAAU,GAAG,MAAM,CAAC,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;AAC3C,qBAAS,CAAC,EAAE,GAAG,KAAK,CAAC;WACtB;;AAED,cAAI,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,iBAAiB,CAAC,IAAI,KAAK,CAAC,iBAAiB,CAAC,IAAI,EAAE;AACvE,uBAAW,GAAG;AACZ,gBAAE,EAAE,KAAK;AACT,kBAAI,EAAE,KAAK,CAAC,iBAAiB,CAAC,IAAI;aACnC,CAAC;WACH,MAAM,WAAW,GAAG,KAAK,CAAC;;AAE3B,cAAI,KAAK,CAAC,WAAW,EAAE,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,KACtD,KAAK,CAAC,WAAW,GAAG,CAAC,WAAW,CAAC,CAAC;SACxC;OACF;;AAED,gCAA0B,EAAE,oCAAS,UAAU,EAAE;AAC/C,YAAI,GAAG,GAAG,IAAI,CAAC;AACf,SAAC,CAAC,IAAI,CAAC,UAAU,EAAE,UAAS,IAAI,EAAE;AAChC,cAAI,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,EAAE,GAAG,GAAG,KAAK,CAAC;AACpD,cAAI,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,EAAE,GAAG,GAAG,KAAK,CAAC;SACvD,CAAC,CAAC;AACH,eAAO,GAAG,CAAC;OACZ;;AAED,0CAAoC,EAAE,8CAAS,KAAK,EAAE;AACpD,YAAI,UAAU,GAAG,CAAC;YAChB,WAAW,GAAG,CAAC;YACf,QAAQ,GAAG,CAAC;YACZ,SAAS,GAAG,CAAC;YACb,UAAU,GAAG,EAAE;YACf,YAAY,GAAG,CAAC;YAChB,YAAY;YAAE,IAAI;YAAE,iBAAiB;YAAE,KAAK;YAAE,QAAQ;YAAE,mBAAmB;YAC3E,eAAe,GAAG,SAAlB,eAAe,CAAY,KAAK,EAAE;AAChC,cAAI,YAAY,CAAC,KAAK,CAAC,CAAC,QAAQ,KAAK,IAAI,EAAE;AACzC,gBAAI,CAAC,eAAe,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;AAC1C,wBAAY,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;AAC9B,mBAAO,IAAI,CAAC;WACb,MAAM,IAAI,IAAI,CAAC,oBAAoB,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,EAAE;AACzD,gBAAI,CAAC,mBAAmB,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;AAC9C,wBAAY,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;AAC9B,mBAAO,IAAI,CAAC;WACb,MAAM,OAAO,KAAK,CAAC;SACrB,CAAC;;AAEJ,SAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,UAAS,IAAI,EAAE;AACjC,oBAAU,IAAI,IAAI,CAAC,KAAK,CAAC;AACzB,qBAAW,IAAI,IAAI,CAAC,MAAM,CAAC;AAC3B,mBAAS,GAAG,AAAC,IAAI,CAAC,MAAM,GAAG,SAAS,GAAI,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;AAChE,kBAAQ,GAAG,AAAC,IAAI,CAAC,KAAK,GAAG,QAAQ,GAAI,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;AAC3D,oBAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACvB,CAAC,CAAC;;AAEH,YAAI,AAAC,UAAU,GAAG,CAAC,IAAK,QAAQ,EAAE;AAChC,cAAI,WAAW,GAAG,UAAU,EAAE;AAC5B,gBAAI,WAAW,GAAG,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC,KACvE,KAAK,GAAG,UAAU,CAAC;WACzB,MAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;SAC1C,MAAM,KAAK,GAAG,QAAQ,CAAC;;AAExB,aAAK,GAAG,AAAC,OAAO,CAAC,aAAa,GAAG,KAAK,GAAI,OAAO,CAAC,aAAa,GAAG,KAAK,CAAC;;AAExE,YAAI,GAAG,IAAI,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;;AAE/B,2BAAmB,GAAG,OAAO,CAAC,0BAA0B,CAAC,UAAU,CAAC,CAAC;AACrE,YAAI,mBAAmB,EAAE;AACvB,sBAAY,GAAG,UAAU,CAAC,IAAI,CAAC,UAAS,KAAK,EAAE,KAAK,EAAE;AACpD,gBAAI,KAAK,CAAC,KAAK,KAAK,KAAK,CAAC,KAAK,EAAE;AAC/B,qBAAO,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;aACpC,MAAM,OAAO,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;WACzC,CAAC,CAAC;SACJ,MAAM,YAAY,GAAG,UAAU,CAAC;AACjC,uBAAe,CAAC,CAAC,CAAC,CAAC;AACnB,yBAAiB,GAAG,CAAC,CAAC;AACtB,eAAO,YAAY,CAAC,MAAM,GAAG,CAAC,IAAI,YAAY,GAAG,IAAI,EAAE;AACrD,cAAI,eAAe,CAAC,iBAAiB,CAAC,EAAE;AACtC,6BAAiB,GAAG,CAAC,CAAC;WACvB,MAAM;AACL,gBAAI,mBAAmB,EAAE;AACvB,+BAAiB,EAAE,CAAC;AACpB,kBAAI,iBAAiB,KAAK,YAAY,CAAC,MAAM,EAAE;AAC7C,iCAAiB,GAAG,CAAC,CAAC;AACtB,oBAAI,CAAC,qBAAqB,EAAE,CAAC;eAC9B;aACF,MAAM;AACL,kBAAI,CAAC,qBAAqB,EAAE,CAAC;aAC9B;WACF;AACD,sBAAY,EAAE,CAAC;SAChB;;AAED,gBAAQ,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;;AAE1B,aAAK,CAAC,CAAC,GAAG,CAAC,CAAC;AACZ,aAAK,CAAC,CAAC,GAAG,CAAC,CAAC;AACZ,aAAK,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC;AAC7B,aAAK,CAAC,MAAM,GAAG,AAAC,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,GAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,GAAG,QAAQ,CAAC,MAAM,CAAC;OACjF;;AAED,wBAAkB,EAAE,4BAAS,MAAM,EAAE,YAAY,EAAE;AACjD,YAAI,MAAM,GAAG,OAAO,CAAC,MAAM;YACzB,QAAQ;YAAE,UAAU,CAAC;;AAEvB,oBAAY,GAAG,YAAY,IAAI,CAAC,CAAC;AACjC,gBAAQ,GAAG,YAAY,CAAC;AACxB,SAAC,CAAC,IAAI,CAAC,MAAM,EAAE,UAAS,KAAK,EAAE,UAAU,EAAE;AACzC,cAAI,KAAK,CAAC,cAAc,KAAK,IAAI,EAAE,MAAM,CAAC,cAAc,GAAG,IAAI,CAAC;AAChE,eAAK,CAAC,KAAK,GAAG,YAAY,CAAC;AAC3B,iBAAO,CAAC,oCAAoC,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;AACjE,cAAI,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;AAC1B,sBAAU,GAAG,OAAO,CAAC,kBAAkB,CAAC,KAAK,CAAC,KAAK,EAAG,YAAY,GAAG,CAAC,CAAE,CAAC;AACzE,iBAAK,CAAC,kBAAkB,GAAG,UAAU,GAAG,YAAY,CAAC;AACrD,mBAAO,CAAC,oCAAoC,CAAC,KAAK,CAAC,CAAC;AACpD,oBAAQ,GAAG,AAAC,QAAQ,GAAG,UAAU,GAAI,UAAU,GAAG,QAAQ,CAAC;WAC5D,MAAM;AACL,iBAAK,CAAC,kBAAkB,GAAG,CAAC,CAAC;AAC7B,iBAAK,CAAC,KAAK,GAAG,CAAC,CAAC;AAChB,iBAAK,CAAC,MAAM,GAAG,CAAC,CAAC;AACjB,oBAAQ,GAAG,AAAC,QAAQ,GAAG,UAAU,GAAI,UAAU,GAAG,QAAQ,CAAC;WAC5D;AACD,eAAK,CAAC,kBAAkB,GAAG,EAAE,CAAC;SAC/B,CAAC,CAAC;;AAEH,eAAO,QAAQ,CAAC;OACjB;;AAED,6BAAuB,EAAE,iCAAS,KAAK,EAAE;AACvC,YAAI,MAAM,GAAG,OAAO,CAAC,MAAM;YACzB,MAAM,GAAG,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC,UAAU,GAAG,MAAM,CAAC,iBAAiB,GAAG,KAAK,CAAC,KAAK,GAAG,CAAC;YACtF,KAAK,GAAG,KAAK,CAAC,KAAK,GAAG,MAAM,CAAC,SAAS,GAAG,MAAM,CAAC,gBAAgB,GAAG,KAAK,CAAC,KAAK,GAAG,CAAC;YAClF,SAAS,GAAG,YAAY,GAAG,MAAM,CAAC,gBAAgB,GAAG,KAAK,CAAC,KAAK,GAAG,GAAG,GAAG,MAAM,CAAC,iBAAiB,GAAG,KAAK,CAAC,KAAK,GAAG,GAAG;YACrH,IAAI,GAAG,aAAa,GAAG,MAAM,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,GAAG;YACpD,UAAU,GAAG;AACX,gBAAM,EAAE,MAAM;AACd,eAAK,EAAE,KAAK;AACZ,mBAAS,EAAE,SAAS;AACpB,cAAI,EAAE,IAAI;SACX,CAAC;AACJ,YAAI,MAAM,CAAC,cAAc,KAAK,IAAI,IAAK,KAAK,CAAC,aAAa,IAAI,KAAK,CAAC,aAAa,CAAC,WAAW,KAAK,IAAI,AAAC,EAAE;AACvG,oBAAU,CAAC,eAAe,GAAG,YAAY,GAAG,MAAM,CAAC,KAAK,GAAG,EAAE,GAAG,MAAM,CAAC,gBAAgB,GAAG,KAAK,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC,iBAAiB,GAAG,KAAK,CAAC,KAAK,GAAG,MAAM,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC;SAClL;;AAED,eAAO,UAAU,CAAC;OACnB;;AAED,+BAAyB,EAAE,mCAAS,IAAI,EAAE;AACxC,YAAI,KAAK,GAAG,CAAC,CAAC;YACZ,UAAU,GAAG,EAAE;YACf,WAAW,GAAG,EAAE;YAChB,WAAW,GAAG,SAAd,WAAW,CAAY,KAAK,EAAE,iBAAiB,EAAE;AAC/C,WAAC,CAAC,IAAI,CAAC,KAAK,EAAE,UAAS,IAAI,EAAE;AAC3B,gBAAI,eAAe,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;gBACjD,IAAI;gBAAE,WAAW;gBAAE,YAAY;gBAAE,WAAW,CAAC;AAC/C,gBAAI,eAAe,EAAE;AACnB,0BAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC;AACvD,kBAAI,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC;AACvB,yBAAW,GAAG,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;aAC3D;AACD,uBAAW,GAAG;AACZ,kBAAI,EAAE,IAAI,IAAI,IAAI,CAAC,QAAQ;AAC3B,yBAAW,EAAE,WAAW,IAAI,IAAI;AAChC,wBAAU,EAAE;AACV,qBAAK,EAAE;AACL,+BAAa,EAAE,IAAI,CAAC,OAAO;AAC3B,oBAAE,EAAE,IAAI,CAAC,EAAE;iBACZ;eACF;AACD,gBAAE,EAAE,EAAE,KAAK;aACZ,CAAC;AACF,sBAAU,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AAC7B,gBAAI,iBAAiB,EAAE;AACrB,yBAAW,CAAC,IAAI,CAAC;AACf,oBAAI,EAAE,WAAW,CAAC,EAAE;AACpB,kBAAE,EAAE,iBAAiB,CAAC,EAAE;eACzB,CAAC,CAAC;aACJ;;AAED,gBAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,WAAW,CAAC,IAAI,CAAC,KAAK,EAAE,WAAW,CAAC,CAAC;WAC/E,CAAC,CAAC;SACJ,CAAC;;AAEJ,mBAAW,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;AACpB,eAAO;AACL,eAAK,EAAE,UAAU;AACjB,qBAAW,EAAE,WAAW;SACzB,CAAC;OACH;;AAED,+BAAyB,EAAE,mCAAS,WAAW,EAAE;AAC/C,eAAO,CAAC,CAAC,KAAK,CAAC,8CAA8C,CAAC,WAAW,CAAC,CAAC;OAC5E;;AAED,cAAQ,EAAE,kBAAS,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE;AACpC,YAAI,KAAK,GAAG;AACV,cAAI,EAAE,IAAI;SACX,CAAC;;AAEF,YAAI,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,KAC7B;AACH,cAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,IAAI,GAAG,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;AACtD,cAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,KAAK,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;SACrD;;AAED,YAAI,KAAK,EAAE,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;AAC/B,YAAI,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,EAAE,GAAG,QAAQ,GAAI,EAAE,OAAO,CAAC,GAAG,AAAC,GAAG,OAAO,CAAC;;AAE7E,eAAO,KAAK,CAAC;OACd;;AAED,6BAAuB,EAAE,mCAAW;AAClC,YAAI,IAAI,GAAG,SAAS,CAAC,MAAM,CAAC;;AAE5B,YAAI,IAAI,KAAK,CAAC,EAAE,OAAO,OAAO,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,KACvD,IAAI,IAAI,KAAK,CAAC,EAAE;AACnB,cAAI,OAAO,SAAS,CAAC,CAAC,CAAC,AAAC,KAAK,QAAQ,EAAE,OAAO,OAAO,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,KAC5F,IAAI,QAAO,SAAS,CAAC,CAAC,CAAC,KAAK,QAAQ,CAAA,AAAC,EAAE,OAAO,OAAO,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC;SACzG,MAAM,IAAI,IAAI,KAAK,CAAC,EAAE,OAAO,OAAO,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,GAAG,KAAK,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;OAClG;;AAED,uBAAiB,EAAE;AACjB,UAAE,EAAE;AACF,qBAAW,EAAE,IAAI;SAClB;AACD,UAAE,EAAE;AACF,2BAAiB,EAAE,IAAI;SACxB;AACD,WAAG,EAAE;AACH,wBAAc,EAAE,IAAI;SACrB;AACD,UAAE,EAAE;AACF,qBAAW,EAAE,IAAI;SAClB;AACD,WAAG,EAAE;AACH,2BAAiB,EAAE;AACjB,gBAAI,EAAE,QAAQ;WACf;SACF;AACD,UAAE,EAAE;AACF,kBAAQ,EAAE,IAAI;SACf;OACF;;AAED,WAAK,EAAE,eAAS,EAAE,EAAE;AAClB,eAAO;AACL,YAAE,EAAE,QAAQ,GAAG,EAAE,GAAG,SAAS;SAC9B,CAAC;OACH;;AAED,gBAAU,EAAE,sBAAW;AACrB,YAAI,MAAM,GAAG,EAAE,CAAC;;AAEhB,SAAC,CAAC,IAAI,CAAC,SAAS,EAAE,UAAS,GAAG,EAAE;AAC9B,cAAI,OAAO,GAAG,AAAC,KAAK,QAAQ,EAAE;AAC5B,aAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,UAAS,GAAG,EAAE;AACnC,kBAAI,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,KAAK,EAAE,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAC/F,IAAI,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,KAAK,EAAE,OAAO,CAAC,cAAc,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,KAClG,IAAI,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,MAAM,EAAE,OAAO,CAAC,cAAc,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC,KAC7G,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE,OAAO,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,CAAC;aAChE,CAAC,CAAC;WACJ,MAAM,IAAI,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;AAC1B,kBAAM,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;WAChC;SACF,CAAC,CAAC;;AAEH,eAAO,MAAM,CAAC;OACf;;AAED,oBAAc,EAAE,wBAAS,GAAG,EAAE,MAAM,EAAE,IAAI,EAAE;AAC1C,YAAI,IAAI,GAAG,EAAE,CAAC;AACd,YAAI,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;AACjC,YAAI,GAAG,IAAI,IAAI,UAAU,CAAC;;AAE1B,SAAC,CAAC,IAAI,CAAC,GAAG,EAAE,UAAS,EAAE,EAAE;AACvB,cAAI,CAAC,IAAI,CAAC;AACR,cAAE,EAAE,QAAQ,GAAG,EAAE,GAAG,SAAS;AAC7B,gBAAI,EAAE,IAAI;WACX,CAAC,CAAC;SACJ,CAAC,CAAC;;AAEH,YAAI,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,CAAC,KAAK,IAAI,EAAE,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC,KACrE,MAAM,CAAC,WAAW,GAAG,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;OAC3D;;AAED,4BAAsB,EAAE,gCAAS,GAAG,EAAE,EAAE,EAAE;AACxC,YAAI,cAAc,GAAG,QAAQ,CAAC,KAAK,CAAC,cAAc,CAAC,GAAG,CAAC;YACrD,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;;AAEnC,eAAO,CAAC,CAAC,MAAM,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;OACxC;KACF;QACD,KAAK,CAAC;;AAER,KAAC,CAAC,IAAI,CAAC,CACL,UAAU,EACV,yBAAyB,CAC1B,EAAE,UAAS,aAAa,EAAE;AACzB,aAAO,CAAC,aAAa,GAAG,UAAU,CAAC,GAAG,UAAS,YAAY,EAAE;AAC3D,YAAI,MAAM,GAAG,QAAQ,CAAC,KAAK,CAAC,qBAAqB,CAAC,YAAY,CAAC,CAAC;AAChE,eAAO,YAAW;AAChB,cAAI,IAAI,GAAG,SAAS,CAAC;AACrB,cAAI,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AAC1B,iBAAO,OAAO,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SACjD,CAAC;OACH,CAAC;;AAEF,aAAO,CAAC,aAAa,GAAG,sBAAsB,CAAC,GAAG,UAAS,YAAY,EAAE;AACvE,YAAI,MAAM,GAAG,QAAQ,CAAC,KAAK,CAAC,qBAAqB,CAAC,YAAY,CAAC,CAAC;AAChE,eAAO,YAAW;AAChB,cAAI,IAAI,GAAG,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;cACrC,aAAa,GAAG,IAAI,CAAC,CAAC,CAAC;cACvB,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC;cACd,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,eAAe,CAAC,aAAa,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;;AAE/D,cAAI,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;AACtB,cAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;AACnB,iBAAO,OAAO,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SACjD,CAAC;OACH,CAAC;KACH,CAAC,CAAC;;AAEH,SAAK;eAAS,KAAK;8BAAL,KAAK;;mCAAL,KAAK;;;gBAAL,KAAK;;mBAAL,KAAK;;eACX,gBAAC,UAAU,EAAE,IAAI,EAAE;AACvB,cAAI,OAAO,GAAG,IAAI;cAChB,MAAM,GAAG,OAAO,CAAC,MAAM;cACvB,MAAM,GAAG,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;cACjG,yBAAyB,GAAG,SAA5B,yBAAyB,CAAY,MAAM,EAAE;AAC3C,aAAC,CAAC,IAAI,CAAC,MAAM,EAAE,UAAS,KAAK,EAAE;AAC7B,kBAAI,KAAK,CAAC,cAAc,CAAC,OAAO,CAAC,KAAK,KAAK,EAAE;AAC3C,qBAAK,CAAC,KAAK,GAAG,EAAE,CAAC;eAClB,MAAM,yBAAyB,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;aAC/C,CAAC,CAAC;WACJ;cACD,iCAAiC,GAAG,SAApC,iCAAiC,CAAY,MAAM,EAAE,SAAS,EAAE;;AAE9D,gBAAI,aAAa,GAAG,SAAhB,aAAa,CAAY,KAAK,EAAE;AAChC,qBAAO;AACL,iBAAC,EAAE,CAAC,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA,GAAI,MAAM,CAAC,SAAS,GAAG,MAAM,CAAC,gBAAgB,GAAG,KAAK,CAAC,KAAK;AACzF,iBAAC,EAAE,KAAK,CAAC,CAAC,GAAG,MAAM,CAAC,UAAU,GAAG,MAAM,CAAC,iBAAiB,GAAG,KAAK,CAAC,KAAK;eACxE,CAAC;aACH;gBACD,gBAAgB,GAAG,SAAnB,gBAAgB,CAAY,KAAK,EAAE;AACjC,qBAAO;AACL,iBAAC,EAAE,CAAC,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA,GAAI,MAAM,CAAC,SAAS,GAAG,MAAM,CAAC,gBAAgB,GAAG,KAAK,CAAC,KAAK;AACzF,iBAAC,EAAE,CAAC,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC,MAAM,CAAA,GAAI,MAAM,CAAC,UAAU,GAAG,MAAM,CAAC,iBAAiB,GAAG,KAAK,CAAC,KAAK;eACzF,CAAC;aACH;gBACD,cAAc,GAAG,SAAjB,cAAc,CAAY,KAAK,EAAE;AAC/B,qBAAO;AACL,iBAAC,EAAE,KAAK,CAAC,CAAC,GAAG,MAAM,CAAC,SAAS,GAAG,MAAM,CAAC,gBAAgB,GAAG,KAAK,CAAC,KAAK;AACrE,iBAAC,EAAE,CAAC,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,CAAA,GAAI,MAAM,CAAC,UAAU,GAAG,MAAM,CAAC,iBAAiB,GAAG,KAAK,CAAC,KAAK;eAC7F,CAAC;aACH;gBACD,eAAe,GAAG,SAAlB,eAAe,CAAY,KAAK,EAAE;AAChC,qBAAO;AACL,iBAAC,EAAE,CAAC,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC,KAAK,CAAA,GAAI,MAAM,CAAC,SAAS,GAAG,MAAM,CAAC,gBAAgB,GAAG,KAAK,CAAC,KAAK;AACrF,iBAAC,EAAE,CAAC,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,CAAA,GAAI,MAAM,CAAC,UAAU,GAAG,MAAM,CAAC,iBAAiB,GAAG,KAAK,CAAC,KAAK;eAC7F,CAAC;aACH;gBACD,WAAW,GAAG,SAAd,WAAW,CAAY,KAAK,EAAE;AAC5B,qBAAO;AACL,mBAAG,EAAE,aAAa,CAAC,KAAK,CAAC;AACzB,sBAAM,EAAE,gBAAgB,CAAC,KAAK,CAAC;AAC/B,oBAAI,EAAE,cAAc,CAAC,KAAK,CAAC;AAC3B,qBAAK,EAAE,eAAe,CAAC,KAAK,CAAC;eAC9B,CAAC;aACH;gBACD,QAAQ,GAAG;AACT,iBAAG,EAAE,QAAQ;aACd;gBACD,0BAA0B,GAAG,SAA7B,0BAA0B,CAAY,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE;AAC9D,kBAAI,CAAC,KAAK,KAAK,QAAQ,IAAI,KAAK,KAAK,MAAM,IAAI,KAAK,KAAK,KAAK,CAAA,IAAK,KAAK,KAAK,OAAO,EAAE;AACpF,oBAAI,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,EAAE,OAAO,KAAK,CAAC;eACnC,MAAM,IAAI,CAAC,KAAK,KAAK,QAAQ,IAAI,KAAK,KAAK,OAAO,IAAI,KAAK,KAAK,KAAK,CAAA,IAAK,KAAK,KAAK,MAAM,EAAE;AAC3F,oBAAI,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,EAAE,OAAO,KAAK,CAAC;eACnC,MAAM,IAAI,CAAC,KAAK,KAAK,QAAQ,IAAI,KAAK,KAAK,OAAO,IAAI,KAAK,KAAK,MAAM,CAAA,IAAK,KAAK,KAAK,KAAK,EAAE;AAC3F,oBAAI,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,EAAE,OAAO,KAAK,CAAC;eACnC,MAAM,IAAI,CAAC,KAAK,KAAK,MAAM,IAAI,KAAK,KAAK,OAAO,IAAI,KAAK,KAAK,KAAK,CAAA,IAAK,KAAK,KAAK,QAAQ,EAAE;AAC3F,oBAAI,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,EAAE,OAAO,KAAK,CAAC;eACnC;AACD,qBAAO,IAAI,CAAC;aACb;gBACD,qBAAqB,GAAG,SAAxB,qBAAqB,CAAY,IAAI,EAAE,IAAI,EAAE;AAC3C,kBAAI,EAAE,GAAG,SAAL,EAAE,CAAY,GAAG,EAAE;AACnB,uBAAO,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;eACzB;kBACD,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AACrE,kBAAI,WAAW,GAAG,QAAQ,CAAC,GAAG,EAAE;AAC9B,wBAAQ,CAAC,GAAG,GAAG,WAAW,CAAC;AAC3B,wBAAQ,CAAC,IAAI,GAAG,IAAI,CAAC;AACrB,wBAAQ,CAAC,EAAE,GAAG,IAAI,CAAC;AACnB,uBAAO,IAAI,CAAC;eACb,MAAM,OAAO,KAAK,CAAC;aACrB;gBACD,QAAQ,GAAG,SAAX,QAAQ,CAAY,EAAE,EAAE;AACtB,eAAC,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,QAAQ,EAAE,MAAM,EAAE,OAAO,CAAC,EAAE,UAAS,IAAI,EAAE;AACxD,kBAAE,CAAC,IAAI,CAAC,CAAC;eACV,CAAC,CAAC;aACJ;gBACD,eAAe,GAAG,SAAlB,eAAe,CAAY,KAAK,EAAE,KAAK,EAAE;AACvC,kBAAI,MAAM,GAAG,KAAK,CAAC;AACnB,eAAC,CAAC,IAAI,CAAC,CACL,CAAC,KAAK,EAAE,KAAK,CAAC,EACd,CAAC,KAAK,EAAE,KAAK,CAAC,CACf,EAAE,UAAS,KAAK,EAAE;AACjB,oBAAI,KAAK,CAAC,CAAC,CAAC,KAAK,KAAK,IAAI,KAAK,CAAC,CAAC,CAAC,KAAK,QAAQ,EAAE,MAAM,GAAG,IAAI,CAAC,KAC1D,IAAI,KAAK,CAAC,CAAC,CAAC,KAAK,MAAM,IAAI,KAAK,CAAC,CAAC,CAAC,KAAK,OAAO,EAAE,MAAM,GAAG,IAAI,CAAC;eACrE,CAAC,CAAC;AACH,qBAAO,MAAM,CAAC;aACf;gBACD,wBAAwB,GAAG,SAA3B,wBAAwB,CAAY,wBAAwB,EAAE;AAC5D,sBAAQ,CAAC,UAAS,KAAK,EAAE;AACvB,wBAAQ,CAAC,UAAS,KAAK,EAAE;AACvB,sBAAI,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC,kBAAkB,CAAC,EAAE,MAAM,CAAC,kBAAkB,GAAG,EAAE,CAAC;AAC7E,sBAAI,KAAK,KAAK,KAAK,IAAI,MAAM,CAAC,kBAAkB,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,kBAAkB,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;AACnH,wBAAI,AAAC,wBAAwB,KAAK,KAAK,IAAI,eAAe,CAAC,KAAK,EAAE,KAAK,CAAC,KAAK,KAAK,IAAK,eAAe,CAAC,KAAK,EAAE,KAAK,CAAC,EAAE;AACpH,0BAAI,0BAA0B,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,SAAS,CAAC,KAAK,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC,EAAE;AAChF,+BAAO,GAAG,qBAAqB,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;AACpE,4BAAI,OAAO,KAAK,IAAI,EAAE;AACpB,kCAAQ,CAAC,KAAK,GAAG,KAAK,CAAC;AACvB,kCAAQ,CAAC,KAAK,GAAG,KAAK,CAAC;yBACxB;uBACF;qBACF;mBACF;iBACF,CAAC,CAAC;eACJ,CAAC,CAAC;aACJ;gBACD,MAAM,GAAG,SAAS,CAAC,KAAK;gBACxB,SAAS,GAAG,WAAW,CAAC,MAAM,CAAC;gBAC/B,SAAS,GAAG,WAAW,CAAC,MAAM,CAAC;gBAC/B,OAAO,CAAC;;AAGV,oCAAwB,CAAC,IAAI,CAAC,CAAC;AAC/B,gBAAI,OAAO,KAAK,IAAI,EAAE,wBAAwB,CAAC,KAAK,CAAC,CAAC;;AAEtD,kBAAM,CAAC,kBAAkB,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;AAC/C,kBAAM,CAAC,kBAAkB,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;AAC/C,mBAAO,QAAQ,CAAC;WAEjB;cACD,cAAc,GAAG,SAAjB,cAAc,CAAY,UAAU,EAAE;AACpC,gBAAI,SAAS,GAAG,UAAU,CAAC,KAAK,CAAC,SAAS;gBACxC,aAAa,GAAG,UAAU,CAAC,KAAK,CAAC,aAAa;gBAC9C,WAAW;gBAAE,YAAY;gBAAE,gBAAgB;gBAAE,QAAQ;gBAAE,cAAc,CAAC;;AAExE,aAAC,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,UAAS,gBAAgB,EAAE;AACxD,8BAAgB,GAAG,iCAAiC,CAAC,UAAU,CAAC,KAAK,EAAE,gBAAgB,CAAC,CAAC;;AAEzF,sBAAQ,GAAG,EAAE,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;AACzD,0BAAY,GAAG,UAAU,CAAC,KAAK,CAAC,EAAE,GAAG,GAAG,GAAG,gBAAgB,CAAC,KAAK,CAAC,EAAE,CAAC;AACrE,yBAAW,GAAG,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;AAC7D,kBAAI,gBAAgB,CAAC,IAAI,IAAI,gBAAgB,CAAC,EAAE,EAAE;AAChD,8BAAc,GAAG,WAAW,CAAC,MAAM,CAAC,MAAM,CAAC,CACxC,IAAI,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC,gBAAgB,CAAC,IAAI,EAAE,gBAAgB,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;AACvE,wBAAM,EAAE,MAAM;AACd,sBAAI,EAAE,MAAM;iBACb,CAAC,CAAC;;AAEL,oBAAI,gBAAgB,CAAC,IAAI,KAAK,QAAQ,EAAE,cAAc,CAAC,KAAK,CAAC,kBAAkB,EAAE,MAAM,CAAC,CAAC;;AAEzF,2BAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC;AAChC,oBAAE,EAAE,gBAAgB,CAAC,EAAE,CAAC,CAAC;AACzB,oBAAE,EAAE,gBAAgB,CAAC,EAAE,CAAC,CAAC;AACzB,mBAAC,EAAE,CAAC;AACJ,sBAAI,EAAE,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC;iBACzC,CAAC,CAAC,KAAK,CAAC;AACP,wBAAM,EAAE,MAAM;iBACf,CAAC,CAAC;;AAEH,6BAAa,CAAC,WAAW,GAAG,aAAa,CAAC,WAAW,IAAI,EAAE,CAAC;AAC5D,6BAAa,CAAC,WAAW,CAAC,IAAI,CAAC;AAC7B,oBAAE,EAAE,WAAW;AACf,oBAAE,EAAE,YAAY;iBACjB,CAAC,CAAC;eACJ;aACF,CAAC,CAAC;WACJ;cACD,oBAAoB,GAAG,SAAvB,oBAAoB,CAAY,MAAM,EAAE;AACtC,kBAAM,GAAG,MAAM,IAAI,IAAI,CAAC;;AAExB,aAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,UAAS,KAAK,EAAE;AACrC,qBAAO,KAAK,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;aAC5C,CAAC,CAAC,GAAG,CAAC,UAAS,KAAK,EAAE;AACrB,kBAAI,iBAAiB,GAAG,EAAE;kBACxB,iBAAiB;kBAAE,gBAAgB;kBAAE,kBAAkB,CAAC;AAC1D,eAAC,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,UAAS,cAAc,EAAE;AACjD,gCAAgB,GAAG,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,GAAG,cAAc,CAAC,EAAE,GAAG,cAAc,CAAC;AACnF,kCAAkB,GAAG,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,cAAc,CAAC,IAAI,GAAG,cAAc,CAAC,IAAI,GAAG,UAAU,CAAC;;AAE1G,iCAAiB,GAAG,CAAC,CAAC,KAAK,CAAC,MAAM,EAAE;AAClC,oBAAE,EAAE,gBAAgB;iBACrB,CAAC,CAAC,CAAC,CAAC,CAAC;;AAEN,iCAAiB,CAAC,IAAI,CAAC;AACrB,uBAAK,EAAE,iBAAiB;AACxB,sBAAI,EAAE,kBAAkB;iBACzB,CAAC,CAAC;eACJ,CAAC,CAAC;AACH,qBAAO;AACL,qBAAK,EAAE,KAAK;AACZ,2BAAW,EAAE,iBAAiB;eAC/B,CAAC;aACH,CAAC,CAAC,IAAI,CAAC,UAAS,UAAU,EAAE;AAC3B,4BAAc,CAAC,UAAU,CAAC,CAAC;aAC5B,CAAC,CAAC,KAAK,EAAE,CAAC;;AAEX,aAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,UAAS,KAAK,EAAE;AACrC,qBAAO,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;aAC/B,CAAC,CAAC,IAAI,CAAC,UAAS,KAAK,EAAE;AACtB,kCAAoB,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;aACnC,CAAC,CAAC,KAAK,EAAE,CAAC;WACZ;cACD,eAAe,GAAG,SAAlB,eAAe,GAAc;AAC3B,gBAAI,qBAAqB,GAAG,SAAxB,qBAAqB,CAAY,KAAK,EAAE;AACxC,qBAAO,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC;aAC/B;gBACD,WAAW,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,qBAAqB,CAAC;gBAChD,WAAW,GAAG,qBAAqB,CAAC,WAAW,CAAC;gBAChD,cAAc,GAAG,WAAW,GAAG,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC;;AAExD,eAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,cAAc,CAAC,CAAC;WACpC;cACD,iBAAiB,GAAG,SAApB,iBAAiB,GAAc;AAC7B,gBAAI,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,KAAK,CAAC;;AAE5D,mBAAO,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC;WAClE;cACD,gCAAgC,GAAG,SAAnC,gCAAgC,CAAY,UAAU,EAAE;AACtD,gBAAI,UAAU,CAAC,aAAa,EAAE;AAC5B,kBAAI,WAAW,GAAG,UAAU,CAAC,aAAa,CAAC,WAAW,CAAC;AACvD,kBAAI,WAAW,EAAE;AACf,iBAAC,CAAC,IAAI,CAAC,WAAW,EAAE,UAAS,UAAU,EAAE;AACvC,4BAAU,CAAC,EAAE,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;iBACnC,CAAC,CAAC;eACJ;aACF;WACF;cACD,6CAA6C,GAAG,SAAhD,6CAA6C,CAAY,UAAU,EAAE;AACnE,gBAAI,UAAU,CAAC,aAAa,EAAE;AAC5B,kBAAI,WAAW,GAAG,UAAU,CAAC,aAAa,CAAC,WAAW,CAAC;AACvD,kBAAI,WAAW,EAAE;AACf,iBAAC,CAAC,IAAI,CAAC,WAAW,EAAE,UAAS,UAAU,EAAE;AACvC,sBAAI,UAAU,CAAC,EAAE,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE,UAAU,CAAC,EAAE,CAAC,KAAK,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;iBACtF,CAAC,CAAC;eACJ;aACF;WACF;cACD,0BAA0B,GAAG,SAA7B,0BAA0B,CAAY,IAAI,EAAE;AAC1C,gBAAI,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;AAChC,gBAAI,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;AACpC,gBAAI,GAAG,CAAC,CAAC,KAAK,CAAC,yBAAyB,CAAC,IAAI,EAAE,UAAS,QAAQ,EAAE,QAAQ,EAAE,SAAS,EAAE;AACrF,kBAAI,QAAQ,KAAK,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,KAAK,EAAE,OAAO,SAAS,CAAC,KACpE,OAAO,WAAW,CAAC;aACzB,CAAC,CAAC;AACH,mBAAO,IAAI,CAAC;WACb;cACD,qBAAqB,GAAG,SAAxB,qBAAqB,CAAY,MAAM,EAAE,SAAS,EAAE,aAAa,EAAE;AACjE,gBAAI,SAAS,GAAG,MAAM,CAAC,SAAS;gBAC9B,UAAU,GAAG,MAAM,CAAC,UAAU;gBAC9B,MAAM;gBAAE,SAAS;gBAAE,SAAS;gBAAE,SAAS,CAAC;;AAE1C,kBAAM,GAAG,MAAM,IAAI,IAAI,CAAC;AACxB,qBAAS,GAAG,SAAS,IAAI,GAAG,CAAC;;AAE7B,aAAC,CAAC,IAAI,CAAC,MAAM,EAAE,UAAS,KAAK,EAAE,UAAU,EAAE;;AAGzC,kBAAI,cAAc,GAAG,mBAAmB,GAAG,QAAQ,EAAE;kBACnD,OAAO,CAAC;;AAEV,oBAAM,GAAG,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;AAClC,yBAAS,EAAE,YAAY,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,GAAG,SAAS,CAAC,GAAG,IAAI,GAAG,KAAK,CAAC,CAAC,GAAG,UAAU,GAAG,GAAG;AACzF,uBAAO,EAAE,YAAY;AACrB,kBAAE,EAAE,cAAc;eACnB,CAAC,CAAC;;AAEH,mBAAK,CAAC,MAAM,GAAG,MAAM,CAAC;AACtB,mBAAK,CAAC,SAAS,GAAG,SAAS,CAAC;AAC5B,mBAAK,CAAC,aAAa,GAAG,aAAa,CAAC;;AAEpC,uBAAS,GAAG,OAAO,CAAC,uBAAuB,CAAC,KAAK,CAAC,CAAC;AACnD,uBAAS,GAAG,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAC/B,kBAAI,KAAK,CAAC,WAAW,KAAK,IAAI,EAAE;AAC9B,yBAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC;AAC5B,mBAAC,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC;AAClB,0BAAM,EAAE,SAAS,CAAC,MAAM;AACxB,yBAAK,EAAE,SAAS,CAAC,KAAK;AACtB,gCAAY,EAAE,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC;mBAC7C,CAAC;AACF,2BAAS,EAAE,SAAS,CAAC,SAAS;AAC9B,sBAAI,EAAE,SAAS,CAAC,IAAI;AACpB,wBAAM,EAAE,MAAM;iBACf,CAAC,CAAC;eACJ,MAAM;AACL,yBAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC;AAC5B,uBAAK,EAAE,SAAS,CAAC,KAAK;AACtB,2BAAS,EAAE,SAAS,CAAC,SAAS;AAC9B,wBAAM,EAAE,SAAS,CAAC,MAAM;AACxB,sBAAI,EAAE,SAAS,CAAC,IAAI;iBACrB,CAAC,CAAC,KAAK,CAAC;AACP,wBAAM,EAAE,kCAAkC;iBAC3C,CAAC,CAAC;eACJ;;AAGD,uBAAS,GAAG,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC;AACxC,yBAAS,EAAE,SAAS,CAAC,SAAS;AAC9B,iBAAC,EAAE,KAAK,CAAC,KAAK;AACd,iBAAC,EAAE,KAAK,CAAC,MAAM,GAAG,UAAU,GAAG,CAAC,GAAG,KAAK,CAAC,KAAK,GAAG,EAAE;eACpD,CAAC,CAAC,IAAI,CAAC,YAAW;AACjB,uBAAO,CAAC,CAAC,KAAK,CAAC,sBAAsB,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;eACnD,CAAC,CAAC;;AAGH,mBAAK,CAAC,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC;;AAE5B,qBAAO,CAAC,qBAAqB,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;;AAEhD,uBAAS,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,YAAY,CAAC,KAAK,CAAC,KAAK,GAAG,SAAS,GAAG,MAAM,CAAC,gBAAgB,GAAG,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC;;AAExG,kBAAI,SAAS,CAAC,eAAe,EAAE;AAC7B,uBAAO,GAAG,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;AACnC,yBAAO,EAAE,QAAQ;AACjB,2BAAS,EAAE,SAAS,CAAC,eAAe;iBACrC,CAAC,CAAC;AACH,uBAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC;AAC5B,mBAAC,EAAE,EAAE;AACL,oBAAE,EAAE,CAAC;AACL,oBAAE,EAAE,CAAC,CAAC;AACN,sBAAI,EAAE,MAAM,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC;AAC7B,gCAAc,EAAE,CAAC;AACjB,wBAAM,EAAE,MAAM;AACd,wBAAM,EAAE,MAAM;iBACf,CAAC,CAAC;AACH,uBAAO,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CACxC,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;eACzB;;AAED,kBAAI,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;AAC1B,qCAAqB,CAAC,KAAK,CAAC,KAAK,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;eACnD;aACF,CAAC,CAAC;WACJ;cACD,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,WAAW,CAAC;AACtB,kBAAM,EAAE,eAAe;WACxB,CAAC,CAAC;;AAEL,iBAAO,CAAC,aAAa,GAAG,UAAS,IAAI,EAAE;AACrC,gBAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;AAChF,gBAAI,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC;AAC3B,oBAAM,EAAE,oBAAoB;aAC7B,CAAC,CAAC;WACJ,CAAC;AACF,iBAAO,CAAC,cAAc,GAAG,YAAW;AAClC,gBAAI,WAAW,GAAG,SAAd,WAAW,CAAY,KAAK,EAAE;AAChC,eAAC,CAAC,IAAI,CAAC,KAAK,EAAE,UAAS,IAAI,EAAE;AAC3B,oBAAI,CAAC,MAAM,CAAC,KAAK,CAAC;AAChB,gCAAc,EAAE,KAAK;iBACtB,CAAC,CAAC;AACH,oBAAI,IAAI,CAAC,QAAQ,EAAE;AACjB,sBAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;iBACzD;AACD,oBAAI,IAAI,CAAC,KAAK,EAAE,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;eACzC,CAAC,CAAC;aACJ,CAAC;AACF,uBAAW,CAAC,IAAI,CAAC,CAAC;WACnB,CAAC;;AAEF,WAAC,CAAC,IAAI,CAAC,MAAM,EAAE,UAAS,KAAK,EAAE,KAAK,EAAE;AACpC,aAAC,CAAC,GAAG,CAAC,yBAAyB,CAAC,GAAG,EAAE,QAAQ,GAAG,KAAK,EAAE,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC;WACzE,CAAC,CAAC;;AAEH,aAAG,CAAC,IAAI,CAAC,OAAO,EAAE,gBAAgB,CAAC,CAAC;;AAEpC,cAAI,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,KAAK,EAAE,IAAI,GAAG,CAAC,IAAI,CAAC,CAAC;AAC7C,WAAC,CAAC,GAAG,CAAC,cAAc,CAAC,OAAO,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;;AAEzC,mCAAyB,CAAC,IAAI,CAAC,CAAC;AAChC,2BAAiB,EAAE,CAAC;AACpB,iBAAO,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;AACjC,+BAAqB,EAAE,CAAC;AACxB,8BAAoB,EAAE,CAAC;AACvB,yBAAe,EAAE,CAAC;AAClB,iBAAO,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;SACrC;;;eAEoB,+BAAC,MAAM,EAAE,cAAc,EAAE;AAC5C,cAAI,OAAO,GAAG,IAAI,CAAC;AACnB,WAAC,CAAC,IAAI,CAAC,MAAM,EAAE,UAAS,KAAK,EAAE;AAC7B,mBAAO,CAAC,0BAA0B,CAAC,KAAK,CAAC,CAAC;AAC1C,mBAAO,CAAC,mBAAmB,CAAC,KAAK,EAAE,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;AACxD,gBAAI,cAAc,EAAE;AAClB,qBAAO,CAAC,wBAAwB,CAAC,cAAc,EAAE,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;AACtE,qBAAO,CAAC,yBAAyB,CAAC,KAAK,EAAE,cAAc,CAAC,MAAM,EAAE,cAAc,CAAC,CAAC;aACjF;AACD,gBAAI,KAAK,CAAC,KAAK,IAAI,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,OAAO,CAAC,qBAAqB,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;WAC9F,CAAC,CAAC;SACJ;;;aA1XW,KAAK;OAAS,CAAC,CAAC,OAAO,CA2XpC,CAAC;;AAEF,QAAI,KAAK,CAAC;AACR,UAAI,EAAE,OAAO;AACb,aAAO,EAAE,OAAO;KACjB,CAAC,CAAC;GACF,CAAA,EAAG,CAAC,CAAC,YAAU,EAAI,CAAA,EAAG,CAAC;;AAEtB,OAAK,CAAC,QAAQ,GAAG,QAAQ,CAAC;CAC3B,CAAA,CAAE,MAAM,CAAC,CAAC","file":"dist/diagrams.js","sourcesContent":["(function(scope) {\n  var diagrams = {},\n    d = diagrams;\n  \n  (function() {})();(function(){// This file is always concatenated at the beginning of the library.\n// Maybe it would be worth to separate public and private utils (relatively to the external clients)\n\nd.utils = {};\nd.utils.d3DefaultReturnFn = function(props, preffix, suffix) {\n  props = props.split('.');\n  return function(d) {\n    var position = _.reduce(props, function(memo, property) {\n      return memo[property];\n    }, d);\n    return (preffix || suffix) ? preffix + position + suffix : position;\n  };\n};\nd.utils.applySimpleTransform = function(el) {\n  el.attr('transform', function(d) {\n    return \"translate(\" + d.x + \",\" + d.y + \")\";\n  });\n};\nd.utils.positionFn = function(props, offset) {\n  offset = offset || 0;\n  return d.utils.d3DefaultReturnFn(props, 0, offset);\n};\nd.utils.textFn = function(props, preffix, suffix) {\n  preffix = preffix || '';\n  suffix = suffix || '';\n  return d.utils.d3DefaultReturnFn(props, preffix, suffix);\n};\nd.utils.runIfReady = function(fn) {\n  if (document.readyState === 'complete') fn();\n  else window.onload = fn;\n};\nd.utils.replaceCodeFragmentOfText = function(text, predicate) {\n  var codeRegex = /``([\\s\\S]*?)``([\\s\\S]*?)``/g,\n    allMatches = text.match(codeRegex);\n\n  return text.replace(codeRegex, function(matchStr, language, codeBlock) {\n    return predicate(matchStr, language, codeBlock, allMatches);\n  });\n};\nd.utils.formatTextFragment = function(text) {\n  var tagsToEncode = ['strong', 'code', 'pre', 'br', 'span', 'p'],\n    encodeOrDecodeTags = function(action, tag) {\n      var encodeOrDecodeTagsWithAction = _.partial(encodeOrDecodeTags, action),\n        beginningTagArr = ['<' + tag + '(.*?)>', '<' + tag + '$1>', tag + 'DIAGSA(.*?)DIAGSB' + tag + 'DIAGSC', tag + 'DIAGSA$1DIAGSB' + tag + 'DIAGSC'],\n        endingTagReal = '</' + tag + '>',\n        endingTagFake = tag + 'ENDREPLACEDDIAGRAMS',\n        endingTagArr = [endingTagReal, endingTagReal, endingTagFake, endingTagFake],\n        replaceText = function(from, to) {\n          text = text.replace(new RegExp(from, 'g'), to);\n        };\n\n      if (_.isArray(tag)) _.each(tag, encodeOrDecodeTagsWithAction);\n      else {\n        _.each([beginningTagArr, endingTagArr], function(arr) {\n          if (action === 'encode') replaceText(arr[0], arr[3]);\n          else if (action === 'decode') replaceText(arr[2], arr[1]);\n        });\n      }\n    };\n  text = d.utils.replaceCodeFragmentOfText(text, function(matchStr, language, code, allMatches) {\n    var lastMatch = (matchStr === _.last(allMatches));\n    return '<pre' + (lastMatch ? ' class=\"last-code-block\" ' : '') + '><code>' + hljs.highlight(language, code).value + '</pre></code>';\n  });\n\n  encodeOrDecodeTags('encode', tagsToEncode);\n  text = text.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  encodeOrDecodeTags('decode', tagsToEncode);\n\n  return text;\n};\nd.utils.codeBlockOfLanguageFn = function(language, commentsSymbol) {\n  commentsSymbol = commentsSymbol || '';\n  return function(codeBlock, where, withInlineStrs) {\n    if (withInlineStrs === true) codeBlock = commentsSymbol + \" ...\\n\" + codeBlock + \"\\n\" + commentsSymbol + \" ...\";\n    if (_.isString(where)) codeBlock = commentsSymbol + ' @' + where + \"\\n\" + codeBlock;\n    return '``' + language + '``' + codeBlock + '``';\n  };\n};\n// This function is created to be able to reference it in the diagrams\nd.utils.wrapInParagraph = function(text) {\n  return '<p>' + text + '</p>';\n};\n\nd.utils.composeWithEventEmitter = function(constructor) {\n  var _subjects = [],\n    createName = function(name) {\n      return '$' + name;\n    };\n\n  constructor.prototype.emit = function(name, data) {\n    var fnName = createName(name);\n    _subjects[fnName] || (_subjects[fnName] = new Rx.Subject());\n    _subjects[fnName].onNext(data);\n  };\n\n  constructor.prototype.listen = function(name, handler) {\n    var fnName = createName(name);\n    _subjects[fnName] || (_subjects[fnName] = new Rx.Subject());\n    return _subjects[fnName].subscribe(handler);\n  };\n\n  constructor.prototype.dispose = function() {\n    var subjects = _subjects;\n    for (var prop in subjects) {\n      if ({}.hasOwnProperty.call(subjects, prop)) {\n        subjects[prop].dispose();\n      }\n    }\n\n    _subjects = {};\n  };\n};\n\nd.utils.createAnEventEmitter = function() {\n  var constructor = function EventEmitter() {};\n\n  d.utils.composeWithEventEmitter(constructor);\n\n  return new constructor();\n};\n\nd.utils.generateATextDescriptionStr = function(text, description) {\n  return '<strong>' + text + '</strong>' + (description ? '<br>' + description : '');\n};\n\nd.utils.formatShortDescription = function(text) {\n  text = text.replace(/<p>/g, '');\n  text = text.replace(/<br>/g, ' ');\n  text = text.replace(/<\\/p>/g, '. ');\n  text = d.utils.replaceCodeFragmentOfText(text, function(matchStr, language, codeBlock) {\n    if (matchStr === text && /\\n/.test(matchStr) === false) return codeBlock;\n    else return ' <CODE...>';\n  });\n  return text;\n};\n\nd.utils.dataFromGeneralToSpecificForATreeStructureType = function(generalData) {\n  // FPN: Find Parent Node\n  var FPNRecursiveFailed = false,\n    itemsIdToItemsMap = {},\n    nodesData = {},\n    findParentNodeFn = function() {\n      var itemsChecked,\n        itemsIdToFromConnectionMap = {},\n        FPNRecursiveFn = function(item) {\n          var connection, parentItemId, parentItem;\n          if (itemsChecked.indexOf(item) > -1) {\n            FPNRecursiveFailed = true;\n            return;\n          } else itemsChecked.push(item);\n          if (_.isUndefined(itemsIdToFromConnectionMap[item.id]) === false) {\n            connection = itemsIdToFromConnectionMap[item.id];\n          } else {\n            connection = _.where(generalData.connections, {\n              from: item.id\n            });\n            itemsIdToFromConnectionMap[item.id] = connection;\n          }\n\n          if (connection.length === 0) {\n            if (parentNode) {\n              if (parentNode.id !== item.id) FPNRecursiveFailed = true;\n            } else parentNode = item;\n          } else if (connection.length === 1) {\n            parentItemId = connection[0].to;\n            if (_.isUndefined(itemsIdToItemsMap[parentItemId]) === false) {\n              parentItem = itemsIdToItemsMap[parentItemId];\n            } else {\n              parentItem = _.where(generalData.items, {\n                id: parentItemId\n              })[0];\n              itemsIdToItemsMap[parentItemId] = parentItem;\n            }\n            FPNRecursiveFn(parentItem);\n          } else FPNRecursiveFailed = true;\n        };\n\n      _.each(generalData.items, function(item) {\n        if (FPNRecursiveFailed === false) {\n          itemsChecked = [];\n          itemsIdToItemsMap[item.id] = item;\n          FPNRecursiveFn(item);\n        }\n      });\n    },\n    buildNodesDataRecursiveFn = function(transformedData, item) {\n      var text, children;\n\n      transformedData.id = item.id;\n      text = item.name;\n      if (item.description) text += ': ' + item.description;\n      transformedData.text = text;\n\n      children = _.where(generalData.connections, {\n        to: item.id\n      });\n      if (children.length > 0) {\n        transformedData.items = [];\n        _.each(children, function(child) {\n          transformedData.items.push({});\n          buildNodesDataRecursiveFn(_.last(transformedData.items), itemsIdToItemsMap[child.from]);\n        });\n      }\n    },\n    parentNode;\n\n  findParentNodeFn();\n  if (FPNRecursiveFailed) {\n    alert('The data structure is not suitable for this diagram')\n    return [];\n  } else {\n    buildNodesDataRecursiveFn(nodesData, parentNode);\n    return nodesData;\n  }\n};\n})();(function(){var defaultDiagramConfiguration = {},\n  createdDiagramsMaxId = 0;\n\nd.diagramsRegistry = [];\n\nd.Diagram = class Diagram {\n  static convertDiagram(creationId, toDiagramType) {\n    var item = d.Diagram.getRegistryItemWithCreationId(creationId),\n      newArgs = item.data.slice(1),\n      generalData, specificData;\n\n    generalData = item.diagram.dataFromSpecificToGeneral.apply({}, newArgs);\n    specificData = d[toDiagramType].dataFromGeneralToSpecific.apply({}, [generalData]);\n\n    d.events.emit('diagram-to-transform', item.diagram);\n\n    d3.select('svg').remove();\n    d3.selectAll('input.diagrams-diagram-button').remove();\n    d[toDiagramType].apply(item.diagram, [specificData]);\n  }\n\n  static addDivBeforeSvg() {\n    var body = d3.select('body'),\n      div = body.insert('div', 'svg');\n\n    div.appendButtonToDiv = function(cls, value, onClickFn) {\n      div.append('input').attr({\n        type: 'button',\n        'class': cls + ' diagrams-diagram-button btn btn-default',\n        value: value,\n        onclick: onClickFn\n      });\n    };\n\n    return div;\n  }\n\n  static getRegistryItemWithCreationId(creationId) {\n    var items = _.where(d.diagramsRegistry, {\n      id: creationId\n    });\n\n    return (items.length === 1) ? items[0] : null;\n  }\n\n  static getDataWithCreationId(creationId) {\n    var item = d.Diagram.getRegistryItemWithCreationId(creationId);\n\n    return (item) ? item.data : null;\n  }\n\n  constructor(opts) {\n    var diagram = this,\n      prototype = Object.getPrototypeOf(diagram);\n\n    diagram.name = opts.name;\n    diagram._configuration = diagram.configuration || {};\n\n    _.each(Object.keys(opts.helpers), function(helperName) {\n      if (_.isFunction(opts.helpers[helperName])) {\n        opts.helpers[helperName] = _.bind(opts.helpers[helperName], diagram);\n      }\n    });\n    _.merge(diagram._configuration, defaultDiagramConfiguration);\n    _.defaults(prototype, opts.helpers);\n\n    diagram.register();\n  }\n\n  addMouseListenersToEl(el, data) {\n    var diagram = this,\n      emitFn = function(d3Event, emitedEvent) {\n        emitedEvent = emitedEvent || d3Event;\n        el.on(d3Event, function() {\n          diagram.emit(emitedEvent, emitContent);\n        });\n      },\n      emitContent = {\n        el: el,\n        data: data\n      };\n\n    emitFn('mouseleave');\n    emitFn('mouseenter');\n    emitFn('click', 'itemclick');\n  }\n\n  config(opts, optValue) {\n    var argsLength = arguments.length,\n      optsType = typeof(opts),\n      optsKey;\n\n    if (argsLength === 0) return this._configuration;\n    else if (argsLength === 1) {\n      if (_.isFunction(optsType)) optsKey = opts();\n      else if (_.isString(opts)) optsKey = opts;\n      else if (_.isObject(opts)) {\n        for (let key in opts) {\n          this.config(key, opts[key]);\n        }\n        return opts;\n      }\n      return this._configuration[optsKey];\n    } else if (argsLength === 2) {\n      this._configuration[opts] = optValue;\n      this.setToLocalStorage(opts, optValue);\n      return optValue;\n    }\n  }\n\n  configCheckingLocalStorage(key, defaultValue) {\n    var diagram = this,\n      finalValue = diagram.getFromLocalStorage(key, defaultValue);\n\n    diagram.config(key, finalValue);\n  }\n\n  generateLocalStorageKeyPreffix(originalKey) {\n    return 'diagramsjs-' + originalKey;\n  }\n\n  getFromLocalStorage(originalKey, defaultValue) {\n    var diagram = this,\n      finalValue = defaultValue;\n\n    if (localStorage && localStorage.getItem) {\n      finalValue = localStorage.getItem(diagram.generateLocalStorageKeyPreffix(originalKey)) || defaultValue;\n      if (finalValue === 'false') finalValue = false;\n      else if (finalValue === 'true') finalValue = true;\n    }\n    return finalValue;\n  }\n\n  setToLocalStorage(originalKey, value) {\n    var diagram = this;\n    if (localStorage && localStorage.setItem) {\n      return localStorage.setItem(diagram.generateLocalStorageKeyPreffix(originalKey), value);\n    }\n  }\n\n  generateEmptyRelationships(item) {\n    item.relationships = {};\n    item.relationships.dependants = [];\n    item.relationships.dependencies = [];\n  }\n\n  addDependantRelationship(item, el, data) {\n    item.relationships.dependants.push(this.generateRelationship(el, data));\n  }\n\n  addSelfRelationship(item, el, data) {\n    item.relationships.self = this.generateRelationship(el, data);\n  }\n\n  addDependencyRelationship(item, el, data) {\n    item.relationships.dependencies.push(this.generateRelationship(el, data));\n  }\n\n  generateRelationship(el, data) {\n    return {\n      el: el,\n      data: data\n    };\n  }\n\n  getAllRelatedItemsOfItem(item, relationshipType) {\n    var diagram = this,\n      relatedItems = [],\n      recursiveFn = function(relatedItemData, depth) {\n        _.each(relatedItemData.relationships[relationshipType], function(relatedItemChild) {\n          if (depth < 100) {\n            if (relatedItems.indexOf(relatedItemChild) < 0 && relatedItemChild.data !== relatedItemData) { // Handle circular loops\n              relatedItems.push(relatedItemChild);\n              recursiveFn(relatedItemChild.data, depth + 1);\n            }\n          }\n        });\n      },\n      returnObj;\n\n    if (relationshipType) {\n      recursiveFn(item, 0);\n      return relatedItems;\n    } else {\n      returnObj = {};\n      _.each(['dependants', 'dependencies'], function(relationshipName) {\n        returnObj[relationshipName] = diagram.getAllRelatedItemsOfItem(item, relationshipName);\n      });\n      return returnObj;\n    }\n  }\n\n  markRelatedItems(item) {\n    var diagram = this,\n      dependantItems,\n      dependencyItems;\n\n    if (diagram.markRelatedFn && item.relationships) {\n      dependantItems = diagram.getAllRelatedItemsOfItem(item, 'dependants');\n      dependencyItems = diagram.getAllRelatedItemsOfItem(item, 'dependencies');\n\n      _.each([dependantItems, dependencyItems], function(relatedItems) {\n        _.each(relatedItems, diagram.markRelatedFn);\n      });\n\n      diagram.markRelatedFn(item.relationships.self);\n    }\n  }\n\n  register() {\n    var diagram = this;\n    d.diagramTypes = d.diagramTypes || [];\n    d.diagramTypes.push(diagram.name);\n    d[diagram.name] = function() {\n      var args = Array.prototype.slice.call(arguments);\n      d.utils.runIfReady(function() {\n        createdDiagramsMaxId++;\n        d.diagramsRegistry.push({\n          diagram: diagram,\n          data: args,\n          id: createdDiagramsMaxId\n        });\n        diagram.addConversionButtons(createdDiagramsMaxId);\n        args.unshift(createdDiagramsMaxId);\n        diagram.create.apply(diagram, args);\n        d.events.emit('diagram-created', diagram);\n      });\n    };\n\n    _.defaults(d[diagram.name], Object.getPrototypeOf(diagram));\n  }\n\n  addConversionButtons(id) {\n    var diagram = this,\n      div = d.Diagram.addDivBeforeSvg(),\n      onClickFn;\n\n    _.each(d.diagramTypes, function(diagramType) {\n      if (diagramType !== diagram.name) {\n        onClickFn = 'diagrams.Diagram.convertDiagram(' + id + ', \\'' + diagramType + '\\')';\n        div.appendButtonToDiv('diagrams-box-conversion-button', 'To ' + diagramType + ' diagram', onClickFn);\n      }\n    });\n  }\n};\n\nd.utils.composeWithEventEmitter(d.Diagram);\n})();(function(){d.events = d.utils.createAnEventEmitter();})();(function(){d.shapes = {};\nd.shapes.hexagon = function(opts) {\n  var halfHeight = opts.height / 2,\n    halfWidth = opts.width / 2,\n    gap = opts.widthPercent ? (1 - (opts.widthPercent / 100)) * opts.width : (opts.width - opts.height) / 2,\n    result = '',\n    center, cx, cy;\n\n  center = opts.center || [halfWidth, halfHeight];\n  cx = center[0];\n  cy = center[1];\n\n  result += 'M' + (cx - halfWidth) + ',' + cy;\n  result += 'L' + (cx - halfWidth + gap) + ',' + (cy + halfHeight);\n  result += 'L' + (cx + halfWidth - gap) + ',' + (cy + halfHeight);\n  result += 'L' + (cx + halfWidth) + ',' + cy;\n  result += 'L' + (cx + halfWidth - gap) + ',' + (cy - halfHeight);\n  result += 'L' + (cx - halfWidth + gap) + ',' + (cy - halfHeight);\n  result += 'Z';\n\n  return result;\n};})();(function(){d.shared = {\n  get: function(key) {\n    d.shared.throwIfSharedMethodAlreadyExists(key);\n    return d.shared[key];\n  },\n  set: function(data) {\n    d.shared.throwIfSharedMethodAlreadyExists(data);\n    d.shared = _.defaults(d.shared, data);\n  },\n  getWithStartingBreakLine: function() {\n    return \"<br>\" + d.shared.get.apply(d.shared, arguments);\n  },\n  throwIfSharedMethodAlreadyExists: function(data) {\n    var keys;\n    if (_.isObject(data)) {\n      keys = Object.keys(data);\n      _.each(keys, d.shared.throwIfSharedMethodAlreadyExists);\n    } else if (_.isString(data)) {\n      if (d.shared[methodsVarName].indexOf(data) > 0) throw new Error('Reserved keyword: ' + data);\n    }\n  }\n};\n\nvar methodsVarName = 'builtInMethods';\nd.shared[methodsVarName] = Object.keys(d.shared);\nd.shared[methodsVarName].push(methodsVarName);\n})();(function(){d.svg = {};\nd.svg.addVerticalGradientFilter = function(container, id, colors) {\n  var defs = container.append('defs'),\n    linearGradient = defs.append('linearGradient').attr({\n      id: id,\n      x1: '0%',\n      y1: '0%',\n      x2: '0%',\n      y2: '100%'\n    });\n\n  linearGradient.append('stop').attr('offset', '0%').style({\n    'stop-color': colors[0],\n    'stop-opacity': 1\n  });\n  linearGradient.append('stop').attr('offset', '100%').style({\n    'stop-color': colors[1],\n    'stop-opacity': 1\n  });\n};\n\nd.svg.addFilterColor = function(id, container, deviation, slope, extra) {\n  var defs = container.append('defs'),\n    filter = defs.append('filter').attr({\n      id: 'diagrams-drop-shadow-' + id\n    });\n\n  if (extra) filter.attr({\n    width: '500%',\n    height: '500%',\n    x: '-200%',\n    y: '-200%'\n  });\n  filter.append('feOffset').attr({\n    result: 'offOut',\n    'in': 'SourceGraphic',\n    dx: 0.5,\n    dy: 0.5\n  });\n  filter.append('feGaussianBlur').attr({\n    result: 'blurOut',\n    'in': 'offOut',\n    stdDeviation: deviation\n  });\n  filter.append('feBlend').attr({\n    'in': 'SourceGraphic',\n    in2: 'blurOut',\n    mode: 'normal'\n  });\n  filter.append('feComponentTransfer').append('feFuncA').attr({\n    type: 'linear',\n    slope: slope\n  });\n};\n\nd.svg.generateSvg = function(style) {\n  var bodyDims = document.body.getBoundingClientRect();\n\n  return d3.select('body').append('svg').attr({\n    width: bodyDims.width - 40,\n    height: 4000\n  }).style(style);\n};\n\nd.svg.updateHeigthOfElWithOtherEl = function(el, otherEl, offset) {\n  el.attr({\n    height: otherEl[0][0].getBoundingClientRect().height + (offset || 0)\n  });\n};\n\nd.svg.textEllipsis = function(width) {\n  return function() {\n    var self = d3.select(this),\n      textLength = self.node().getComputedTextLength(),\n      text = self.text();\n    while (textLength > (width) && text.length > 0) {\n      text = text.slice(0, -4);\n      self.text(text + '...');\n      textLength = self.node().getComputedTextLength();\n    }\n  };\n};})();(function(){var helpers = {\n    generateDefinitionWithSharedGet: function() {\n      var text = arguments[0],\n        sharedKey, preffix;\n\n      preffix = (arguments.length > 1) ? arguments[1] : '';\n      sharedKey = preffix + text.split('(')[0];\n\n      return Box.generateDefinition(text, d.shared.get(sharedKey));\n    },\n\n    addButtons: function(creationId) {\n      var div = d.Diagram.addDivBeforeSvg();\n\n      div.appendButtonToDiv('diagrams-box-collapse-all-button', 'Collapse all', 'diagrams.box.collapseAll(' + creationId + ')');\n      div.appendButtonToDiv('diagrams-box-expand-all-button', 'Expand all', 'diagrams.box.expandAll(' + creationId + ')');\n    },\n\n    expandOrCollapseAll: function(creationId, collapseOrExpand) {\n      var recursiveFn = function(items) {\n        _.each(items, function(item) {\n          if (item.hasOwnProperty('collapsed')) helpers[collapseOrExpand + 'Item'](item);\n          if (item.items) recursiveFn(item.items);\n          if (item.collapsedItems) recursiveFn(item.collapsedItems);\n        });\n      };\n\n      var conf = d.Diagram.getDataWithCreationId(creationId)[1];\n      recursiveFn(conf.body);\n      helpers.addBodyItemsAndUpdateHeights();\n    },\n\n    collapseAll: function(creationId) {\n      helpers.expandOrCollapseAll(creationId, 'collapse');\n    },\n\n    expandAll: function(creationId) {\n      helpers.expandOrCollapseAll(creationId, 'expand');\n    },\n\n    convertToGraph: function(origConf) {\n      console.log(\"origConf\", origConf);\n    },\n\n    convertToLayer: function(origConf) {\n      var convertDataToLayers = function(items) {\n          _.each(items, function(item, index) {\n            if (_.isString(item)) {\n              item = items[index] = {\n                text: item\n              };\n            }\n            if (item.description) item.text += ': ' + item.description;\n            if (item.items) convertDataToLayers(item.items);\n            else item.items = [];\n          });\n        },\n        createLayers = function() {\n          var svg = d3.select('svg');\n\n          d3.selectAll('input.diagrams-diagram-button').remove();\n\n          svg.remove();\n          d.layer(layersData);\n        },\n        layersData = [];\n\n      layersData.push({\n        text: origConf.name,\n        items: origConf.body\n      });\n      convertDataToLayers(layersData[0].items);\n      createLayers();\n    },\n\n    collapseItem: function(item) {\n      if (item.items.length > 0) {\n        item.collapsedItems = item.items;\n        item.collapsed = true;\n        item.items = [];\n      }\n    },\n\n    expandItem: function(item) {\n      if (item.collapsedItems) {\n        item.items = item.collapsedItems;\n        delete item.collapsedItems;\n        item.collapsed = false;\n      }\n    },\n\n    generateItem: function(text, description, options, items) {\n      var defaultOptions = {\n        isLink: false\n      };\n      options = options || {};\n      return {\n        text: text,\n        description: description || null,\n        options: _.defaults(options, defaultOptions),\n        items: items || []\n      };\n    },\n\n    generateContainer: function(text, description, items) {\n      if (_.isArray(description)) {\n        items = description;\n        description = null;\n      }\n\n      return helpers.generateItem(text, description, null, items);\n    },\n\n    generateLink: function(text, url) {\n      return helpers.generateItem(text, url, {\n        isLink: true\n      });\n    },\n\n    generateDefinition: function(text, description) {\n      return helpers.generateItem(text, description);\n    },\n\n    dataFromSpecificToGeneral: function(conf) {\n      var maxId = -1,\n        finalItems = [],\n        connections = [],\n        recursiveFn = function(items, parentCreatedItem) {\n          _.each(items, function(item) {\n            var createdItem = {\n              name: item.text,\n              description: item.description,\n              graphsData: {\n                box: {\n                  options: item.options\n                }\n              },\n              id: ++maxId\n            };\n            finalItems.push(createdItem);\n            if (parentCreatedItem) {\n              connections.push({\n                from: createdItem.id,\n                to: parentCreatedItem.id\n              });\n            } else {\n              connections.push({\n                from: createdItem.id,\n                to: 0\n              });\n            }\n            if (item.items && item.items.length > 0) recursiveFn(item.items, createdItem);\n          });\n        };\n      finalItems.push({\n        name: conf.name,\n        id: ++maxId\n      });\n      recursiveFn(conf.body);\n\n      return {\n        items: finalItems,\n        connections: connections\n      };\n    },\n    dataFromGeneralToSpecific: function(generalData) {\n      var finalData = d.utils.dataFromGeneralToSpecificForATreeStructureType(generalData);\n\n      finalData.name = finalData.text;\n      finalData.body = finalData.items;\n\n      delete finalData.items;\n      delete finalData.text;\n\n      return finalData;\n    }\n  },\n  textGId = 0,\n  Box;\n\nBox = class Box extends d.Diagram {\n  create(creationId, conf, opts) {\n    var diagram = this,\n      svg = d.svg.generateSvg(),\n      width = svg.attr('width') - 40,\n      nameHeight = 50,\n      boxG = svg.append('g').attr({\n        transform: 'translate(20, 20)',\n        'class': 'box-diagram'\n      }),\n      nameG = boxG.append('g'),\n      rowHeight = 30,\n      depthWidth = 35,\n      collapseIfNecessary = function(el, item) {\n        if (item.items.length > 0 || item.collapsedItems) {\n          var textEl = el.select('text'),\n            yDim = textEl.attr('y'),\n            xDim = textEl.attr('x'),\n            triggerEl = el.append('g').attr({\n              'class': 'collapsible-trigger'\n            }),\n            collapseListener = function() {\n              helpers.collapseItem(item);\n              helpers.addBodyItemsAndUpdateHeights();\n            },\n            expandListener = function() {\n              helpers.expandItem(item);\n              helpers.addBodyItemsAndUpdateHeights();\n            },\n            triggerTextEl = triggerEl.append('text').attr({\n              y: Number(yDim) + 5,\n              x: Number(xDim) - 20\n            }),\n            setCollapseTextAndListener = function() {\n              triggerTextEl.text('-').attr('class', 'minus');\n              triggerEl.on('click', collapseListener);\n            },\n            setExpandTextAndListener = function() {\n              triggerTextEl.text('+').attr({\n                'class': 'plus',\n                y: yDim\n              });\n              triggerEl.on('click', expandListener);\n            };\n\n          if (_.isUndefined(item.collapsed)) {\n            item.collapsed = false;\n            setCollapseTextAndListener();\n          } else {\n            if (item.collapsed === true) setExpandTextAndListener();\n            else if (item.collapsed === false) setCollapseTextAndListener();\n          }\n        }\n      },\n      addBodyItems = function(items, container, depth) {\n        var newContainer, textG, textWidth, descriptionWidth, containerText;\n\n        items = items || conf.body;\n        container = container || bodyG;\n        depth = depth || 1;\n\n        if (items === conf.body) bodyPosition = 1;\n\n        _.each(items, function(item, itemIndex) {\n          var currentTextGId;\n\n          currentTextGId = 'diagrams-box-text-' + textGId++;\n          if (_.isString(item)) {\n            item = helpers.generateItem(item);\n            items[itemIndex] = item;\n          }\n          item.items = item.items || [];\n          if (item.items.length > 0) {\n            newContainer = container.append('g');\n            containerText = d.utils.formatShortDescription(item.text);\n            if (item.items && item.items.length > 0) containerText += ':';\n            if (item.description) {\n              item.fullText = d.utils.generateATextDescriptionStr(containerText, item.description);\n              containerText += ' (...)';\n            } else item.fullText = item.text;\n\n            textG = newContainer.append('text').text(containerText).attr({\n              x: depthWidth * depth,\n              y: rowHeight * ++bodyPosition,\n              id: currentTextGId\n            });\n            // item.items = _.sortBy(item.items, 'text');\n            addBodyItems(item.items, newContainer, depth + 1);\n          } else {\n            if (item.options && item.options.isLink === true) {\n              newContainer = container.append('svg:a').attr(\"xlink:href\", item.description)\n              textG = newContainer.append('text').text(d.utils.formatShortDescription(item.text)).attr({\n                id: currentTextGId,\n                x: depthWidth * depth,\n                y: rowHeight * ++bodyPosition,\n                fill: '#3962B8'\n              });\n\n              item.fullText = item.text + ' (' + item.description + ')';\n            } else {\n              newContainer = container.append('g').attr({\n                id: currentTextGId\n              });\n              textG = newContainer.append('text').text(d.utils.formatShortDescription(item.text)).attr({\n                x: depthWidth * depth,\n                y: rowHeight * ++bodyPosition\n              }).style({\n                'font-weight': 'bold'\n              });\n              if (item.description) {\n                textWidth = textG[0][0].getBoundingClientRect().width;\n                descriptionWidth = svg[0][0].getBoundingClientRect().width - textWidth - depthWidth * depth - 30;\n\n                newContainer.append('text').text('- ' + d.utils.formatShortDescription(item.description)).attr({\n                  x: depthWidth * depth + textWidth + 5,\n                  y: rowHeight * bodyPosition - 1\n                }).each(d.svg.textEllipsis(descriptionWidth));\n              }\n\n              item.fullText = d.utils.generateATextDescriptionStr(item.text, item.description);\n            }\n          }\n          collapseIfNecessary(newContainer, item);\n          item.textG = newContainer;\n\n          diagram.addMouseListenersToEl(textG, item);\n        });\n      },\n      bodyG, bodyPosition, bodyRect;\n\n    opts = opts || {};\n\n    helpers.addBodyItemsAndUpdateHeights = _.bind(function() {\n      var diagram = this,\n        currentScroll = (window.pageYOffset || document.documentElement.scrollTop) - (document.documentElement.clientTop || 0);\n      svg.attr('height', 10);\n      if (bodyG) bodyG.remove();\n      bodyG = boxG.append('g').attr({\n        transform: 'translate(0, ' + nameHeight + ')'\n      });\n      bodyRect = bodyG.append('rect').attr({\n        width: width,\n        stroke: '#000',\n        fill: '#fff'\n      }).style({\n        filter: 'url(#diagrams-drop-shadow-box)'\n      });\n      addBodyItems();\n      diagram.setRelationships(conf.body);\n      d.svg.updateHeigthOfElWithOtherEl(svg, boxG, 50);\n      d.svg.updateHeigthOfElWithOtherEl(bodyRect, boxG, 25 - nameHeight);\n\n      window.scrollTo(0, currentScroll);\n      diagram.emit('items-rendered');\n    }, this);\n\n    d.svg.addFilterColor('box', svg, 3, 4);\n\n    nameG.append('rect').attr({\n      height: nameHeight,\n      width: width,\n      stroke: '#000',\n      fill: '#fff'\n    }).style({\n      filter: 'url(#diagrams-drop-shadow-box)'\n    });\n    nameG.append('text').attr({\n      x: width / 2,\n      y: 30\n    }).text(conf.name).style({\n      'font-weight': 'bold',\n      'text-anchor': 'middle'\n    });\n\n    d3.select(document.body).style('opacity', 0);\n    helpers.addBodyItemsAndUpdateHeights();\n    if (opts.allCollapsed === true) helpers.collapseAll(creationId);\n    helpers.addButtons(creationId);\n    d3.select(document.body).style('opacity', 1);\n  }\n\n  setRelationships(items, container) {\n    var diagram = this;\n    _.each(items, function(item) {\n      diagram.generateEmptyRelationships(item);\n      if (container) {\n        diagram.addDependantRelationship(container, item.textG, item);\n        diagram.addDependencyRelationship(item, container.textG, container);\n      }\n      if (item.items && item.items.length > 0) diagram.setRelationships(item.items, item);\n    });\n  }\n};\n\nnew Box({\n  name: 'box',\n  helpers: helpers\n});\n})();(function(){// The links number map is between two nodesalso starts with the lower id\nvar linksNumberMap = {},\n  dPositionFn = d.utils.positionFn,\n  dTextFn = d.utils.textFn,\n  helpers = {\n    generateNodeOptions: function(options) {\n      var obj = {},\n        shape;\n      if (_.isString(options)) return helpers.generateNodeOptions(options.split(' '));\n      else if (_.isArray(options)) {\n        _.each(options, function(opt) {\n          if (opt.substr(0, 2) === 's-') {\n            shape = opt.substr(2, opt.length - 2);\n            if (shape === 't') obj.shape = 'triangle';\n            else if (shape === 's') obj.shape = 'square';\n            else obj.shape = 'circle';\n          } else if (opt === 'b') obj.bold = true;\n        });\n        return obj;\n      }\n    },\n    getDefaultConnection: function() {\n      var defaultConnection = {\n        direction: 'out',\n        symbol: 'arrow',\n        line: 'plain'\n      };\n\n      return _.cloneDeep(defaultConnection);\n    },\n    mergeWithDefaultConnection: function(connection) {\n      return _.defaults(connection, helpers.getDefaultConnection());\n    },\n    generateNode: function() {\n      var node = {\n          name: arguments[0]\n        },\n        addDefaultConnectionFromNumber = function(nodeId) {\n          node.connections.push(helpers.mergeWithDefaultConnection({\n            nodesIds: [nodeId]\n          }));\n        },\n        connections;\n\n      if (arguments.length > 1) {\n        connections = arguments[1];\n        node.connections = [];\n        if (_.isString(arguments[1])) {\n          connections = connections.split(' ').map(Number);\n          if (connections.length > 0) node.id = connections[0];\n          if (connections.length > 1) {\n            _.each(connections, function(nodeId, index) {\n              if (index > 0) addDefaultConnectionFromNumber(nodeId);\n            });\n          }\n        } else if (_.isArray(connections)) {\n          node.id = connections[0];\n          connections = connections.slice(1);\n          _.each(connections, function(connection) {\n            if (_.isNumber(connection)) addDefaultConnectionFromNumber(connection);\n            else if (_.isObject(connection)) {\n              helpers.mergeWithDefaultConnection(connection);\n              node.connections.push(connection);\n            }\n          });\n        } else if (_.isNumber(connections)) node.id = connections;\n\n        if (arguments.length > 2) node.description = arguments[2];\n        if (arguments.length > 3) node.options = helpers.generateNodeOptions(arguments[3]);\n      }\n\n      return node;\n    },\n    generateNodeWithSharedGet: function() {\n      var text = arguments[0],\n        sharedKey, preffix, options;\n\n      preffix = (arguments.length > 2) ? arguments[2] : '';\n      sharedKey = preffix + text.split('(')[0];\n      options = (arguments.length > 3) ? arguments[3] : null;\n\n      return helpers.generateNode(text, arguments[1], d.shared.get(sharedKey), options);\n    },\n    generateFnNodeWithSharedGetAndBoldIfFile: function(file) {\n      return function() {\n        var opts = '',\n          preffix = '';\n        if (arguments[0].split('@')[0] === file) opts = 'b';\n        if (arguments.length > 2) preffix = arguments[2];\n        if (arguments.length > 3) opts = arguments[3] + ' ' + opts;\n        return helpers.generateNodeWithSharedGet(arguments[0], arguments[1], preffix, opts);\n      };\n    },\n    dataFromGeneralToSpecific: function(generalData) {\n      var finalItems = [],\n        idToIndexMap = {},\n        targetItem;\n\n      _.each(generalData.items, function(item, index) {\n        finalItems.push({\n          name: item.name,\n          id: item.id,\n          description: item.description\n        });\n        idToIndexMap[item.id] = index;\n      });\n\n      _.each(generalData.connections, function(connection) {\n        targetItem = finalItems[idToIndexMap[connection.to]];\n        targetItem.connections = targetItem.connections || [];\n        targetItem.connections.push({\n          direction: 'in',\n          nodesIds: [connection.from]\n        });\n      });\n\n      return finalItems;\n    },\n    dataFromSpecificToGeneral: function(data) {\n      var finalItems = [],\n        connections = [];\n\n      _.each(data, function(node) {\n        finalItems.push({\n          id: node.id,\n          name: node.name,\n          description: node.description\n        });\n        _.each(node.connections, function(connection) {\n          _.each(connection.nodesIds, function(otherNodeId) {\n            connections.push({\n              from: node.id,\n              to: otherNodeId\n            });\n          });\n        });\n      });\n\n      return {\n        items: finalItems,\n        connections: connections\n      };\n    },\n    doWithMinIdAndMaxIdOfLinkNodes: function(link, cb) {\n      var getIndex = function(item) {\n          return (_.isNumber(item)) ? item : item.index;\n        },\n        ids = [getIndex(link.source), getIndex(link.target)],\n        minIndex = _.min(ids),\n        maxIndex = _.max(ids);\n\n      return cb(minIndex, maxIndex);\n    },\n    updateLinksNumberMapWithLink: function(link) {\n      helpers.doWithMinIdAndMaxIdOfLinkNodes(link, function(minIndex, maxIndex) {\n        if (_.isUndefined(linksNumberMap[minIndex])) linksNumberMap[minIndex] = {};\n\n        if (_.isUndefined(linksNumberMap[minIndex][maxIndex])) linksNumberMap[minIndex][maxIndex] = 1;\n        else linksNumberMap[minIndex][maxIndex] += 1;\n      });\n    },\n    getLinksNumberMapItemWithLink: function(link) {\n      return helpers.doWithMinIdAndMaxIdOfLinkNodes(link, function(minIndex, maxIndex) {\n        return linksNumberMap[minIndex][maxIndex];\n      });\n    }\n  },\n  Graph, helpers;\n\nGraph = class Graph extends d.Diagram {\n  create(creationId, data, conf) {\n    var diagram = this,\n      bodyHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0),\n      svg = d.svg.generateSvg(),\n      container = svg.append('g'),\n      height = bodyHeight - 250,\n      width = svg.attr('width'),\n      tick = function() {\n        var setPathToLink = function(pathClass) {\n          link.select('path.' + pathClass).attr(\"d\", function(d) {\n            var linksNumber = helpers.getLinksNumberMapItemWithLink(d),\n              linkIndex = d.data.linkIndex,\n              dx = d.target.x - d.source.x,\n              dy = d.target.y - d.source.y,\n              dr = Math.sqrt(dx * dx + dy * dy) * 3.5 * ((linkIndex + 1) / (linksNumber * 3));\n            return \"M\" +\n              d.source.x + \",\" +\n              d.source.y + \"A\" +\n              dr + \",\" + dr + \" 0 0,1 \" +\n              d.target.x + \",\" +\n              d.target.y;\n          });\n        };\n\n        _.each(['link-path', 'link-path-title'], setPathToLink);\n\n        node.each(function(singleNode) {\n          if (singleNode.shape === 'circle') {\n            node.select('circle').attr(\"cx\", dPositionFn('x')).attr(\"cy\", dPositionFn('y'));\n          } else {\n            if (singleNode.shape === 'triangle') shapeEl = node.select('path.triangle');\n            else if (singleNode.shape === 'square') shapeEl = node.select('path.square');\n\n            d.utils.applySimpleTransform(shapeEl);\n          }\n        });\n        node.select('text').attr(\"x\", dPositionFn('x')).attr(\"y\", dPositionFn('y', -20));\n      },\n      parseData = function() {\n        var maxId = _.reduce(data, function(memo, node) {\n            var id = node.id || 0;\n            return (memo > id) ? memo : id;\n          }, 0),\n          idsMap = {},\n          nodesWithLinkMap = {},\n          colors = d3.scale.category10(),\n          nodeId, color, options, otherNode, linkObj;\n        parsedData = {\n          links: [],\n          nodes: []\n        };\n        markers = [];\n        _.each(data, function(node, nodeIndex) {\n          nodeId = _.isUndefined(node.id) ? maxId++ : node.id;\n          color = colors(nodeIndex);\n          options = node.options || {};\n\n          parsedData.nodes.push({\n            name: node.name,\n            id: nodeId,\n            connections: node.connections || [],\n            description: node.description || null,\n            color: color,\n            shape: options.shape || 'circle',\n            bold: options.bold || false\n          });\n          idsMap[nodeId] = {\n            index: nodeIndex\n          };\n          if (_.isArray(node.connections) && node.connections.length > 0) {\n            idsMap[nodeId].color = color;\n            markers.push({\n              id: nodeId,\n              color: color\n            });\n          }\n        });\n\n        _.each(parsedData.nodes, function(node, nodeIndex) {\n          if (node.connections.length > 0) {\n            _.each(node.connections, function(connection) {\n              _.each(connection.nodesIds, function(otherNodeId) {\n                otherNode = idsMap[otherNodeId];\n\n                if (otherNode) {\n                  if (conf.hideNodesWithoutLinks) {\n                    nodesWithLinkMap[otherNode.index] = true;\n                    nodesWithLinkMap[nodeIndex] = true;\n                  }\n\n                  linkObj = {};\n                  if (connection.direction === 'out') {\n                    linkObj.source = nodeIndex;\n                    linkObj.target = otherNode.index;\n                  } else {\n                    linkObj.source = otherNode.index;\n                    linkObj.target = nodeIndex;\n                  }\n                  linkObj.data = connection;\n                  linkObj.color = idsMap[node.id].color;\n                  helpers.updateLinksNumberMapWithLink(linkObj);\n                  linkObj.data.linkIndex = helpers.getLinksNumberMapItemWithLink(linkObj) - 1;\n                  if (linkObj.data.text) linkObj.data.fullText = linkObj.data.text;\n                  parsedData.links.push(linkObj);\n                }\n              });\n            });\n          }\n        });\n\n        if (conf.hideNodesWithoutLinks === true) {\n          _.each(parsedData.nodes, function(node, nodeIndex) {\n            if (nodesWithLinkMap[nodeIndex] !== true) node.hidden = true;\n          });\n        }\n      },\n      zoomed = function() {\n        container.attr(\"transform\", \"translate(\" + d3.event.translate + \")scale(\" + d3.event.scale + \")\");\n      },\n      dragstarted = function() {\n        d3.event.sourceEvent.stopPropagation();\n        d3.select(this).classed(\"dragging\", true);\n        force.start();\n      },\n      dragged = function(d) {\n        d3.select(this).attr(\"cx\", d.x = d3.event.x).attr(\"cy\", d.y = d3.event.y);\n      },\n      dragended = function() {\n        d3.select(this).classed(\"dragging\", false);\n      },\n      setRelationships = function() {\n        _.each(parsedData.nodes, diagram.generateEmptyRelationships, diagram);\n        _.each(parsedData.nodes, function(node) {\n          diagram.addSelfRelationship(node, node.shapeEl, node);\n        });\n        _.each(parsedData.links, function(link) {\n          diagram.addDependencyRelationship(link.source, link.target.shapeEl, link.target);\n          diagram.addDependantRelationship(link.target, link.source.shapeEl, link.source);\n        });\n      },\n      force, drag, link, linkTitle, node, zoom, singleNodeEl, shape, shapeEl, markers, parsedData;\n\n    diagram.markRelatedFn = function(item) {\n      item.el.style('stroke-width', '10px');\n    };\n    diagram.unmarkAllItems = function() {\n      _.each(parsedData.nodes, function(node) {\n        node.shapeEl.style('stroke-width', '1px');\n      });\n    };\n\n    conf = conf || {};\n    parseData();\n\n    svg.attr({\n      height: height,\n      'class': 'graph-diagram'\n    });\n\n\n    zoom = d3.behavior.zoom().scaleExtent([0.1, 10]).on(\"zoom\", zoomed);\n    svg.call(zoom);\n\n    force = d3.layout.force().size([width, height]).charge(conf.charge || -10000).linkDistance(conf.linkDistance || 140).on(\"tick\", tick);\n\n    drag = d3.behavior.drag().origin(function(d) {\n      return d;\n    }).on(\"dragstart\", dragstarted).on(\"drag\", dragged).on(\"dragend\", dragended);\n\n    force.nodes(parsedData.nodes).links(parsedData.links).start();\n\n    container.append(\"svg:defs\").selectAll(\"marker\")\n      .data(markers)\n      .enter().append(\"svg:marker\")\n      .attr({\n        id: dTextFn('id', 'arrow-head-'),\n        'class': 'arrow-head',\n        fill: dTextFn('color'),\n        viewBox: '0 -5 10 10',\n        refX: 19,\n        refY: -1.5,\n        markerWidth: 8,\n        markerHeight: 8,\n        orient: 'auto'\n      })\n      .append(\"svg:path\")\n      .attr(\"d\", \"M0,-5L10,0L0,5\");\n\n    link = container.selectAll(\".link\").data(parsedData.links).enter().append('g').attr(\"class\", \"link\");\n    link.append(\"svg:path\").attr({\n      'class': 'link-path',\n      \"marker-end\": function(d) {\n        var markerItem = (d.data.direction === 'out') ? 'source' : 'target';\n        return 'url(#arrow-head-' + d[markerItem].id + ')';\n      }\n    }).style({\n      'stroke': dTextFn('color'),\n      'stroke-dasharray': function(d) {\n        if (d.data.line === 'plain') return null;\n        else if (d.data.line === 'dotted') return '5,5';\n      }\n    });\n\n    linkTitle = link.append('g');\n    linkTitle.filter(function(d) {\n      return _.isUndefined(d.data.text) === false;\n    }).append('svg:path').attr('class', 'link-path-title');\n    linkTitle.each(function(d) {\n      diagram.addMouseListenersToEl(d3.select(this), d.data);\n    });\n\n    node = container.selectAll(\".node\").data(parsedData.nodes).enter().append('g').attr({\n      'class': function(d) {\n        var finalClass = 'node';\n        if (d.hidden === true) finalClass += ' node-hidden';\n        return finalClass;\n      },\n      id: dTextFn('id', 'node-')\n    });\n\n    node.each(function(singleNode) {\n      var singleNodeClasses = '';\n      singleNodeEl = d3.select(this);\n      singleNode.fullText = d.utils.generateATextDescriptionStr(singleNode.name, singleNode.description);\n\n      if (singleNode.shape === 'circle') {\n        shapeEl = singleNodeEl.append(\"circle\").attr({\n          r: 12,\n          fill: dTextFn('color')\n        });\n      } else {\n        shape = d3.svg.symbol().size(750);\n        shapeEl = singleNodeEl.append(\"path\");\n        if (singleNode.shape === 'triangle') {\n          shape = shape.type('triangle-up');\n          singleNodeClasses += ' triangle';\n        } else if (singleNode.shape === 'square') {\n          shape = shape.type('square');\n          singleNodeClasses += ' square';\n        }\n        shapeEl = shapeEl.attr({\n          d: shape,\n          fill: dTextFn('color')\n        });\n        d.utils.applySimpleTransform(shapeEl);\n      }\n\n      shapeEl.call(drag);\n      if (singleNode.bold === true) singleNodeClasses += ' bold';\n      else singleNodeClasses += ' thin';\n      shapeEl.attr('class', singleNodeClasses);\n\n      singleNode.shapeEl = shapeEl;\n      diagram.addMouseListenersToEl(shapeEl, singleNode);\n    });\n    node.append(\"text\").text(dTextFn('name'));\n\n    setRelationships();\n  }\n};\n\nnew Graph({\n  name: 'graph',\n  helpers: helpers\n});\n})();(function(){var layerGId = 0,\n  dTextFn = d.utils.textFn,\n  helpers = {\n    ids: 0,\n    Grid: class Grid {\n      constructor(fixedWidth) {\n        this.position = {\n          x: 0,\n          y: 0\n        };\n        this.width = fixedWidth;\n        this.cells = [];\n      }\n      addItemAtNewRow(item) {\n        var counter = 0;\n\n        this.position.x = 0;\n        while (counter < 1000) {\n          this.position.y += 1;\n          if (this.itemFitsAtCurrentPos(item)) break;\n        }\n        this.addItemAtCurrentPos(item);\n      }\n      addItemAtCurrentPos(item) {\n        this.addItemAtPos(item, this.position);\n      }\n      createRowIfNecessary(posY) {\n        if (_.isUndefined(this.cells[posY])) this.cells[posY] = [];\n      }\n      addItemAtPos(item, pos) {\n        var row;\n        item.x = pos.x;\n        item.y = pos.y;\n        for (var i = 0; i < item.height; i++) {\n          this.createRowIfNecessary(i + pos.y);\n          row = this.cells[i + pos.y];\n          for (var j = 0; j < item.width; j++) {\n            row[j + pos.x] = true;\n          }\n        }\n        this.updatePosition();\n      }\n      updatePosition() {\n        var counter = 0;\n        while (counter < 1000) {\n          this.position.x += 1;\n          if (this.position.x === this.width) {\n            this.position.x = -1;\n            this.position.y += 1;\n            this.createRowIfNecessary(this.position.y);\n          } else if (this.cells[this.position.y][this.position.x] !== true) {\n            break;\n          }\n          counter++;\n        }\n      }\n      itemFitsAtPos(item, pos) {\n        var row;\n        for (var i = 0; i < item.height; i++) {\n          row = this.cells[i + pos.y];\n          if (_.isUndefined(row)) return true;\n          for (var j = 0; j < item.width; j++) {\n            if (row[j + pos.x] === true) return false;\n            if ((j + pos.x + 1) > this.width) return false;\n          }\n        }\n        return true;\n      }\n      itemFitsAtCurrentPos(item) {\n        return this.itemFitsAtPos(item, this.position);\n      }\n      movePositionToNextRow() {\n        this.position.y++;\n        this.position.x = 0;\n        this.createRowIfNecessary(this.position.y);\n      }\n      lastRowIsEmpty() {\n        var rows = this.cells.length;\n        for (var i = 0; i < this.width; i++) {\n          if (this.cells[rows - 1][i] === true) return false;\n        }\n        return true;\n      }\n      getSize() {\n        var rows = this.cells.length;\n        return {\n          width: this.width,\n          height: (this.lastRowIsEmpty()) ? rows - 1 : rows\n        };\n      }\n    },\n\n    config: {\n      widthSize: 350,\n      heightSize: 60,\n      depthWidthFactor: 4,\n      depthHeightFactor: 2,\n      showNumbersAll: false\n    },\n\n    handleConnectedToNextCaseIfNecessary: function(layers, currentIndex) {\n      var layer = layers[currentIndex],\n        nextLayer = layers[currentIndex + 1],\n        connectedTo, newId;\n\n      if (layer.hasOwnProperty('connectedWithNext') === true && nextLayer) {\n        if (nextLayer.id) newId = nextLayer.id;\n        else {\n          newId = 'to-next-' + String(++helpers.ids);\n          nextLayer.id = newId;\n        }\n\n        if (_.isObject(layer.connectedWithNext) && layer.connectedWithNext.type) {\n          connectedTo = {\n            id: newId,\n            type: layer.connectedWithNext.type\n          };\n        } else connectedTo = newId;\n\n        if (layer.connectedTo) layer.connectedTo.push(connectedTo);\n        else layer.connectedTo = [connectedTo];\n      }\n    },\n\n    itemsOfLayerShouldBeSorted: function(itemsArray) {\n      var ret = true;\n      _.each(itemsArray, function(item) {\n        if (item.hasOwnProperty('connectedTo')) ret = false;\n        if (item.hasOwnProperty('connectToNext')) ret = false;\n      });\n      return ret;\n    },\n\n    calculateLayerWithChildrenDimensions: function(layer) {\n      var totalWidth = 0,\n        totalHeight = 0,\n        maxWidth = 0,\n        maxHeight = 0,\n        itemsArray = [],\n        whileCounter = 0,\n        itemsOfLayer, grid, itemsOfLayerIndex, width, gridSize, itemsShouldBeSorted,\n        addedItemToGrid = function(index) {\n          if (itemsOfLayer[index].inNewRow === true) {\n            grid.addItemAtNewRow(itemsOfLayer[index]);\n            itemsOfLayer.splice(index, 1);\n            return true;\n          } else if (grid.itemFitsAtCurrentPos(itemsOfLayer[index])) {\n            grid.addItemAtCurrentPos(itemsOfLayer[index]);\n            itemsOfLayer.splice(index, 1);\n            return true;\n          } else return false;\n        };\n\n      _.each(layer.items, function(item) {\n        totalWidth += item.width;\n        totalHeight += item.height;\n        maxHeight = (item.height > maxHeight) ? item.height : maxHeight;\n        maxWidth = (item.width > maxWidth) ? item.width : maxWidth;\n        itemsArray.push(item);\n      });\n\n      if ((totalWidth / 2) >= maxWidth) {\n        if (totalHeight > totalWidth) {\n          if (totalHeight / 2 < layer.items.length) width = Math.ceil(totalWidth / 2);\n          else width = totalWidth;\n        } else width = Math.ceil(totalWidth / 2);\n      } else width = maxWidth;\n\n      width = (helpers.maxUnityWidth < width) ? helpers.maxUnityWidth : width;\n\n      grid = new helpers.Grid(width);\n\n      itemsShouldBeSorted = helpers.itemsOfLayerShouldBeSorted(itemsArray);\n      if (itemsShouldBeSorted) {\n        itemsOfLayer = itemsArray.sort(function(itemA, itemB) {\n          if (itemA.width === itemB.width) {\n            return itemA.height < itemB.height;\n          } else return itemA.width < itemB.width;\n        });\n      } else itemsOfLayer = itemsArray;\n      addedItemToGrid(0);\n      itemsOfLayerIndex = 0;\n      while (itemsOfLayer.length > 0 && whileCounter < 1000) {\n        if (addedItemToGrid(itemsOfLayerIndex)) {\n          itemsOfLayerIndex = 0;\n        } else {\n          if (itemsShouldBeSorted) {\n            itemsOfLayerIndex++;\n            if (itemsOfLayerIndex === itemsOfLayer.length) {\n              itemsOfLayerIndex = 0;\n              grid.movePositionToNextRow();\n            }\n          } else {\n            grid.movePositionToNextRow();\n          }\n        }\n        whileCounter++;\n      }\n\n      gridSize = grid.getSize();\n      // This two values only persist if the layer is a top one\n      layer.x = 0;\n      layer.y = 0;\n      layer.width = gridSize.width;\n      layer.height = (layer.items.length > 0) ? gridSize.height + 1 : gridSize.height;\n    },\n\n    generateLayersData: function(layers, currentDepth) {\n      var config = helpers.config,\n        maxDepth, itemsDepth;\n\n      currentDepth = currentDepth || 1;\n      maxDepth = currentDepth;\n      _.each(layers, function(layer, layerIndex) {\n        if (layer.showNumbersAll === true) config.showNumbersAll = true;\n        layer.depth = currentDepth;\n        helpers.handleConnectedToNextCaseIfNecessary(layers, layerIndex);\n        if (layer.items.length > 0) {\n          itemsDepth = helpers.generateLayersData(layer.items, (currentDepth + 1));\n          layer.maxLayerDepthBelow = itemsDepth - currentDepth;\n          helpers.calculateLayerWithChildrenDimensions(layer);\n          maxDepth = (maxDepth < itemsDepth) ? itemsDepth : maxDepth;\n        } else {\n          layer.maxLayerDepthBelow = 0;\n          layer.width = 1;\n          layer.height = 1;\n          maxDepth = (maxDepth < itemsDepth) ? itemsDepth : maxDepth;\n        }\n        layer.alreadyConnections = [];\n      });\n\n      return maxDepth;\n    },\n\n    getFinalLayerDimensions: function(layer) {\n      var config = helpers.config,\n        height = layer.height * config.heightSize - config.depthHeightFactor * layer.depth * 2,\n        width = layer.width * config.widthSize - config.depthWidthFactor * layer.depth * 2,\n        transform = 'translate(' + config.depthWidthFactor * layer.depth + ',' + config.depthHeightFactor * layer.depth + ')',\n        fill = 'url(#color-' + String(layer.depth - 1) + ')',\n        dimensions = {\n          height: height,\n          width: width,\n          transform: transform,\n          fill: fill\n        };\n      if (config.showNumbersAll === true || (layer.containerData && layer.containerData.showNumbers === true)) {\n        dimensions.numberTransform = 'translate(' + String(width - 15 + config.depthWidthFactor * layer.depth) + ',' + String(config.depthHeightFactor * layer.depth + height + 0) + ')';\n      }\n\n      return dimensions;\n    },\n\n    dataFromSpecificToGeneral: function(conf) {\n      var maxId = -1,\n        finalItems = [],\n        connections = [],\n        recursiveFn = function(items, parentCreatedItem) {\n          _.each(items, function(item) {\n            var firstOccurrence = /(\\. |:)/.exec(item.fullText),\n              name, description, splittedText, createdItem;\n            if (firstOccurrence) {\n              splittedText = item.fullText.split(firstOccurrence[0]);\n              name = splittedText[0];\n              description = splittedText.slice(1).join(firstOccurrence);\n            }\n            createdItem = {\n              name: name || item.fullText,\n              description: description || null,\n              graphsData: {\n                layer: {\n                  relationships: item.options,\n                  id: item.id\n                }\n              },\n              id: ++maxId\n            };\n            finalItems.push(createdItem);\n            if (parentCreatedItem) {\n              connections.push({\n                from: createdItem.id,\n                to: parentCreatedItem.id\n              });\n            }\n\n            if (item.items && item.items.length > 0) recursiveFn(item.items, createdItem);\n          });\n        };\n\n      recursiveFn([conf]);\n      return {\n        items: finalItems,\n        connections: connections\n      };\n    },\n\n    dataFromGeneralToSpecific: function(generalData) {\n      return d.utils.dataFromGeneralToSpecificForATreeStructureType(generalData);\n    },\n\n    newLayer: function(text, opts, items) {\n      var layer = {\n        text: text\n      };\n\n      if (_.isArray(opts)) items = opts;\n      else {\n        if (_.isString(opts)) opts = helpers.extendOpts(opts);\n        if (_.isObject(opts)) layer = _.extend(layer, opts);\n      }\n\n      if (items) layer.items = items;\n      if (_.isUndefined(layer.id)) layer.id = 'layer-' + (++helpers.ids) + '-auto'; // Have to limit the id by the two sides to enable .indexOf to work\n\n      return layer;\n    },\n\n    newLayerConnectedToNext: function() {\n      var args = arguments.length;\n\n      if (args === 1) return helpers.newLayer(arguments[0], 'cn');\n      else if (args === 2) {\n        if (typeof(arguments[1]) === 'object') return helpers.newLayer(arguments[0], 'cn', arguments[1]);\n        else if (typeof(arguments[1] === 'string')) return helpers.newLayer(arguments[0], arguments[1] + ' cn');\n      } else if (args === 3) return helpers.newLayer(arguments[0], arguments[1] + ' cn', arguments[2]);\n    },\n\n    staticOptsLetters: {\n      co: {\n        conditional: true\n      },\n      cn: {\n        connectedWithNext: true\n      },\n      sna: {\n        showNumbersAll: true\n      },\n      sn: {\n        showNumbers: true\n      },\n      cnd: {\n        connectedWithNext: {\n          type: 'dashed'\n        }\n      },\n      nr: {\n        inNewRow: true\n      }\n    },\n\n    idOpt: function(id) {\n      return {\n        id: 'layer-' + id + '-custom'\n      };\n    },\n\n    extendOpts: function() {\n      var result = {};\n\n      _.each(arguments, function(arg) {\n        if (typeof(arg) === 'string') {\n          _.each(arg.split(' '), function(opt) {\n            if (opt.substr(0, 3) === 'id-') result = _.extend(result, helpers.idOpt(opt.substr(3, opt.length)));\n            else if (opt.substr(0, 3) === 'ct-') helpers.connectWithOpt(Number(opt.substr(3, opt.length)), result);\n            else if (opt.substr(0, 4) === 'ctd-') helpers.connectWithOpt(Number(opt.substr(4, opt.length)), result, 'dashed');\n            else result = _.extend(result, helpers.staticOptsLetters[opt]);\n          });\n        } else if (_.isObject(arg)) {\n          result = _.extend(result, arg);\n        }\n      });\n\n      return result;\n    },\n\n    connectWithOpt: function(ids, result, type) {\n      var objs = [];\n      if (_.isNumber(ids)) ids = [ids];\n      type = type || 'standard';\n\n      _.each(ids, function(id) {\n        objs.push({\n          id: 'layer-' + id + '-custom',\n          type: type\n        });\n      });\n\n      if (_.isUndefined(result.connectedTo) === true) result.connectedTo = objs;\n      else result.connectedTo = result.connectedTo.concat(objs);\n    },\n\n    connectWithOptAndIdOpt: function(ids, id) {\n      var connectWithOpt = diagrams.layer.connectWithOpt(ids),\n        idOpt = diagrams.layer.idOpt(id);\n\n      return _.extend(connectWithOpt, idOpt);\n    }\n  },\n  Layer;\n\n_.each([\n  'newLayer',\n  'newLayerConnectedToNext'\n], function(helpersMethod) {\n  helpers[helpersMethod + 'WithCode'] = function(codeLanguage) {\n    var codeFn = diagrams.utils.codeBlockOfLanguageFn(codeLanguage);\n    return function() {\n      var args = arguments;\n      args[0] = codeFn(args[0]);\n      return helpers[helpersMethod].apply(this, args);\n    };\n  };\n\n  helpers[helpersMethod + 'WithParagraphAndCode'] = function(codeLanguage) {\n    var codeFn = diagrams.utils.codeBlockOfLanguageFn(codeLanguage);\n    return function() {\n      var args = [].splice.call(arguments, 0),\n        paragraphText = args[0],\n        code = args[1],\n        text = d.utils.wrapInParagraph(paragraphText) + codeFn(code);\n\n      args = args.splice(2);\n      args.unshift(text);\n      return helpers[helpersMethod].apply(this, args);\n    };\n  };\n});\n\nLayer = class Layer extends d.Diagram {\n  create(creationId, conf) {\n    var diagram = this,\n      config = helpers.config,\n      colors = ['#ECD078', '#D95B43', '#C02942', '#78E4B7', '#53777A', '#00A8C6', '#AEE239', '#FAAE8A'],\n      addItemsPropToBottomItems = function(layers) {\n        _.each(layers, function(layer) {\n          if (layer.hasOwnProperty('items') === false) {\n            layer.items = [];\n          } else addItemsPropToBottomItems(layer.items);\n        });\n      },\n      calculateTheMostOptimalConnection = function(layerA, layerBObj) {\n        // There are 12 possible: 4 sides to 3 each\n        var getTopSidePos = function(layer) {\n            return {\n              x: (layer.x + layer.width / 2) * config.widthSize + config.depthWidthFactor * layer.depth,\n              y: layer.y * config.heightSize + config.depthHeightFactor * layer.depth\n            };\n          },\n          getBottomSidePos = function(layer) {\n            return {\n              x: (layer.x + layer.width / 2) * config.widthSize + config.depthWidthFactor * layer.depth,\n              y: (layer.y + layer.height) * config.heightSize - config.depthHeightFactor * layer.depth\n            };\n          },\n          getLeftSidePos = function(layer) {\n            return {\n              x: layer.x * config.widthSize + config.depthWidthFactor * layer.depth,\n              y: (layer.y + layer.height / 2) * config.heightSize + config.depthHeightFactor * layer.depth\n            };\n          },\n          getRightSidePos = function(layer) {\n            return {\n              x: (layer.x + layer.width) * config.widthSize - config.depthWidthFactor * layer.depth,\n              y: (layer.y + layer.height / 2) * config.heightSize + config.depthHeightFactor * layer.depth\n            };\n          },\n          getSidesPos = function(layer) {\n            return {\n              top: getTopSidePos(layer),\n              bottom: getBottomSidePos(layer),\n              left: getLeftSidePos(layer),\n              right: getRightSidePos(layer)\n            };\n          },\n          distance = {\n            val: Infinity\n          },\n          doesNotCrossAnyOfTwoLayers = function(posA, posB, sideA, sideB) {\n            if ((sideA === 'bottom' || sideA === 'left' || sideA === 'top') && sideB === 'right') {\n              if (posA.x < posB.x) return false;\n            } else if ((sideA === 'bottom' || sideA === 'right' || sideA === 'top') && sideB === 'left') {\n              if (posA.x > posB.x) return false;\n            } else if ((sideA === 'bottom' || sideA === 'right' || sideA === 'left') && sideB === 'top') {\n              if (posA.y > posB.y) return false;\n            } else if ((sideA === 'left' || sideA === 'right' || sideA === 'top') && sideB === 'bottom') {\n              if (posA.y < posB.y) return false;\n            }\n            return true;\n          },\n          calcDistanceAndUpdate = function(posA, posB) {\n            var e2 = function(num) {\n                return Math.pow(num, 2);\n              },\n              newDistance = Math.sqrt(e2(posA.x - posB.x) + e2(posA.y - posB.y));\n            if (newDistance < distance.val) {\n              distance.val = newDistance;\n              distance.from = posA;\n              distance.to = posB;\n              return true;\n            } else return false;\n          },\n          eachSide = function(cb) {\n            _.each(['top', 'bottom', 'left', 'right'], function(side) {\n              cb(side);\n            });\n          },\n          sameTypeOfSides = function(sideA, sideB) {\n            var result = false;\n            _.each([\n              [sideA, sideB],\n              [sideB, sideA]\n            ], function(sides) {\n              if (sides[0] === 'top' && sides[1] === 'bottom') result = true;\n              else if (sides[0] === 'left' && sides[1] === 'right') result = true;\n            });\n            return result;\n          },\n          loopSidesToGetConnection = function(sameTypeOfSidesCondition) {\n            eachSide(function(sideA) {\n              eachSide(function(sideB) {\n                if (_.isUndefined(layerB.alreadyConnections)) layerB.alreadyConnections = [];\n                if (sideA !== sideB && layerA.alreadyConnections.indexOf(sideA) < 0 && layerB.alreadyConnections.indexOf(sideB) < 0) {\n                  if ((sameTypeOfSidesCondition === false && sameTypeOfSides(sideA, sideB) === false) || sameTypeOfSides(sideA, sideB)) {\n                    if (doesNotCrossAnyOfTwoLayers(layerAPos[sideA], layerBPos[sideB], sideA, sideB)) {\n                      changed = calcDistanceAndUpdate(layerAPos[sideA], layerBPos[sideB]);\n                      if (changed === true) {\n                        distance.sideA = sideA;\n                        distance.sideB = sideB;\n                      }\n                    }\n                  }\n                }\n              });\n            });\n          },\n          layerB = layerBObj.layer,\n          layerAPos = getSidesPos(layerA),\n          layerBPos = getSidesPos(layerB),\n          changed;\n\n\n        loopSidesToGetConnection(true);\n        if (changed !== true) loopSidesToGetConnection(false);\n\n        layerA.alreadyConnections.push(distance.sideA);\n        layerB.alreadyConnections.push(distance.sideB);\n        return distance;\n\n      },\n      drawConnection = function(connection) {\n        var container = connection.layer.container,\n          containerData = connection.layer.containerData,\n          connectionG, connectionId, connectionCoords, linkLine, connectionPath;\n\n        _.each(connection.connectedTo, function(connectedToLayer) {\n          connectionCoords = calculateTheMostOptimalConnection(connection.layer, connectedToLayer);\n\n          linkLine = d3.svg.line().x(dTextFn('x')).y(dTextFn('y'));\n          connectionId = connection.layer.id + '-' + connectedToLayer.layer.id;\n          connectionG = container.append('g').attr('id', connectionId);\n          if (connectionCoords.from && connectionCoords.to) {\n            connectionPath = connectionG.append('path')\n              .attr('d', linkLine([connectionCoords.from, connectionCoords.to])).style({\n                stroke: '#000',\n                fill: 'none'\n              });\n\n            if (connectedToLayer.type === 'dashed') connectionPath.style('stroke-dasharray', '5, 5');\n\n            connectionG.append(\"circle\").attr({\n              cx: connectionCoords.to.x,\n              cy: connectionCoords.to.y,\n              r: 5,\n              fill: colors[connection.layer.depth - 1]\n            }).style({\n              stroke: '#000'\n            });\n\n            containerData.connections = containerData.connections || [];\n            containerData.connections.push({\n              el: connectionG,\n              id: connectionId\n            });\n          }\n        });\n      },\n      drawConnectionsIfAny = function(layers) {\n        layers = layers || conf;\n\n        _.chain(layers).filter(function(layer) {\n          return layer.hasOwnProperty('connectedTo');\n        }).map(function(layer) {\n          var layersConnectedTo = [],\n            layerConnectedObj, layerConnectedId, layerConnectedType;\n          _.each(layer.connectedTo, function(layerConnected) {\n            layerConnectedId = _.isObject(layerConnected) ? layerConnected.id : layerConnected;\n            layerConnectedType = _.isObject(layerConnected) && layerConnected.type ? layerConnected.type : 'standard';\n\n            layerConnectedObj = _.where(layers, {\n              id: layerConnectedId\n            })[0];\n\n            layersConnectedTo.push({\n              layer: layerConnectedObj,\n              type: layerConnectedType\n            });\n          });\n          return {\n            layer: layer,\n            connectedTo: layersConnectedTo\n          };\n        }).each(function(connection) {\n          drawConnection(connection);\n        }).value();\n\n        _.chain(layers).filter(function(layer) {\n          return layer.items.length > 0;\n        }).each(function(layer) {\n          drawConnectionsIfAny(layer.items);\n        }).value();\n      },\n      updateSvgHeight = function() {\n        var getBottomPointOfLayer = function(layer) {\n            return layer.y + layer.height;\n          },\n          bottomLayer = _.max(conf, getBottomPointOfLayer),\n          bottomPoint = getBottomPointOfLayer(bottomLayer),\n          bottomPointPxs = bottomPoint * config.heightSize + 20;\n\n        svg.attr('height', bottomPointPxs);\n      },\n      calcMaxUnityWidth = function() {\n        var bodyWidth = document.body.getBoundingClientRect().width;\n\n        helpers.maxUnityWidth = Math.floor(bodyWidth / config.widthSize);\n      },\n      showAllLayerContainerConnections = function(childLayer) {\n        if (childLayer.containerData) {\n          var connections = childLayer.containerData.connections;\n          if (connections) {\n            _.each(connections, function(connection) {\n              connection.el.style('opacity', 1);\n            });\n          }\n        }\n      },\n      hideAllLayerContainerConnectionsExceptOfLayer = function(childLayer) {\n        if (childLayer.containerData) {\n          var connections = childLayer.containerData.connections;\n          if (connections) {\n            _.each(connections, function(connection) {\n              if (connection.id.indexOf(childLayer.id) === -1) connection.el.style('opacity', 0.2);\n            });\n          }\n        }\n      },\n      formatLayerTextIfNecessary = function(text) {\n        text = text.replace(/<p>/g, '');\n        text = text.replace(/<\\/p>/g, '. ');\n        text = d.utils.replaceCodeFragmentOfText(text, function(matchStr, language, codeBlock) {\n          if (matchStr === text && /\\n/.test(matchStr) === false) return codeBlock;\n          else return '<CODE...>';\n        });\n        return text;\n      },\n      drawLayersInContainer = function(layers, container, containerData) {\n        var widthSize = config.widthSize,\n          heightSize = config.heightSize,\n          layerG, layerNode, layerDims, layerText;\n\n        layers = layers || conf;\n        container = container || svg;\n\n        _.each(layers, function(layer, layerIndex) {\n\n\n          var currentLayerId = 'diagrams-layer-g-' + layerGId++,\n            numberG;\n\n          layerG = container.append('g').attr({\n            transform: 'translate(' + String(layer.x * widthSize) + ', ' + layer.y * heightSize + ')',\n            'class': 'layer-node',\n            id: currentLayerId\n          });\n\n          layer.layerG = layerG;\n          layer.container = container;\n          layer.containerData = containerData;\n\n          layerDims = helpers.getFinalLayerDimensions(layer);\n          layerNode = layerG.append('g');\n          if (layer.conditional === true) {\n            layerNode.append('path').attr({\n              d: d.shapes.hexagon({\n                height: layerDims.height,\n                width: layerDims.width,\n                widthPercent: 97 + Math.abs(3 - layer.depth)\n              }),\n              transform: layerDims.transform,\n              fill: layerDims.fill,\n              stroke: '#f00'\n            });\n          } else {\n            layerNode.append('rect').attr({\n              width: layerDims.width,\n              transform: layerDims.transform,\n              height: layerDims.height,\n              fill: layerDims.fill\n            }).style({\n              filter: 'url(#diagrams-drop-shadow-layer)'\n            });\n          }\n\n\n          layerText = layerNode.append('text').attr({\n            transform: layerDims.transform,\n            x: layer.depth,\n            y: layer.height * heightSize - 3 * layer.depth - 10\n          }).text(function() {\n            return d.utils.formatShortDescription(layer.text);\n          });\n\n\n          layer.fullText = layer.text;\n          // Missing to add show all layers connections and hide\n          diagram.addMouseListenersToEl(layerNode, layer);\n\n          layerText.each(d.svg.textEllipsis(layer.width * widthSize - config.depthWidthFactor * layer.depth * 2));\n\n          if (layerDims.numberTransform) {\n            numberG = layerNode.append('g').attr({\n              'class': 'number',\n              transform: layerDims.numberTransform\n            });\n            numberG.append('circle').attr({\n              r: 10,\n              cx: 4,\n              cy: -4,\n              fill: colors[layer.depth - 1],\n              'stroke-width': 2,\n              stroke: '#000',\n              filert: 'none'\n            });\n            numberG.append('text').text(layerIndex + 1)\n              .attr('fill', '#000');\n          }\n\n          if (layer.items.length > 0) {\n            drawLayersInContainer(layer.items, layerG, layer);\n          }\n        });\n      },\n      svg = d.svg.generateSvg({\n        margin: '20px 0 0 20px'\n      });\n\n    diagram.markRelatedFn = function(item) {\n      item.data.origFill = item.data.origFill || item.el.select('rect').style('fill');\n      item.el.select('rect').style({\n        'fill': 'rgb(254, 255, 209)'\n      });\n    };\n    diagram.unmarkAllItems = function() {\n      var recursiveFn = function(items) {\n        _.each(items, function(item) {\n          item.layerG.style({\n            'stroke-width': '1px'\n          });\n          if (item.origFill) {\n            item.layerG.select('rect').style('fill', item.origFill);\n          }\n          if (item.items) recursiveFn(item.items);\n        });\n      };\n      recursiveFn(conf);\n    };\n\n    _.each(colors, function(color, index) {\n      d.svg.addVerticalGradientFilter(svg, 'color-' + index, ['#fff', color]);\n    });\n\n    svg.attr('class', 'layers-diagram');\n\n    if (_.isArray(conf) === false) conf = [conf];\n    d.svg.addFilterColor('layer', svg, 3, 2);\n\n    addItemsPropToBottomItems(conf);\n    calcMaxUnityWidth();\n    helpers.generateLayersData(conf);\n    drawLayersInContainer();\n    drawConnectionsIfAny();\n    updateSvgHeight();\n    diagram.generateRelationships(conf);\n  }\n\n  generateRelationships(layers, containerLayer) {\n    var diagram = this;\n    _.each(layers, function(layer) {\n      diagram.generateEmptyRelationships(layer);\n      diagram.addSelfRelationship(layer, layer.layerG, layer);\n      if (containerLayer) {\n        diagram.addDependantRelationship(containerLayer, layer.layerG, layer);\n        diagram.addDependencyRelationship(layer, containerLayer.layerG, containerLayer);\n      }\n      if (layer.items && layer.items.length > 0) diagram.generateRelationships(layer.items, layer);\n    });\n  }\n};\n\nnew Layer({\n  name: 'layer',\n  helpers: helpers\n});\n})();(function(){  })();\n\n  scope.diagrams = diagrams;\n})(window);"]}